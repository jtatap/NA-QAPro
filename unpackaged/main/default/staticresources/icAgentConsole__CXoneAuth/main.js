(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(n,e,t){n.exports=t("zUnb")},zUnb:function(n,e,t){"use strict";t.r(e);var l=t("lyMf"),r=t("vnL/"),o=t("cz6e"),s=function(){function n(){}return n.prototype.parseOpenIDConfig=function(n){this.openIdAuthorize=n.openIdAuthorize,this.openIdClientId=n.openIdClientId,this.busNo=n.bus_no,this.icAuthorizationUrl=n.icAuthorizationUrl,this.icAuthenticationEnabled=n.icAuthenticationEnabled,this.openIdAuthRequestParams=n.openIdAuthRequestParams},n}(),i=t("qIyx"),u=t("Fpf7"),a=t.n(u),c=t("Oeku"),g=t("+X4q"),d=function(){function n(){}return n.prototype.parseData=function(n){this.accessToken=n.access_token?n.access_token:n.accessToken,this.refreshToken=n.refresh_token?n.refresh_token:n.refreshToken,this.expiresIn=n.expires_in?n.expires_in:n.accessTokenExpiry,this.accessTokenTime=(new Date).getTime()},n}(),h=function(){return function(){this.isUserHub=!1,this.userHubLoginBaseUrl="https://auth.nice-incontact.com",this.userHubNotificationUrl="https://na1-ws.nice-incontact.com/ws/notifications",this.userHubWebBaseUrl="https://na1.nice-incontact.com",this.centralTokenUrl="https://api.incontact.com/InContactAuthorizationServer/Token",this.centralMyDomain="",this.forgotPassword=""}}(),p=function(){function n(){}return n.prototype.get=function(n){return localStorage.getItem(n)},n.prototype.set=function(n,e){return localStorage.setItem(n,e)},n.prototype.remove=function(n){return localStorage.removeItem(n)},n.prototype.clear=function(){return localStorage.clear()},n.ngInjectableDef=Object(l.S)({factory:function(){return new n},token:n,providedIn:"root"}),n}(),b=function(){function n(){}return n.prototype.isNotNullOrUndefined=function(n){return"null"!==n&&null!==n&&"undefined"!==n&&void 0!==n},n.prototype.isNotNullOrEmpty=function(n){return!(!this.isNotNullOrUndefined(n)||""===n)},n.prototype.isValidStationId=function(n){return/^[0-9]+$/.test(n)},n.prototype.isValidPhoneNumber=function(n){return!!(/^(\+?)([0-9#\*])+$/.test(n)&&n.length<=30)},n.prototype.isNullOrEmpty=function(n){return null==n||""===n},n.prototype.isNotNullOrEmptyArray=function(n){return!(null==n||""===n||"object"!=typeof n||!this.isNumber(n.length)||0===n.length)},n.prototype.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},n.prototype.isValidObject=function(n){return null!==n&&"object"==typeof n&&Object.keys(n).length>0},n.prototype.isJSON=function(n){try{var e=JSON.parse(n);return e&&"object"==typeof e}catch(t){return!1}},n.ngInjectableDef=Object(l.S)({factory:function(){return new n},token:n,providedIn:"root"}),n}(),f=function(){function n(n,e){this.storageSvc=n,this.validationUtilSvc=e}return n.prototype.getAccessToken=function(){var n=this.storageSvc.get("authToken");return JSON.parse(n)},n.prototype.setAccessToken=function(n){return this.storageSvc.set("authToken",JSON.stringify(n))},n.prototype.isTokenExpired=function(){var n=this.getAccessToken();return!this.validationUtilSvc.isNotNullOrEmpty(n)||((new Date).getTime()-n.accessTokenTime)/1e3>=n.expiresIn-120},n.ngInjectableDef=Object(l.S)({factory:function(){return new n(Object(l.W)(p),Object(l.W)(b))},token:n,providedIn:"root"}),n}(),m=function(){function n(){}return n.prototype.get=function(n){return sessionStorage.getItem(n)},n.prototype.set=function(n,e){return sessionStorage.setItem(n,e)},n.prototype.remove=function(n){return sessionStorage.removeItem(n)},n.prototype.clear=function(){sessionStorage.clear()},n.ngInjectableDef=Object(l.S)({factory:function(){return new n},token:n,providedIn:"root"}),n}(),v=function(){function n(){}return n.ngInjectableDef=Object(l.S)({factory:function(){return new n},token:n,providedIn:"root"}),n}(),S=function(){function n(n){this.storageServiceSvc=n}return n.prototype.onLog=function(n){var e=this.storageServiceSvc.get("appLogs");e=e||"",e+=this.getFormattedMessage(n);for(var t=this.getLogSize(e);t>5;)e=this.removeLog(e).join("\n"),t=this.getLogSize(e);this.storageServiceSvc.set("appLogs",e)},n.prototype.getFormattedMessage=function(n){return n.timestamp+" "+i.f[n.level]+" ["+n.message+"] "+n.additional+"\n"},n.prototype.getAllLogs=function(){return this.storageServiceSvc.get("appLogs")},n.prototype.getLogSize=function(n){return 2*n.length/1048576},n.prototype.removeLog=function(n){var e=n.split("\n"),t=Math.round(e.length/5);return e.splice(0,t),e},n.ngInjectableDef=Object(l.S)({factory:function(){return new n(Object(l.W)(v))},token:n,providedIn:"root"}),n}(),y=function(){function n(n,e){this.logger=n,this.storageService=e,this.logMonitorService=new S(e),this.logger.registerMonitor(this.logMonitorService)}return n.prototype.trace=function(n,e){this.logger.trace(n,e)},n.prototype.debug=function(n,e){this.logger.debug(n,e)},n.prototype.info=function(n,e){this.logger.info(n,e)},n.prototype.log=function(n,e){this.logger.log(n,e)},n.prototype.warn=function(n,e){this.logger.warn(n,e)},n.prototype.error=function(n,e){this.logger.error(n,e)},n.prototype.fatal=function(n,e){this.logger.fatal(n,e)},n.prototype.downloadLog=function(n){var e=this.logMonitorService.getAllLogs(),t=new a.a;t.file("app-logs.rtf",e),t.file("app-sf-logs.rtf",n),t.generateAsync({type:"blob"}).then(function(n){Object(c.saveAs)(n,"salesforce-logs.zip")})},n.prototype.updateLog=function(n){this.logger.updateConfig({level:n})},n.ngInjectableDef=Object(l.S)({factory:function(){return new n(Object(l.W)(i.d),Object(l.W)(m))},token:n,providedIn:"root"}),n}(),N=function(){function n(n){this.logger=n}return n.prototype.appendQueryString=function(n,e){var t="",l="";for(l in e)e.hasOwnProperty(l)&&(""!==t&&(t+="&"),t+=l+"="+encodeURIComponent(e[l]));return-1===n.indexOf("?")?n+=""===t?t:"?"+t:n+=""===t?t:"&"+t,n},n.prototype.getParameterByName=function(n,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(n);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))},n.prototype.isValidURL=function(n){return/((?:https?\:\/\/|www\.)(?:[-a-z0-9]+\.)*[-a-z0-9]+.*)/i.test(n)},n.prototype.addParamToQueryString=function(n){var e=window.location.search;return""===e?e="?":e+="&",e+n},n.prototype.parseQueryString=function(e){var t={};try{if("string"!=typeof e)return t;if("?"===e.charAt(0)&&(e=e.slice(1)),0===e.length)return t;for(var l=e.split("&"),r=0;r<l.length;r++){var o=l[r].split("=");t[o[0]]=o[1]?decodeURIComponent(o[1]):null}}catch(s){this.logger.error(n.className,"Error in parsing query string -"+s.message)}return t},n.prototype.getHostName=function(n){return n?new URL(n).hostname:""},n.prototype.isSFDomain=function(n){return!!(/\.force\.com$/i.test(n)||/\.salesforce\.com/i.test(n)||/\.visualforce\.com$/i.test(n))},n.prototype.parseUrl=function(n){var e=document.createElement("a");return e.href=n,{search:e.search,hostname:e.hostname}},n.className="URLUtilsService",n.ngInjectableDef=Object(l.S)({factory:function(){return new n(Object(l.W)(y))},token:n,providedIn:"root"}),n}(),C=function(){function n(n){this.translate=n,this.supportedLangs=["de","en_US","es","fr","it","ja","ko","pt_BR","ru","zh_CN"],n.addLangs(this.supportedLangs),n.setDefaultLang("en_US")}return n.prototype.setLanguage=function(n){this.translate.use(n)},n.prototype.getLocalizedValue=function(n){return this.translate.get(n)},n.ngInjectableDef=Object(l.S)({factory:function(){return new n(Object(l.W)(g.j))},token:n,providedIn:"root"}),n}(),U=function(){function n(){this.openCtiService="OpenCTIController"}return n.init=function(){var e=new m,t=new n,l=e.get("initParam");if(l){var r=JSON.parse(l);t.icUsername=r.icUsername,t.icRememberMe=!!r.icRememberMe&&JSON.parse(r.icRememberMe),t.authCallbackUrl=r.authCallbackUrl,t.langCode=r.langCode,t.resourceBase=r.resourceBase,t.sfSessionId=r.sfSessionId,""!==r.namespacePrefix&&(t.openCtiService=r.namespacePrefix+"."+t.openCtiService)}else t.langCode="en_US",t.resourceBase=".";return t},n}(),I=t("Sppo"),x=t("igHR"),k=function(){function n(n,e,t){this.http=n,this.validationUtilSvc=e,this.logger=t,this.invalidCredentialsMsg="You have entered a wrong username or password",this.accountLockedMsg="For security reasons, your account is locked. Please contact your manager to unlock your account.",this.accountLockedMsgFromAPI="Login failed. The account has been locked. Contact your system administrator.",this.initParam=U.init()}return n.prototype.getAuthenticationSettings=function(){var e=this;return this.logger.log(n.className,"Get authenticate setting"),new Promise(function(t,l){try{sforce.opencti.getCallCenterSettings({callback:function(r){e.logger.debug(n.className,"getAuthenticationSettings - "+JSON.stringify(r)),r.success?t(e.parseAuthenticationSettings(r.returnValue)):e.validationUtilSvc.isNotNullOrUndefined(r.errors)&&r.errors.length>0&&e.validationUtilSvc.isNotNullOrUndefined(r.errors[0].description)?l(r.errors[0].description):l(r.errors)}})}catch(r){e.logger.error(n.className,"Error in getAuthenticationSettings..."+r),l(r.message)}})},n.prototype.parseAuthenticationSettings=function(e){this.logger.log(n.className,"parseAuthenticationSettings");var t=new h,l=e["/inContactSettings/authMode"]?e["/inContactSettings/authMode"]:"inContact";return t.centralTokenUrl=e["/inContactSettings/icAuthorizationUrl"]||e["/inContactSettings/inContactTokenServiceUri"],t.isUserHub=l&&"evolve"===l.toLowerCase()||"userhub"===l.toLowerCase(),t.userHubLoginBaseUrl=e["/inContactSettings/evolveAuthUrl"],t.userHubNotificationUrl=e["/inContactSettings/evolveNotificationUrl"],t.userHubWebBaseUrl=e["/inContactSettings/evolveWebServerUrl"],t.centralMyDomain=e["/inContactSettings/icCustomDomain"],t.forgotPassword=e["/inContactSettings/forgotPassword"],this.logger.debug(n.className," parseAuthenticationSettings "+JSON.stringify(t)),t},n.prototype.storeUserCredentials=function(e,t,l){var r=this;return this.logger.log(n.className,"storeUserCredentials"),new Promise(function(o,s){try{sforce.opencti.runApex({apexClass:r.initParam.openCtiService,methodName:"storeUserCredentials",methodParams:"userName="+encodeURIComponent(e)+"&password="+encodeURIComponent(t)+"&rememberMe="+l,callback:function(e){if(r.logger.debug(n.className,"storeUserCredentials - "+JSON.stringify(e)),e.success&&r.validationUtilSvc.isNotNullOrUndefined(e.returnValue.runApex)){var t=JSON.parse(e.returnValue.runApex);"true"===t.success?o(!0):s(t.error)}else r.validationUtilSvc.isNotNullOrUndefined(e.errors)&&e.errors.length>0&&r.validationUtilSvc.isNotNullOrUndefined(e.errors[0].description)?s(e.errors[0].description):s(e.errors)}})}catch(i){r.logger.error(n.className,"Error in storeUserCredentials..."+i),s(i.message)}})},n.prototype.getAccessToken=function(e){var t=this;return this.logger.log(n.className,"getAccessToken"),new Promise(function(l,r){try{sforce.opencti.runApex({apexClass:t.initParam.openCtiService,methodName:"authenticate",methodParams:"authUrl="+encodeURIComponent(e)+"&isUserHub=false&authCode=&idpType=&busNo=&redirectUri=",callback:function(e){if(t.logger.debug(n.className,"getAccessToken - "+JSON.stringify(e)),e.success){var o=JSON.parse(e.returnValue.runApex);if(200===o.statusCode){var s=new d;s.parseData(JSON.parse(o.data)),l(s)}else r(401===o.statusCode?o.statusText===t.accountLockedMsgFromAPI?t.accountLockedMsg:t.invalidCredentialsMsg:o.statusText||o.error)}else t.validationUtilSvc.isNotNullOrUndefined(e.errors)&&e.errors.length>0&&t.validationUtilSvc.isNotNullOrUndefined(e.errors[0].description)?r(e.errors[0].description):r(e.errors)}})}catch(o){t.logger.error(n.className,"Error in getAccessToken..."+o.message),r(o.message)}})},n.prototype.getOpenIDConfiguration=function(n){return this.http.get(n,{responseType:"json"}).pipe(Object(r.a)(function(n){var e=new s;return e.parseOpenIDConfig(n),e}),Object(o.a)(function(n){return Object(I.a)(n)}))},n.className="SalesforceAuthenticationService",n.ngInjectableDef=l.S({factory:function(){return new n(l.W(x.c),l.W(b),l.W(y))},token:n,providedIn:"root"}),n}(),w=t("kS7W"),_=U.init(),O=function(n){return new w.a(n,_.resourceBase+"/assets/i18n/")},A=function(){return function(){}}(),P=function(){return function(n){this.localizationSvc=n,this.title="auth-app";var e=U.init();this.localizationSvc.setLanguage(e.langCode)}}(),E=t("IvJO"),T=t("KOjA"),z=t("RiUZ");function L(n){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n.value)?null:{forbiddenName:!0}}var j=function(){return function(){this.centralError="",this.idpError="",this.authSettingsError="",this.refreshTokenError=""}}(),M=function(){function n(n,e,t,l,r,o,s,i){this.authService=n,this.accessTokenSvc=e,this.fb=t,this.localStorageSvc=l,this.sessionStorageSvc=r,this.logger=o,this.urlUtilSvc=s,this.validationUtilSvc=i,this.defaultPwdIcon="preview",this.disableBtn=!1,this.isExternalAuthenticationEnabled=!1,this.isCentralAuthenticationEnabled=!1,this.errorMessage=new j,this.canShowPwd=!1,this.canShowSpinner=!0,this.pwdIcon=this.defaultPwdIcon,this.isForgotPassword=!1}return Object.defineProperty(n.prototype,"username",{get:function(){return this.loginForm.get("username")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"password",{get:function(){return this.loginForm.get("password")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rememberMe",{get:function(){return this.loginForm.get("rememberMe")},enumerable:!0,configurable:!0}),n.prototype.ngOnInit=function(){this.logger.log(n.className,"Login component initialize"),this.initParam=U.init(),this.getAuthenticationSettings(),this.createLoginForm();var e=this.sessionStorageSvc.get("authErr");this.validationUtilSvc.isNotNullOrUndefined(e)&&(this.logger.debug(n.className,"Authenticate callback error"+e),this.errorMessage.idpError=e,this.sessionStorageSvc.remove("authErr"));var t=this.sessionStorageSvc.get("refreshTokenError");this.validationUtilSvc.isNotNullOrUndefined(t)&&(this.logger.debug(n.className,"RefreshTokenError error"+t),this.errorMessage.refreshTokenError=t,this.sessionStorageSvc.remove("refreshTokenError"))},n.prototype.createLoginForm=function(){this.logger.log(n.className,"Create login Form");var e="",t=!1;this.validationUtilSvc.isNotNullOrUndefined(this.initParam.icUsername)&&(e=this.initParam.icUsername),this.validationUtilSvc.isNotNullOrUndefined(this.initParam.icRememberMe)&&(t=this.initParam.icRememberMe),this.loginForm=this.fb.group({username:[e,[z.m.required,L]],password:["",[z.m.required]],rememberMe:[t]})},n.prototype.getAuthenticationSettings=function(){var e=this;this.logger.log(n.className,"Get authenticate setting ");var t=this.localStorageSvc.get("sfSessionId"),l=this.initParam.sfSessionId;t!==l&&(this.logger.info(n.className,"Salesforce session has changed. Clearing auth settings"),this.localStorageSvc.remove("authConfig"),this.localStorageSvc.set("sfSessionId",l));var r=this.localStorageSvc.get("authConfig");this.validationUtilSvc.isNotNullOrUndefined(r)?(this.authSettings=JSON.parse(r),this.logger.debug(n.className,"authSettings from localstorage - "+r),this.isForgotPassword=this.urlUtilSvc.isValidURL(this.authSettings.forgotPassword),this.redirectToAuthenticationPage()):this.authService.getAuthenticationSettings().then(function(t){e.authSettings=t,e.logger.debug(n.className,"authSettings from salesforce - "+JSON.stringify(t)),e.localStorageSvc.set("authConfig",JSON.stringify(t)),e.isForgotPassword=e.urlUtilSvc.isValidURL(e.authSettings.forgotPassword),e.redirectToAuthenticationPage()},function(t){e.logger.error(n.className,"getAuthenticationSettings error "+t),e.canShowSpinner=!1,e.errorMessage.authSettingsError=t})},n.prototype.togglePassword=function(e){"keyup"===e.type&&13!==e.keyCode||(this.canShowPwd=!this.canShowPwd,this.pwdIcon=this.canShowPwd?"hide":this.defaultPwdIcon,this.logger.debug(n.className,"toggle password "+this.canShowPwd))},n.prototype.canDisableSignIn=function(){return this.disableBtn=!0,null===this.username.errors&&null===this.password.errors&&(this.disableBtn=!1),this.disableBtn},n.prototype.authenticateAgent=function(){var e=this;this.logger.log(n.className,"Authenticate agent entry"),this.disableBtn=!0,this.errorMessage.centralError="",this.authService.storeUserCredentials(this.username.value,this.password.value,this.rememberMe.value).then(function(t){e.logger.debug(n.className,"Authenticate agent success "+t),!0===t?e.getAccessToken():e.disableBtn=!1},function(t){e.logger.error(n.className,"Authenticate agent error "+t),e.errorMessage.centralError=t,e.disableBtn=!1})},n.prototype.getAccessToken=function(){var e=this;this.logger.debug(n.className,"Get Access token "+this.authSettings.centralTokenUrl),this.authService.getAccessToken(this.authSettings.centralTokenUrl).then(function(t){e.logger.debug(n.className,"getAccessToken in login component - "+JSON.stringify(t)),e.accessTokenSvc.setAccessToken(t),e.redirectToAgent()},function(t){e.logger.debug(n.className,"getAccessToken error"+t),e.errorMessage.centralError=t,e.disableBtn=!1})},n.prototype.redirectToAgent=function(){var e=this.urlUtilSvc.getParameterByName(window.location.search,"redirectURL");this.logger.debug(n.className,"agentUrl - "+e),this.validationUtilSvc.isNotNullOrEmpty(e)&&(window.location.href=e)},n.prototype.redirectToAuthenticationPage=function(){this.validationUtilSvc.isNotNullOrEmpty(this.authSettings.centralMyDomain)?this.getOpenIdpConfiguration():this.authSettings.isUserHub?this.redirectToUserHubLoginPage():this.canAuthenticateCentral(!0)},n.prototype.redirectToUserHubLoginPage=function(){var e=this.authSettings.userHubLoginBaseUrl+"/login/#/?redirectURL="+encodeURIComponent(this.initParam.authCallbackUrl);this.logger.debug(n.className,"User Hub page url "+e),this.redirectToLoginPage(e)},n.prototype.canAuthenticateCentral=function(n){this.canShowSpinner=!1,this.isCentralAuthenticationEnabled=n,!0===this.isCentralAuthenticationEnabled&&this.validationUtilSvc.isNotNullOrEmpty(this.initParam.icUsername)&&!0===this.initParam.icRememberMe&&!this.validationUtilSvc.isNotNullOrEmpty(this.sessionStorageSvc.get("disableAutoLogin"))&&this.getAccessToken(),this.sessionStorageSvc.remove("disableAutoLogin")},n.prototype.getOpenIdpConfiguration=function(){var e=this;this.logger.log(n.className,"Redirect to sso auth info"),this.isExternalAuthenticationEnabled=!0;var t=this.sessionStorageSvc.get("authIdp");if(this.validationUtilSvc.isNotNullOrUndefined(t))this.logger.debug(n.className,"SSO Authenticate setting from sessionStorage "+t),this.openIDConfig=JSON.parse(t),this.canAuthenticateCentral(this.openIDConfig.icAuthenticationEnabled);else{var l=this.authSettings.centralMyDomain.toLowerCase(),r=-1!==l.indexOf("https:")?l+"/inContact/Login.aspx":"https:"+l+"/inContact/Login.aspx";this.authService.getOpenIDConfiguration(r).subscribe(function(t){e.logger.debug(n.className,"Open Id configuration : "+JSON.stringify(t)),e.openIDConfig=t,e.sessionStorageSvc.set("authIdp",JSON.stringify(t)),e.canAuthenticateCentral(t.icAuthenticationEnabled)},function(t){e.logger.error(n.className,"Open Id configuration error : "+t),e.errorMessage.idpError=t.message})}},n.prototype.authenticateIdp=function(){if(this.logger.log(n.className,"authenticate sso page"),!this.validationUtilSvc.isNotNullOrEmpty(this.openIDConfig)||!this.validationUtilSvc.isNotNullOrEmpty(this.openIDConfig.openIdAuthorize)){var e="Login failed. Check whether your custom domain OpenID Connect configuration is validated in central.";return this.logger.error(n.className,e),void(this.errorMessage.idpError=e)}this.logger.debug(n.className,"Redirect/Callback URI for SSO - "+this.initParam.authCallbackUrl);var t=this.parseOpenIdpUrl();t&&(this.logger.debug(n.className,"Redirecting to openid provider login page - "+t),this.redirectToLoginPage(t))},n.prototype.parseOpenIdpUrl=function(){this.logger.log(n.className,"Get SSO Login page url"),this.openIdAuthRequestStateParam=(new Date).getTime();var e={response_type:"code",client_id:this.openIDConfig.openIdClientId,redirect_uri:this.initParam.authCallbackUrl,scope:"openid email profile",state:this.openIdAuthRequestStateParam};if(this.validationUtilSvc.isNotNullOrUndefined(this.openIDConfig.openIdAuthRequestParams))for(var t in this.openIDConfig.openIdAuthRequestParams)this.validationUtilSvc.isNotNullOrUndefined(this.openIDConfig.openIdAuthRequestParams[t])&&(e[t]=this.openIDConfig.openIdAuthRequestParams[t]);return this.urlUtilSvc.appendQueryString(this.openIDConfig.openIdAuthorize,e)},n.prototype.redirectToLoginPage=function(e){this.logger.debug(n.className,"redirectToLoginPage "+e),this.sessionStorageSvc.set("qrystr",window.location.search),this.validationUtilSvc.isNotNullOrEmpty(e)&&(window.location.href=e)},n.prototype.recoverPassword=function(){window.open(this.authSettings.forgotPassword,"targetWindow","scrollbars=yes, resizable=yes, width=600px, height=600px, left=400px, top=40px")},n.prototype.hideAuthSettingsError=function(){this.errorMessage.authSettingsError=""},n.prototype.onPasswordChange=function(n){n.stopPropagation(),this.canDisableSignIn(),13!==n.keyCode||this.disableBtn||this.authenticateAgent()},n.className="LoginComponent",n}(),D=l.nb({encapsulation:0,styles:[[".errorMessage[_ngcontent-%COMP%]{word-break:break-word}.login-form[_ngcontent-%COMP%]{height:100vh}"]],data:{}});function R(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,5,"div",[["class","slds-box slds-clearfix"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,1,"div",[["role","alert"]],null,null,null,null,null)),(n()(),l.Cb(2,null,["",""])),(n()(),l.pb(3,0,null,null,2,"button",[["class","slds-button slds-button_neutral slds-m-top_x-small slds-float_right"]],null,[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.hideAuthSettingsError()&&l),l},null,null)),(n()(),l.Cb(4,null,["",""])),l.zb(131072,g.i,[g.j,l.h])],null,function(n,e){var t=e.component;n(e,2,0,t.errorMessage.authSettingsError||t.errorMessage.refreshTokenError),n(e,4,0,l.Db(e,4,0,l.yb(e,5).transform("ok")))})}function q(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,4,"div",[["class","slds-spinner_container"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,3,"div",[["class","slds-align_absolute-center"]],null,null,null,null,null)),(n()(),l.pb(2,0,null,null,2,"div",[["class","slds-spinner slds-spinner_medium slds-spinner_brand"],["role","status"]],null,null,null,null,null)),(n()(),l.pb(3,0,null,null,0,"div",[["class","slds-spinner__dot-a"]],null,null,null,null,null)),(n()(),l.pb(4,0,null,null,0,"div",[["class","slds-spinner__dot-b"]],null,null,null,null,null))],null,null)}function B(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,1,"div",[["class","slds-p-top_medium slds-col slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_2-of-3 slds-large-size_1-of-3 errorMessage slds-text-color_error"],["id","ssoErrorMessage"],["role","alert"]],null,null,null,null,null)),(n()(),l.Cb(1,null,["",""]))],null,function(n,e){n(e,1,0,e.component.errorMessage.idpError)})}function H(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,9,"div",[["class","slds-col slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_2-of-3 slds-large-size_1-of-3 slds-p-top_medium"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,2,"div",[["class","slds-text-align_left"],["id","ssoHeader"]],null,null,null,null,null)),(n()(),l.Cb(2,null,["",""])),l.zb(131072,g.i,[g.j,l.h]),(n()(),l.gb(16777216,null,null,1,null,B)),l.ob(5,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.pb(6,0,null,null,3,"div",[["class","slds-col slds-p-top_medium slds-p-bottom_medium"]],null,null,null,null,null)),(n()(),l.pb(7,0,null,null,2,"button",[["class","slds-button slds-button_brand slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"],["id","companySignIn"]],null,[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.authenticateIdp()&&l),l},null,null)),(n()(),l.Cb(8,null,["",""])),l.zb(131072,g.i,[g.j,l.h])],function(n,e){n(e,5,0,e.component.errorMessage.idpError)},function(n,e){n(e,2,0,l.Db(e,2,0,l.yb(e,3).transform("ssoLoginInfo"))),n(e,8,0,l.Db(e,8,0,l.yb(e,9).transform("companySignIn")))})}function J(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,2,"div",[["class","slds-p-top_medium slds-text-align_center"],["id","orLabel"]],null,null,null,null,null)),(n()(),l.Cb(1,null,["",""])),l.zb(131072,g.i,[g.j,l.h])],null,function(n,e){n(e,1,0,l.Db(e,1,0,l.yb(e,2).transform("or")))})}function F(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,2,"div",[["class","slds-text-align_left"],["id","centralHeader"]],null,null,null,null,null)),(n()(),l.Cb(1,null,["",""])),l.zb(131072,g.i,[g.j,l.h])],null,function(n,e){n(e,1,0,l.Db(e,1,0,l.yb(e,2).transform("centralLoginInfo")))})}function W(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,3,"div",[["role","alert"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,2,"div",[["class","slds-text-color_error"],["id","requiredErrorMsg"]],null,null,null,null,null)),(n()(),l.Cb(2,null,["",""])),l.zb(131072,g.i,[g.j,l.h])],null,function(n,e){n(e,2,0,l.Db(e,2,0,l.yb(e,3).transform("usernameRequired")))})}function V(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,3,"div",[["role","alert"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,2,"div",[["class","slds-text-color_error"],["id","invalidErrorMsg"]],null,null,null,null,null)),(n()(),l.Cb(2,null,["",""])),l.zb(131072,g.i,[g.j,l.h])],null,function(n,e){n(e,2,0,l.Db(e,2,0,l.yb(e,3).transform("usernameIsNotValid")))})}function G(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,4,"div",[["class","slds-m-top_x-small"],["id","centralErrorMessage"]],null,null,null,null,null)),(n()(),l.gb(16777216,null,null,1,null,W)),l.ob(2,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,V)),l.ob(4,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,2,0,null==t.username.errors?null:t.username.errors.required),n(e,4,0,!(null!=t.username.errors&&t.username.errors.required)&&(null==t.username.errors?null:t.username.errors.forbiddenName))},null)}function Q(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,2,"div",[["class","slds-m-top_x-small"],["role","alert"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,1,"div",[["class","slds-text-color_error"],["id","errorMsgFromAPI"]],null,null,null,null,null)),(n()(),l.Cb(2,null,["",""]))],null,function(n,e){n(e,2,0,e.component.errorMessage.centralError)})}function $(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,55,"form",[["class","slds-col slds-grid slds-grid_vertical slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_2-of-3 slds-large-size_1-of-3 slds-p-top_medium"],["id","loginForm"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,e,t){var r=!0;return"submit"===e&&(r=!1!==l.yb(n,2).onSubmit(t)&&r),"reset"===e&&(r=!1!==l.yb(n,2).onReset()&&r),r},null,null)),l.ob(1,16384,null,0,z.o,[],null,null),l.ob(2,540672,null,0,z.g,[[8,null],[8,null]],{form:[0,"form"]},null),l.Ab(2048,null,z.c,null,[z.g]),l.ob(4,16384,null,0,z.k,[[4,z.c]],null,null),(n()(),l.gb(16777216,null,null,1,null,F)),l.ob(6,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,G)),l.ob(8,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,Q)),l.ob(10,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.pb(11,0,null,null,11,"div",[["class","slds-form-element slds-p-top_medium"]],null,null,null,null,null)),(n()(),l.pb(12,0,null,null,2,"label",[["class","slds-form-element__label"],["id","usernameLabel"]],null,null,null,null,null)),(n()(),l.Cb(13,null,["",""])),l.zb(131072,g.i,[g.j,l.h]),(n()(),l.pb(15,0,null,null,7,"div",[["class","slds-form-element__control"]],null,null,null,null,null)),(n()(),l.pb(16,0,null,null,6,"input",[["class","slds-input"],["formControlName","username"],["id","username"],["type","text"]],[[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,t){var r=!0;return"input"===e&&(r=!1!==l.yb(n,17)._handleInput(t.target.value)&&r),"blur"===e&&(r=!1!==l.yb(n,17).onTouched()&&r),"compositionstart"===e&&(r=!1!==l.yb(n,17)._compositionStart()&&r),"compositionend"===e&&(r=!1!==l.yb(n,17)._compositionEnd(t.target.value)&&r),r},null,null)),l.ob(17,16384,null,0,z.d,[l.D,l.k,[2,z.a]],null,null),l.Ab(1024,null,z.h,function(n){return[n]},[z.d]),l.ob(19,671744,null,0,z.f,[[3,z.c],[8,null],[8,null],[6,z.h],[2,z.q]],{name:[0,"name"]},null),l.Ab(2048,null,z.i,null,[z.f]),l.ob(21,16384,null,0,z.j,[[4,z.i]],null,null),l.zb(131072,g.i,[g.j,l.h]),(n()(),l.pb(23,0,null,null,14,"div",[["class","slds-form-element slds-p-top_medium"]],null,null,null,null,null)),(n()(),l.pb(24,0,null,null,2,"label",[["class","slds-form-element__label"],["id","passwordLabel"]],null,null,null,null,null)),(n()(),l.Cb(25,null,["",""])),l.zb(131072,g.i,[g.j,l.h]),(n()(),l.pb(27,0,null,null,10,"div",[["class","slds-form-element__control slds-input-has-icon slds-input-has-icon_right"]],null,null,null,null,null)),(n()(),l.pb(28,0,null,null,6,"input",[["class","slds-input"],["formControlName","password"],["id","password"]],[[8,"type",0],[8,"placeholder",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,e,t){var r=!0,o=n.component;return"input"===e&&(r=!1!==l.yb(n,29)._handleInput(t.target.value)&&r),"blur"===e&&(r=!1!==l.yb(n,29).onTouched()&&r),"compositionstart"===e&&(r=!1!==l.yb(n,29)._compositionStart()&&r),"compositionend"===e&&(r=!1!==l.yb(n,29)._compositionEnd(t.target.value)&&r),"keyup"===e&&(r=!1!==o.onPasswordChange(t)&&r),r},null,null)),l.ob(29,16384,null,0,z.d,[l.D,l.k,[2,z.a]],null,null),l.Ab(1024,null,z.h,function(n){return[n]},[z.d]),l.ob(31,671744,null,0,z.f,[[3,z.c],[8,null],[8,null],[6,z.h],[2,z.q]],{name:[0,"name"]},null),l.Ab(2048,null,z.i,null,[z.f]),l.ob(33,16384,null,0,z.j,[[4,z.i]],null,null),l.zb(131072,g.i,[g.j,l.h]),(n()(),l.pb(35,0,null,null,2,"button",[["class","slds-button slds-button_icon slds-input__icon slds-input__icon_right"],["id","previewIcon"]],null,[[null,"mouseup"],[null,"keyup"]],function(n,e,t){var l=!0,r=n.component;return"mouseup"===e&&(l=!1!==r.togglePassword(t)&&l),"keyup"===e&&(l=!1!==r.togglePassword(t)&&l),l},null,null)),(n()(),l.pb(36,0,null,null,1,":svg:svg",[["aria-hidden","true"],["class","slds-button__icon slds-icon-text-light"]],null,null,null,null,null)),(n()(),l.pb(37,0,null,null,0,":svg:use",[[":xmlns:xlink","http://www.w3.org/1999/xlink"]],[[1,":xlink:href",0]],null,null,null,null)),(n()(),l.pb(38,0,null,null,13,"div",[["class","slds-form-element slds-p-top_medium"]],null,null,null,null,null)),(n()(),l.pb(39,0,null,null,12,"div",[["class","slds-form-element__control"]],null,null,null,null,null)),(n()(),l.pb(40,0,null,null,11,"div",[["class","slds-checkbox"]],null,null,null,null,null)),(n()(),l.pb(41,0,null,null,5,"input",[["formControlName","rememberMe"],["id","rememberMe"],["name","rememberMe"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],function(n,e,t){var r=!0;return"change"===e&&(r=!1!==l.yb(n,42).onChange(t.target.checked)&&r),"blur"===e&&(r=!1!==l.yb(n,42).onTouched()&&r),r},null,null)),l.ob(42,16384,null,0,z.b,[l.D,l.k],null,null),l.Ab(1024,null,z.h,function(n){return[n]},[z.b]),l.ob(44,671744,null,0,z.f,[[3,z.c],[8,null],[8,null],[6,z.h],[2,z.q]],{name:[0,"name"]},null),l.Ab(2048,null,z.i,null,[z.f]),l.ob(46,16384,null,0,z.j,[[4,z.i]],null,null),(n()(),l.pb(47,0,null,null,4,"label",[["class","slds-checkbox__label"],["for","rememberMe"]],null,null,null,null,null)),(n()(),l.pb(48,0,null,null,0,"span",[["class","slds-checkbox_faux"]],null,null,null,null,null)),(n()(),l.pb(49,0,null,null,2,"span",[["class","slds-form-element__label"],["id","rememberMeLabel"]],null,null,null,null,null)),(n()(),l.Cb(50,null,["",""])),l.zb(131072,g.i,[g.j,l.h]),(n()(),l.pb(52,0,null,null,3,"div",[["class","slds-p-top_medium slds-p-bottom_medium"]],null,null,null,null,null)),(n()(),l.pb(53,0,null,null,2,"button",[["class","slds-button slds-button_brand slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"],["id","signInButton"]],[[8,"disabled",0]],[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.authenticateAgent()&&l),l},null,null)),(n()(),l.Cb(54,null,["",""])),l.zb(131072,g.i,[g.j,l.h])],function(n,e){var t=e.component;n(e,2,0,t.loginForm),n(e,6,0,t.isExternalAuthenticationEnabled),n(e,8,0,t.username.invalid&&t.username.touched),n(e,10,0,null==t.errorMessage?null:t.errorMessage.centralError),n(e,19,0,"username"),n(e,31,0,"password"),n(e,44,0,"rememberMe")},function(n,e){var t=e.component;n(e,0,0,l.yb(e,4).ngClassUntouched,l.yb(e,4).ngClassTouched,l.yb(e,4).ngClassPristine,l.yb(e,4).ngClassDirty,l.yb(e,4).ngClassValid,l.yb(e,4).ngClassInvalid,l.yb(e,4).ngClassPending),n(e,13,0,l.Db(e,13,0,l.yb(e,14).transform("username"))),n(e,16,0,l.rb(1,"",l.Db(e,16,0,l.yb(e,22).transform("username")),""),l.yb(e,21).ngClassUntouched,l.yb(e,21).ngClassTouched,l.yb(e,21).ngClassPristine,l.yb(e,21).ngClassDirty,l.yb(e,21).ngClassValid,l.yb(e,21).ngClassInvalid,l.yb(e,21).ngClassPending),n(e,25,0,l.Db(e,25,0,l.yb(e,26).transform("password"))),n(e,28,0,t.canShowPwd?"text":"password",l.rb(1,"",l.Db(e,28,1,l.yb(e,34).transform("password")),""),l.yb(e,33).ngClassUntouched,l.yb(e,33).ngClassTouched,l.yb(e,33).ngClassPristine,l.yb(e,33).ngClassDirty,l.yb(e,33).ngClassValid,l.yb(e,33).ngClassInvalid,l.yb(e,33).ngClassPending),n(e,37,0,l.rb(1,"/_slds/icons/utility-sprite/svg/symbols.svg#",t.pwdIcon,"")),n(e,41,0,l.yb(e,46).ngClassUntouched,l.yb(e,46).ngClassTouched,l.yb(e,46).ngClassPristine,l.yb(e,46).ngClassDirty,l.yb(e,46).ngClassValid,l.yb(e,46).ngClassInvalid,l.yb(e,46).ngClassPending),n(e,50,0,l.Db(e,50,0,l.yb(e,51).transform("rememberMe"))),n(e,53,0,t.disableBtn),n(e,54,0,l.Db(e,54,0,l.yb(e,55).transform("signIn")))})}function K(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,3,"div",[["class","slds-col slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_2-of-3 slds-large-size_1-of-3 slds-p-top_medium slds-border_top slds-text-align_center"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,2,"a",[["class","slds-button"],["id","forgotPassword"],["role","button"]],null,[[null,"click"]],function(n,e,t){var l=!0;return"click"===e&&(l=!1!==n.component.recoverPassword()&&l),l},null,null)),(n()(),l.Cb(2,null,["","?"])),l.zb(131072,g.i,[g.j,l.h])],null,function(n,e){n(e,2,0,l.Db(e,2,0,l.yb(e,3).transform("forgotPwd")))})}function X(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,13,"div",[["class","login-form slds-box slds-grid slds-grid_vertical slds-grid_vertical-align-center slds-size-full"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,2,"div",[["class","slds-col slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_2-of-3 slds-large-size_1-of-3 slds-p-bottom_medium slds-border_bottom slds-text-heading_small"],["id","signInLabel"]],null,null,null,null,null)),(n()(),l.Cb(2,null,["",""])),l.zb(131072,g.i,[g.j,l.h]),(n()(),l.gb(16777216,null,null,1,null,H)),l.ob(5,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,J)),l.ob(7,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,$)),l.ob(9,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,K)),l.ob(11,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.pb(12,0,null,null,1,"div",[["class","slds-col_bump-top slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_2-of-3 slds-large-size_1-of-3"]],null,null,null,null,null)),(n()(),l.pb(13,0,null,null,0,"img",[["class","slds-float_right"]],[[8,"src",4]],null,null,null,null))],function(n,e){var t=e.component;n(e,5,0,t.isExternalAuthenticationEnabled),n(e,7,0,t.isExternalAuthenticationEnabled&&t.isCentralAuthenticationEnabled),n(e,9,0,t.isCentralAuthenticationEnabled),n(e,11,0,t.isForgotPassword)},function(n,e){var t=e.component;n(e,2,0,l.Db(e,2,0,l.yb(e,3).transform("signIn"))),n(e,13,0,l.rb(1,"",t.initParam.resourceBase,"/assets/images/branding-logo.svg"))})}function Z(n){return l.Eb(0,[(n()(),l.gb(16777216,null,null,1,null,R)),l.ob(1,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,q)),l.ob(3,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null),(n()(),l.gb(16777216,null,null,1,null,X)),l.ob(5,16384,null,0,T.h,[l.O,l.L],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,1,0,t.errorMessage.authSettingsError||t.errorMessage.refreshTokenError),n(e,3,0,t.canShowSpinner),n(e,5,0,t.isExternalAuthenticationEnabled||t.isCentralAuthenticationEnabled)},null)}function Y(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,1,"auth-login",[],null,null,null,Z,D)),l.ob(1,114688,null,0,M,["AuthenticationService",f,z.e,p,m,y,N,b],null,null)],function(n,e){n(e,1,0)},null)}var nn=l.lb("auth-login",M,Y,{},{},[]),en=function(){function n(n){this.logger=n}return n.prototype.getAccessToken=function(e,t,l,r,o,s){var i=this;return this.logger.log(n.className,"Token Url"),new Promise(function(u,a){var c=U.init();sforce.apex.execute(c.openCtiService,"authenticate",{authUrl:encodeURIComponent(e),isUserHub:t,authCode:encodeURIComponent(l),idpType:r,busNo:o,redirectUri:encodeURIComponent(s)},function(e){try{var t=JSON.parse(e);if(200===t.statusCode){i.logger.debug(n.className,"authenticate response : "+t.data);var l=new d;l.parseData(JSON.parse(t.data)),u(l)}else i.logger.debug(n.className,"authenticate<<error: "+e),a(t.statusText||t.error)}catch(r){i.logger.error(n.className,"authenticate<<exception : "+JSON.stringify(r)),a(r)}})})},n.className="SalesforceAuthCallbackService",n.ngInjectableDef=l.S({factory:function(){return new n(l.W(y))},token:n,providedIn:"root"}),n}(),tn=function(){function n(n,e,t,l,r,o,s,i){this.authCallbackSvc=n,this.accessTokenSvc=e,this.localStorageSvc=t,this.sessionStorageSvc=l,this.logger=r,this.urlUtilSvc=o,this.validationUtilSvc=s,this.httpClient=i,this.authParams=window.location.search}return n.prototype.ngOnInit=function(){this.logger.log(n.className,"Authcallback Component initialize");var e=this.localStorageSvc.get("authConfig");this.validationUtilSvc.isNotNullOrUndefined(e)&&(this.authSettings=JSON.parse(e),this.authSettings.isUserHub?this.authenticateUserHub():this.validationUtilSvc.isNotNullOrUndefined(this.authSettings.centralMyDomain)&&this.getAccessTokenForOpenIdp())},n.prototype.getAccessTokenForOpenIdp=function(){var e=this;this.logger.debug(n.className,"get the open id authenticate code ");var t=this.sessionStorageSvc.get("authIdp");if(this.validationUtilSvc.isNotNullOrUndefined(t)){this.openIDConfig=JSON.parse(t),this.logger.log(n.className,"get access token");var l=this.urlUtilSvc.getParameterByName(this.authParams,"code"),r=this.urlUtilSvc.getParameterByName(this.authParams,"error"),o=this.urlUtilSvc.getParameterByName(this.authParams,"error_description");if(this.validationUtilSvc.isNotNullOrEmpty(r)||this.validationUtilSvc.isNotNullOrEmpty(o))return this.logger.error(n.className,"onSSOLoginPageRedirect - Error information error: "+r+" error_description:"+o),this.sessionStorageSvc.set("authErr",o||r),void this.redirectToAuthenticate();if(this.validationUtilSvc.isNotNullOrEmpty(l)){this.logger.debug(n.className,"authCallback - authCode received from openidProvider");var s=U.init();this.authCallbackSvc.getAccessToken(this.openIDConfig.icAuthorizationUrl,this.authSettings.isUserHub,l,"OpenID Connect",this.openIDConfig.busNo,s.authCallbackUrl).then(function(n){e.accessTokenSvc.setAccessToken(n),e.redirectToAgent()},function(t){e.logger.error(n.className,"Error on getAccessToken - "+JSON.stringify(t)),e.sessionStorageSvc.set("authErr",JSON.stringify(t)),e.redirectToAuthenticate()})}}},n.prototype.redirectToAuthenticate=function(){var n=this.sessionStorageSvc.get("qrystr");this.sessionStorageSvc.remove("qrystr"),window.location.href=window.location.origin+"/apex/authenticate2"+n},n.prototype.redirectToAgent=function(){var e=this.sessionStorageSvc.get("qrystr");this.logger.debug(n.className,"queryString - "+e),this.sessionStorageSvc.remove("qrystr");var t=this.urlUtilSvc.getParameterByName(e,"redirectURL");window.location.href=t},n.prototype.authenticateUserHub=function(){var e=this;this.logger.log(n.className,"authenticateUserHub");var t=this.urlUtilSvc.getParameterByName(this.authParams,"authCode");this.validationUtilSvc.isNotNullOrUndefined(t)&&(this.logger.debug(n.className,"authenticateUserHub - authCode received"),this.authCallbackSvc.getAccessToken(this.authSettings.userHubLoginBaseUrl+"/public/user/token",this.authSettings.isUserHub,t,"","","").then(function(n){e.accessTokenSvc.setAccessToken(n),e.redirectToAgent()},function(t){e.logger.error(n.className,"Error in getUserHubAccessToken..."+JSON.stringify(t)),e.userHubLogout()}))},n.prototype.userHubLogout=function(){var e=this,t=new x.g({"Content-Type":"application/json; charset=UTF-8"});this.httpClient.post(this.authSettings.userHubLoginBaseUrl+"/public/user/logout",null,{headers:t,withCredentials:!0}).toPromise().then(function(t){e.logger.debug(n.className,"UserHub Logout success: "+t.success)},function(t){return e.logger.error(n.className,"UserHub logout failed : "+t.message)}).finally(function(){return e.redirectToAuthenticate()})},n.className="AuthcallbackComponent",n}(),ln=l.nb({encapsulation:0,styles:[[""]],data:{}});function rn(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,4,"div",[["class","slds-spinner_container"]],null,null,null,null,null)),(n()(),l.pb(1,0,null,null,3,"div",[["class","slds-align_absolute-center"]],null,null,null,null,null)),(n()(),l.pb(2,0,null,null,2,"div",[["class","slds-spinner slds-spinner_medium slds-spinner_brand"],["role","status"]],null,null,null,null,null)),(n()(),l.pb(3,0,null,null,0,"div",[["class","slds-spinner__dot-a"]],null,null,null,null,null)),(n()(),l.pb(4,0,null,null,0,"div",[["class","slds-spinner__dot-b"]],null,null,null,null,null))],null,null)}function on(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,1,"auth-callback",[],null,null,null,rn,ln)),l.ob(1,114688,null,0,tn,[en,f,p,m,y,N,b,x.c],null,null)],function(n,e){n(e,1,0)},null)}var sn=l.lb("auth-callback",tn,on,{},{},[]),un=t("nkbN"),an=l.nb({encapsulation:0,styles:[[".hr-sep[_ngcontent-%COMP%]{margin:10px 0}.btn-full_width[_ngcontent-%COMP%]{width:calc(100%)}"]],data:{}});function cn(n){return l.Eb(0,[(n()(),l.pb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),l.ob(1,212992,null,0,un.m,[un.b,l.O,l.j,[8,null],l.h],null,null)],function(n,e){n(e,1,0)},null)}function gn(n){return l.Eb(0,[(n()(),l.pb(0,0,null,null,1,"auth-root",[],null,null,null,cn,an)),l.ob(1,49152,null,0,P,[C],null,null)],null,null)}var dn=l.lb("auth-root",P,gn,{},{},[]),hn=t("0QWT"),pn=function(){return function(){}}(),bn=l.mb(A,[P],function(n){return l.wb([l.xb(512,l.j,l.bb,[[8,[E.a,nn,sn,dn]],[3,l.j],l.x]),l.xb(5120,l.u,l.kb,[[3,l.u]]),l.xb(4608,T.j,T.i,[l.u,[2,T.q]]),l.xb(4608,x.j,x.p,[T.c,l.B,x.n]),l.xb(4608,x.q,x.q,[x.j,x.o]),l.xb(5120,x.a,function(n){return[n]},[x.q]),l.xb(4608,x.m,x.m,[]),l.xb(6144,x.k,null,[x.m]),l.xb(4608,x.i,x.i,[x.k]),l.xb(6144,x.b,null,[x.i]),l.xb(4608,x.f,x.l,[x.b,l.q]),l.xb(4608,x.c,x.c,[x.f]),l.xb(4608,i.e,i.e,[x.c]),l.xb(4608,i.d,i.d,[i.e,i.b,l.B]),l.xb(4608,i.a,i.a,[i.e,l.B]),l.xb(5120,l.c,l.hb,[]),l.xb(5120,l.s,l.ib,[]),l.xb(5120,l.t,l.jb,[]),l.xb(4608,hn.b,hn.k,[T.c]),l.xb(6144,l.G,null,[hn.b]),l.xb(4608,hn.e,hn.g,[]),l.xb(5120,hn.c,function(n,e,t,l,r,o,s,i){return[new hn.i(n,e,t),new hn.n(l),new hn.m(r,o,s,i)]},[T.c,l.z,l.B,T.c,T.c,hn.e,l.cb,[2,hn.f]]),l.xb(4608,hn.d,hn.d,[hn.c,l.z]),l.xb(135680,hn.l,hn.l,[T.c]),l.xb(4608,hn.j,hn.j,[hn.d,hn.l,l.c]),l.xb(6144,l.E,null,[hn.j]),l.xb(6144,hn.o,null,[hn.l]),l.xb(4608,l.M,l.M,[l.z]),l.xb(4608,z.e,z.e,[]),l.xb(4608,z.p,z.p,[]),l.xb(5120,un.a,un.x,[un.k]),l.xb(4608,un.d,un.d,[]),l.xb(6144,un.f,null,[un.d]),l.xb(135680,un.n,un.n,[un.k,l.w,l.i,l.q,un.f]),l.xb(4608,un.e,un.e,[]),l.xb(5120,un.B,un.t,[un.k,T.m,un.g]),l.xb(5120,un.h,un.A,[un.y]),l.xb(5120,l.b,function(n){return[n]},[un.h]),l.xb(5120,g.f,O,[x.c]),l.xb(4608,g.c,g.e,[]),l.xb(4608,g.h,g.d,[]),l.xb(4608,g.b,g.a,[]),l.xb(4608,g.k,g.k,[]),l.xb(4608,g.j,g.j,[g.k,g.f,g.c,g.h,g.b,g.l,g.m]),l.xb(4608,"AuthenticationService",k,[x.c,b,y]),l.xb(1073742336,T.b,T.b,[]),l.xb(1073742336,x.e,x.e,[]),l.xb(1073742336,x.d,x.d,[]),l.xb(1073742336,i.c,i.c,[]),l.xb(1024,l.l,hn.p,[]),l.xb(1024,l.y,function(){return[un.s()]},[]),l.xb(512,un.y,un.y,[l.q]),l.xb(1024,l.d,function(n,e){return[hn.q(n),un.z(e)]},[[2,l.y],un.y]),l.xb(512,l.e,l.e,[[2,l.d]]),l.xb(131584,l.g,l.g,[l.z,l.cb,l.q,l.l,l.j,l.e]),l.xb(1073742336,l.f,l.f,[l.g]),l.xb(1073742336,hn.a,hn.a,[[3,hn.a]]),l.xb(1073742336,z.n,z.n,[]),l.xb(1073742336,z.l,z.l,[]),l.xb(1024,un.r,un.v,[[3,un.k]]),l.xb(512,un.p,un.c,[]),l.xb(512,un.b,un.b,[]),l.xb(256,un.g,{},[]),l.xb(1024,T.g,un.u,[T.l,[2,T.a],un.g]),l.xb(512,T.f,T.f,[T.g]),l.xb(512,l.i,l.i,[]),l.xb(512,l.w,l.J,[l.i,[2,l.K]]),l.xb(1024,un.i,function(){return[[{path:"apex/authenticate2",component:M},{path:"apex/icagentconsole__authcallback",component:tn}]]},[]),l.xb(1024,un.k,un.w,[l.g,un.p,un.b,T.f,l.q,l.w,l.i,un.i,un.g,[2,un.o],[2,un.j]]),l.xb(1073742336,un.l,un.l,[[2,un.r],[2,un.k]]),l.xb(1073742336,pn,pn,[]),l.xb(1073742336,g.g,g.g,[]),l.xb(1073742336,A,A,[]),l.xb(256,x.n,"XSRF-TOKEN",[]),l.xb(256,x.o,"X-XSRF-TOKEN",[]),l.xb(256,i.b,{level:1},[]),l.xb(256,l.ab,!0,[]),l.xb(256,g.m,void 0,[]),l.xb(256,g.l,void 0,[])])});Object(l.T)(),hn.h().bootstrapModuleFactory(bn).catch(function(n){return console.error(n)})},zn8P:function(n,e){function t(n){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id="zn8P"}},[[0,0,4]]]);