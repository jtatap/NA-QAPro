!function($){$.widget("AgentConsole.chatAcceptRejectPanel",$.AgentConsole.acceptRejectPanel,{options:{controller:null,resourceBase:""},timerId:0,_init:function(){document.getElementById("renderTextSize")||$('<div id="renderTextSize"/>').addClass("renderTextSize").appendTo("Body")},_create:function(){this.contact=this.options.contact,this.resourceBase=this.options.resourceBase,this.root=this.createRootPanel(),this.aniDNSPayloadPanel.hide(),this.skillNamePanel.hide(),this.root.appendTo(this.element),this.postCreate()},postCreate:function(){this.mediaTypeImgPnlL.attr("src",this.resourceBase+"/css/images/chatIcn.png"),this.timeOutPanel.css("display","block"),this.acceptBtn.on("click",$.proxy(this.acceptBtnClick,this)),this.rejectBtn.on("click",$.proxy(this.rejectBtnClick,this)),this.startTimer(this.contact),this.messageHeader.text(IC_Localization.chatContactWaiting).attr("title",IC_Localization.chatContactWaiting),this.messageHeader.css({"word-break":"normal",font:"bold 10px verdana"})},acceptBtnClick:function(){this.options.controller.acceptContact(this.contact.id),this.destroy()},rejectBtnClick:function(){this.options.controller.rejectContact(this.contact.id),this.destroy()},textMask:function(objName,text,limit){$("#renderTextSize").text(text),$("#renderTextSize").width()>limit?(objName.attr("title",objName.text()),objName.addClass("textEllipsis")):(objName.attr("title",""),objName.removeClass("textEllipsis")),objName.css("width",limit+"px"),$("#renderTextSize").text("")},startTimer:function(contact){var that=this;this.acceptRejectDuration=0,this.acceptRejectDuration>=0&&(this.timerId=setInterval(function(){that.updateTimer(that.timeOutPanel)},1e3))},timeDiff:function(time){var ms=Math.abs(this.options.controller.getServerTimestamp()-time);return(ms=this.contact.refusalTimeout-Math.round(ms/1e3))<0&&(ms=0),ms},updateTimer:function(timerPnlObj){var calculatedTime=0;this.acceptRejectDuration=this.timeDiff(this.contact.time),this.contactTimerVal=this.acceptRejectDuration,this.contactTimerVal<345600?(this.contactTimerVal=this.contactTimerVal+1,this.acceptRejectDuration=this.contactTimerVal,calculatedTime=IC_Common.secondsToTime(this.contactTimerVal)):calculatedTime=">96 "+IC_Localization.hours,timerPnlObj.text(calculatedTime)},onDestroy:function(){clearInterval(this.timerId),this.acceptRejectDuration=0}})}(jQuery);