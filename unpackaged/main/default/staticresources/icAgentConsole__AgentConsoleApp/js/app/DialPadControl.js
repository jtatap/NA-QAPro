!function($){$.widget("AgentConsole.dialPad",{options:{container:null,resourceBase:""},_init:function(){document.getElementById("renderTextSize")||$('<div id="renderTextSize"/>').addClass("renderTextSize").appendTo("Body")},pcContactData:null,isVMCallBack:!1,_create:function(){var elementId,inputTxt,rootPanel,contentPanel,that=this,parent=this.element;for(var prop in void 0===this.dialElements&&(this.dialElements={ascii_49:{number:"1",alpha:""},ascii_50:{number:"2",alpha:IC_Localization.abc},ascii_51:{number:"3",alpha:IC_Localization.def},ascii_52:{number:"4",alpha:IC_Localization.ghi},ascii_53:{number:"5",alpha:IC_Localization.jkl},ascii_54:{number:"6",alpha:IC_Localization.mno},ascii_55:{number:"7",alpha:IC_Localization.pqrs},ascii_56:{number:"8",alpha:IC_Localization.tuv},ascii_57:{number:"9",alpha:IC_Localization.wxyz},ascii_42:{number:"*",alpha:""},ascii_48:{number:"0",alpha:""},ascii_35:{number:"#",alpha:""}}),parent.addClass("dialPadPanel"),$('<span class="dialogHidden">'+IC_Localization.begin+" "+IC_Localization.dialPad+"</span>").appendTo(parent),rootPanel=$('<div class="modalDialogBackground"/>').appendTo(parent),this.headerPanel=$('<div class="modalDialogHeader" tabindex="-1" aria-label="'+IC_Localization.dialPad+'"/>').appendTo(rootPanel),$('<div class="modalDialogHeaderText textEllipsis"/>').text(IC_Localization.phone).appendTo(this.headerPanel),this.closeBtn=$('<div role="button" aria-label = "'+IC_Localization.close+'" tabindex = "0"/>').attr("title",IC_Localization.close).appendTo(this.headerPanel),this.closeBtnIcon=$("<img/>").addClass("closeBtnIcon").attr("src",this.options.resourceBase+"/css/images/section-close.png").appendTo(this.closeBtn),this.closeBtn.on("click",$.proxy(this.keyPadClose,this)),IC_Common.enterKeyPress(this.closeBtn,function(){that.keyPadClose()}),IC_Common.setFocusToCloseIcon(this.closeBtn,this.closeBtnIcon,"closeBtnFocus","closeBtnIconFocus"),contentPanel=$("<div/>").appendTo(rootPanel),this.inputTxtDiv=$("<div/>").addClass("inputTxtDiv").appendTo(contentPanel),this.pnumberDiv=$("<div/>").addClass("pnumberDiv").appendTo(this.inputTxtDiv),this.pnumberTxt=$('<input type="text" id = "pnumberTxtId" title="'+IC_Localization.phoneNumber+'">').addClass("pnumberTxt").appendTo(this.pnumberDiv),this.pnumberTxt.trigger("focus"),this.dialDiv=$('<div id = "dialDivId"/>').on("click",$.proxy(this.dialPhoneNo,this)).addClass("btnBrRound5 dialDiv btnDivDisable").appendTo(this.pnumberDiv),this.dialDiv.attr({title:IC_Localization.dial}),this.dialDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.dialIcn=$('<img src="'+this.options.resourceBase+'/css/images/phone-disable.png" />').addClass("dialIcn").appendTo(this.dialDiv),this.dialPanel=$("<div/>").addClass("dialPanel").appendTo(contentPanel),this.backSpaceFullDiv=$("<div/>").addClass("backSpaceDiv").appendTo(contentPanel),this.bSpaceDiv=$('<div id = "bSpaceDivId"/>').on("click",$.proxy(this.backSpace,this)).addClass("btnBrRound5 bSpaceDiv btnDivDisable").appendTo(this.backSpaceFullDiv),this.bSpaceDiv.attr({title:IC_Localization.backSpace}),this.bSpaceDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.bSpaceIcn=$('<img src="'+this.options.resourceBase+'/css/images/keypad-backspace-disable.png" />').addClass("bSpaceIcn").appendTo(this.bSpaceDiv),this.pnumberTxt.on("keypress",function(e){if(13===e.which)that.dialDiv.trigger("click");else{if(8!=e.which&&0!=e.which&&(e.which<48||e.which>57)&&42!=e.which&&35!=e.which&&43!=e.which&&!0!==e.ctrlKey&&!0!==e.metaKey&&(86!=e.which||118!=e.which))return!1;that.keyReleasedBGColor("ascii_"+e.which)}}),this.pnumberTxt.on("keyup",function(){that.setButtonEnablement()}),this.pnumberTxt.on("input paste",function(event){"input"==event.type&&(that.pnumberTxt.val($(this).val()),that.setButtonEnablement())}),this.dialElements)"*"==this.dialElements[prop].number?this.dialElement=$("<div/>").html("<div class='number1'>"+this.dialElements[prop].number+"</div>").addClass("dialElement dialElementBg").appendTo(this.dialPanel):"0"==this.dialElements[prop].number||"#"==this.dialElements[prop].number?this.dialElement=$("<div/>").html("<div class='number2'>"+this.dialElements[prop].number+"</div>").addClass("dialElement dialElementBg").appendTo(this.dialPanel):this.dialElement=$("<div/>").html("<div>"+this.dialElements[prop].number+"</div><div class='alpha textEllipsis' title='"+this.dialElements[prop].alpha+"'>"+this.dialElements[prop].alpha+"</div>").addClass("dialElement dialElementBg").appendTo(this.dialPanel),this.dialElement.attr({id:prop}),this.dialElement.hoverfn(function(){elementId=$(this).attr("id"),$("#"+elementId).removeClass("dialElement dialElementBg"),$("#"+elementId).addClass("dialElement dialElementHover")},function(){elementId=$(this).attr("id"),$("#"+elementId).removeClass("dialElement dialElementHover"),$("#"+elementId).addClass("dialElement dialElementBg")}),this.dialElement.on("click",function(){elementId=$(this).attr("id"),that.keyReleasedBGColor(elementId),that.selectNumber=elementId,inputTxt="",inputTxt=that.pnumberTxt.val()+that.dialElements[elementId].number,that.pnumberTxt.val(inputTxt),that.setButtonEnablement()});this.setButtonEnablement(),$('<span class="dialogHidden">'+IC_Localization.end+" "+IC_Localization.dialPad+"</span>").appendTo(parent)},keyReleasedBGColor:function(elementId){$("#"+elementId).addClass("dialElementSelected"),setTimeout(function(){$("#"+elementId).removeClass("dialElementSelected"),$("#"+elementId).addClass("dialElementBg")},250)},setFocusOnNumberPnl:function(){this.pnumberTxt.trigger("focus"),this.setButtonEnablement()},textMask:function(objName,text,limit){$("#renderTextSize").text(text),$("#renderTextSize").width()>limit?(objName.attr("title",objName.text()),objName.addClass("textEllipsis")):(objName.attr("title",""),objName.removeClass("textEllipsis")),objName.css("width",limit+"px"),$("#renderTextSize").text("")},dialPhoneNo:function(event){var x,y,pnumberTxt=$.trim(this.pnumberTxt.val().replace(/[`~!@$%^&()_|\-=?;:'",.<>\{\}\[\]\\\/\s]/gi,""));if(pnumberTxt.length>0){if(IC_Validation.isValidObject(this.pcContactData))return void(!0===this.pcContactData.isAutoCorrect?(pnumberTxt!==this.pcContactData.dnis&&this.pnumberTxt.val(this.pcContactData.dnis),this.options.container.dialPCContact(this.pcContactData.dnis,this.pcContactData.dnis,this.pcContactData.id)):this.options.container.dialPCContact(pnumberTxt,this.pcContactData.dnis,this.pcContactData.id));x=event.clientX||this.dialDiv.offset().left,y=event.clientY||this.dialDiv.offset().top+this.dialDiv.height(),this.options.container.ValidatePhoneNumber(pnumberTxt),this.options.container.dialPhoneNumber(pnumberTxt,x,y)}},keyPadClose:function(){var that=this;this.pnumberTxt.val(""),this.setButtonEnablement(),this.isVMCallBack=!1,this.options.container.closeDialPad(function(){that.element.removeClass("modalDialogPanelVMMin"),that.dialPanel.children(".dialElement").removeClass("dialElementMin"),that.bSpaceDiv.removeClass("bSpaceDivMin").addClass("bSpaceDiv")}),IC_Common.removeFocusFromCloseIcon(this.closeBtnIcon,"closeBtnIconFocus")},backSpace:function(){if(IC_Common.isButtonEnabled(this.bSpaceDiv)){var fieldInput=$.trim(this.pnumberTxt.val());this.pnumberTxt.val(fieldInput.slice(0,-1)),this.setButtonEnablement()}},setButtonEnablement:function(){$.trim(this.pnumberTxt.val()).length>0?(IC_Common.enableButton(this.dialDiv,this.dialIcn,this.options.resourceBase+"/css/images/keypad-dial.png"),IC_Common.enableButton(this.bSpaceDiv,this.bSpaceIcn,this.options.resourceBase+"/css/images/keypad-backspace.png")):(IC_Common.disableButton(this.dialDiv,this.dialIcn,this.options.resourceBase+"/css/images/phone-disable.png"),IC_Common.disableButton(this.bSpaceDiv,this.bSpaceIcn,this.options.resourceBase+"/css/images/keypad-backspace-disable.png"))},setDialPhoneNo:function(phoneNumber){IC_Validation.isNullOrEmpty(phoneNumber)?(this.pnumberTxt.val(""),this.setButtonEnablement()):$.trim(phoneNumber).length>0&&(this.pnumberTxt.val(phoneNumber),this.setButtonEnablement(),this.isVMCallBack||this.dialDiv.trigger("click"))},showMaxDialPadcss:function(){this.element.removeClass("min-top1").removeClass("min-top2")},updatePanelHeight:function(isDialerPanel,isShowIndicator){},miniDialPadCss:function(min,contact){if(min){var isAutoCorrect="TenDigitDial"!==contact.deliveryType;if(this.pcContactData=contact,this.pcContactData.isAutoCorrect=isAutoCorrect,this.element.addClass("min-top1"),IC_Validation.isNotNullOrUndefinedString(contact.otherInfo)){var otherInfo;otherInfo=IC_Common.getFormatOtherInfo(contact.otherInfo),IC_Validation.isNotNullOrUndefinedString(otherInfo)&&otherInfo.valueOne.length>0&&0==otherInfo.valueTwo.length&&!IC_Validation.isNotNullOrUndefinedString(otherInfo.valueTwo[1])&&this.element.addClass("min-top2")}this.element.addClass("modalDialogPanelMin"),this.dialPanel.children(".dialElement").addClass("dialElementMin"),this.bSpaceDiv.removeClass("bSpaceDiv").addClass("bSpaceDivMin"),this.closeBtn.hide()}else this.isVMCallBack=!1,this.pcContactData=null,this.element.removeClass("modalDialogPanelMin"),this.element.removeClass("modalDialogPanelVMMin"),this.dialPanel.children(".dialElement").removeClass("dialElementMin"),this.bSpaceDiv.removeClass("bSpaceDivMin").addClass("bSpaceDiv"),this.closeBtn.showfn()},dialPadVM:function(data){this.element.addClass("modalDialogPanelVMMin"),this.dialPanel.children(".dialElement").addClass("dialElementMin"),this.bSpaceDiv.removeClass("bSpaceDiv").addClass("bSpaceDivMin"),this.closeBtn.showfn(),this.isVMCallBack=!0},setFocusToDialPadHeader:function(){this.headerPanel.trigger("focus")}})}(jQuery);