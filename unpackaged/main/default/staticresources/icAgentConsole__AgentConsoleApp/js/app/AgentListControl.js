!function($){$.widget("AgentConsole.agentList",{options:{container:null,onDataChange:null,resourceBase:""},_create:function(){var searchPanel,filterPanel,that=this;this.options.container.isPopout?(this.gridScrollHeight=267,this.rowLimit=15):(this.gridScrollHeight=250,this.rowLimit=3),this.DefaultSearchText=IC_Localization.search+" ...",this.agentList=[],this.filter={},this.teamList=[],this.skillList=[],this.unavailableCodeListMap={},this.lastSelectedSkillItem={},this.lastSelectedTeamItem={},this.skillAgents={},this.element.addClass("agentList"),$('<span class="dialogHidden">'+IC_Localization.begin+" "+IC_Localization.agents+"</span>").appendTo(this.element),this.infoPnlOnTransfer=$("<div/>").addClass("infoTransfer textEllipsis").text(IC_Localization.toTransferSelectAnAgentOrSkill).attr("title",IC_Localization.toTransferSelectAnAgentOrSkill).appendTo(this.element),this.agentListPanel=$("<div/>").addClass("modalDialogBackground").appendTo(this.element),this.headerPanel=$('<div id="agentList_Header" tabindex="-1" aria-labelledby="agentList_HeaderText"/>').addClass("modalDialogHeader").appendTo(this.agentListPanel),$('<div id="agentList_HeaderText"/>').addClass("modalDialogHeaderText textEllipsis").text(IC_Localization.agents).appendTo(this.headerPanel),this.closeBtn=$('<div id="agentList_CloseIcon" role="button" aria-label = "'+IC_Localization.close+'" tabindex = "0"/>').on("click",$.proxy(this.onClose,this)).attr("title",IC_Localization.close).appendTo(this.headerPanel),this.closeBtnIcon=$("<img/>").addClass("closeBtnIcon").attr("src",this.options.resourceBase+"/css/images/section-close.png").appendTo(this.closeBtn),IC_Common.enterKeyPress(this.closeBtn,function(){that.onClose()}),IC_Common.setFocusToCloseIcon(this.closeBtn,this.closeBtnIcon,"closeBtnFocus","closeBtnIconFocus"),this.contentPanel=$('<div class="agnetListContentPnl"/>').appendTo(this.agentListPanel),this.searchAndFilterPanel=$('<div id="searchAndFilterPanel_Id"/>').addClass("searchAndFilterPanel").appendTo(this.contentPanel),searchPanel=$('<div id="searchPanelId"/>').addClass("searchPanel").appendTo(this.searchAndFilterPanel),filterPanel=$('<div id="filterPanelId"/>').addClass("filterPanel").appendTo(this.searchAndFilterPanel),this.searchBtn=$('<div id="searchBtnId"/>').addClass("searchBtn").appendTo(searchPanel),$('<div id="searchBtnIconId"/>').addClass("searchBtnIcon").appendTo(this.searchBtn).attr("title",IC_Localization.search),this.searchBtn.on("click",$.proxy(this.showSearchTextBox,this)),this.stateSelectionBtn=$('<div id="agentStateSelectedId"/>').addClass("stateSelectionBtn").appendTo(searchPanel),$('<div id="agentStateSelectedIconId"/>').addClass("stateSelectionBtnIcon").appendTo(this.stateSelectionBtn).attr("title",IC_Localization.filter),this.stateSelectionBtn.on("click",$.proxy(this.showStateFilter,this)),this.searchText=$("<div/>").addClass("searchText").appendTo(searchPanel),this.searchTextInput=$('<input type="text" id="searchTextInputId" title = "'+IC_Localization.search+" "+IC_Localization.agents+'">').addClass("searchTextInput defaultSearchText").appendTo(this.searchText),this.searchTextInput.val(this.DefaultSearchText),this.searchTextInput.trigger("focus"),this.searchTextInput.on("keyup",$.proxy(this.onFilterChange,this)),this.searchTextInput.on("focus",$.proxy(this.onSearchTextClick,this)),this.searchTextInput.on("click",$.proxy(this.onSearchTextClick,this)),this.searchTextInput.on("blur",$.proxy(this.onSearchTextBlur,this)),this.searchText.css("display","none"),this.stateFilterCombo=$("<div/>").addClass("stateFilterCombo").appendTo(searchPanel),this.stateFilterCombo.comboBox({onDataChange:$.proxy(this.onFilterChange,this),resourceBase:this.options.resourceBase}),this.populateAgentStateFilter(),this.stateFilterCombo.css("display","none"),this.skillFilterBtn=$('<div id="skillFilterId"/>').addClass("skillFilter").appendTo(filterPanel),$('<div id="skillFilterIconId"/>').addClass("skillFilterIcon").appendTo(this.skillFilterBtn).attr("title",IC_Localization.skill),this.skillFilterBtn.on("click",$.proxy(this.showSkillFilter,this)),this.teamFilterBtn=$('<div id="teamFilterId"/>').addClass("teamFilter").appendTo(filterPanel),$('<div id="teamFilterIconId"/>').addClass("teamFilterIcon").appendTo(this.teamFilterBtn).attr("title",IC_Localization.team),this.teamFilterBtn.on("click",$.proxy(this.showTeamFilter,this)),this.filterCombo=$("<div/>").addClass("filterCombo").appendTo(filterPanel),this.filterCombo.comboBox({onDataChange:$.proxy(this.onFilterChange,this),resourceBase:this.options.resourceBase}),this.showSearchTextBox(),this.options.container.isPopout?(this.stateColWidth=100,this.fNameColWidth=135,this.lNameColWidth=135):(this.stateColWidth=52,this.fNameColWidth=63,this.lNameColWidth=64),this.setGridColumn(),this.stateSelectionBtn.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.skillFilterBtn.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.gridId=IC_Common.generateUniqueId("agentList"),this.agentListGrid=$('<div id="'+this.gridId+'"></div>').addClass("agentListGrid").appendTo(this.contentPanel),this.createAgentListGrid(),$('<span class="dialogHidden">'+IC_Localization.end+" "+IC_Localization.agents+"</span>").appendTo(this.element)},_init:function(){this.agentSkillMap={},this.agentList=[],this.filter={},this.teamList=[],this.skillList=[],this.unavailableCodeListMap={},this.lastSelectedSkillItem={},this.lastSelectedTeamItem={},this.sortGrid={},this.skillAgents={}},setGridColumn:function(){var that=this,stateColWidth=this.stateColWidth,fNameColWidth=this.fNameColWidth,lNameColWidth=this.lNameColWidth,stateTextWidth=stateColWidth-13,fNameTextWidth=fNameColWidth-17,lNameTextWidth=lNameColWidth-14,hideStateInfo=this.hideAgentPresence?"hideLine1":"line1";fNameColWidth=this.hideAgentPresence&&!this.options.container.isPopout?fNameColWidth+25:fNameColWidth,lNameColWidth=this.hideAgentPresence&&!this.options.container.isPopout?lNameColWidth+25:lNameColWidth,fNameColWidth=this.hideAgentPresence&&this.options.container.isPopout?this.totGridWidth/2:fNameColWidth,lNameColWidth=this.hideAgentPresence&&this.options.container.isPopout?this.totGridWidth/2:lNameColWidth,this.colModel=[{id:"StateInfo",field:"StateInfo",name:IC_Common.textMask(IC_Localization.state,stateTextWidth),width:stateColWidth,sortable:!0,resizable:!1,headerCssClass:this.hideAgentPresence?"hideStateCol":"decorationHeader",cssClass:"alignLeft decoration",toolTip:IC_Localization.state,formatter:function(row,col,value,columnDef,data){var infoDiv=$('<div class="infoCol"/>'),infoLine1Div=$('<div class= "'+hideStateInfo+'" id="line1AgentStateId"/>').appendTo(infoDiv),infoLine2Div=$('<div class="line2" id="line2AgentNameId"/>').appendTo(infoDiv),stateDOM=null,duration="",stateDOMId=IC_Common.generateUniqueId("agentListRowState"),agentName=(data=data||that.gridData[row]).FirstName,agentStateName="";return that.tableRow[row].StateInfo.StateDOMId=stateDOMId,stateDOM=$('<div id="'+stateDOMId+'"></div>').addClass("gridItem").appendTo(infoLine1Div),IC_Validation.isNotNullOrEmpty(data.StateInfo.CssState)&&stateDOM.addClass(data.StateInfo.CssState),"0"!==data.StateInfo.StateId?(duration=IC_Common.secondsToTime(parseInt(data.StateInfo.Duration)),agentStateName=IC_Validation.isNotNullOrUndefinedString($.trim(data.OutStateDescription))?data.OutStateDescription:data.AgentStateName,$('<div id = "agentStateId_AgentList"></div>').addClass("gridItem").addClass("agentStateName textEllipsis").text(agentStateName).attr("title",agentStateName).appendTo(infoLine1Div),$('<div id="agentStateDurationID"></div>').addClass("gridItem").addClass("stateDuration").text(duration).attr("title",duration).appendTo(infoLine1Div)):$("<div></div>").text("("+IC_Localization.loggedOut+")").appendTo(infoLine1Div),IC_Validation.isNotNullOrUndefinedString($.trim(data.LastName))&&(agentName="LastName"===that.sortGrid.sortCol?data.LastName+", "+data.FirstName:data.FirstName+", "+data.LastName),IC_Common.setTextWithEllipsis(infoLine2Div,agentName,140),infoLine2Div.attr("title",agentName),infoDiv.html()}},{id:"FirstName",field:"FirstName",name:IC_Common.textMask(IC_Localization.first,fNameTextWidth),width:fNameColWidth,sortable:!0,resizable:!1,cssClass:"alignLeft decoration",toolTip:IC_Localization.first},{id:"LastName",field:"LastName",name:IC_Common.textMask(IC_Localization.last,lNameTextWidth),width:lNameColWidth,sortable:!0,resizable:!1,headerCssClass:this.headerCss,cssClass:"alignLeft decoration",toolTip:IC_Localization.last}]},gridSorter:function(a,b){var x,y,sortDir=1;return"StateInfo"===this.sortGrid.sortCol?(x=a[this.sortGrid.sortCol].StateSortId)==(y=b[this.sortGrid.sortCol].StateSortId)&&(x=a[this.sortGrid.sortCol].Duration,y=b[this.sortGrid.sortCol].Duration):(x=a[this.sortGrid.sortCol].toLowerCase(),y=b[this.sortGrid.sortCol].toLowerCase()),void 0!==this.sortGrid.sortDir&&null!==this.sortGrid.sortDir&&(sortDir=this.sortGrid.sortDir),sortDir*(x==y?0:x>y?1:-1)},createAgentListGrid:function(){var that=this;this.dataView=new Slick.Data.DataView,this.dataView.getItemMetadata=function(row){return{columns:{StateInfo:{colspan:3}}}},this.grid=new Slick.Grid("#"+this.gridId,this.dataView,this.colModel,{rowHeight:45,enableColumnReorder:!1}),this.dataView.onRowCountChanged.subscribe(function(e,args){that.grid.updateRowCount(),that.grid.render()}),this.dataView.onRowsChanged.subscribe(function(e,args){that.grid.invalidateRows(args.rows),that.grid.render()}),this.grid.onCellChange.subscribe(function(e,args){that.dataView.updateItem(args.item.id,args.item),that.grid.render()}),this.grid.onSort.subscribe(function(e,args){that.sortGrid.sortDir=args.sortAsc?1:-1,that.sortGrid.sortCol=args.sortCol.field,that.tableRow.sort($.proxy(that.gridSorter,that)),that.dataView.beginUpdate(),that.dataView.setItems(that.tableRow),that.dataView.endUpdate()}),this.grid.onMouseLeave.subscribe($.proxy(this.onGridRowMouseLeave,this)),this.grid.onMouseEnter.subscribe($.proxy(this.onGridRowMouseEnter,this)),this.grid.onClick.subscribe($.proxy(this.onGridRowClick,this)),this.columnBorderDiv=$('<div style="height: '+this.gridScrollHeight+'px"></div>').addClass("columnBorderDiv"),$(".agentList .slick-viewport").append(this.columnBorderDiv),$(".agentList .slick-viewport").css("height",this.gridScrollHeight+"px")},populateAgentStateFilter:function(){var store=[{id:"0",value:IC_Localization.loggedIn,condition:"notequals"},{id:"1",value:IC_Localization.available,condition:"equals"},{id:"2",value:IC_Localization.unavailable,condition:"equals"},{id:"",value:IC_Localization.allAgents}];this.stateFilterCombo.comboBox("setStore",store)},onSearchTextClick:function(){this.searchTextInput.val()==this.DefaultSearchText&&(this.searchTextInput.val(""),this.searchTextInput.removeClass("defaultSearchText"))},onSearchTextBlur:function(){""==this.searchTextInput.val()&&(this.searchTextInput.val(this.DefaultSearchText),this.searchTextInput.addClass("defaultSearchText"))},onFilterChange:function(){var filter={};filter.searchText=this.searchTextInput.val()!==this.DefaultSearchText?this.searchTextInput.val():"",filter.stateFilterValue=this.stateFilterCombo.comboBox("getSelectedItem"),IC_Common.isButtonSelected(this.skillFilterBtn)?filter.filterType="skill":filter.filterType="team",filter.filterValue=this.filterCombo.comboBox("getSelectedItem").id,this.filter=filter,this.updateGrid()},onGridRowMouseEnter:function(e,args){var cell=args.grid.getCellFromEvent(e),agent=this.tableRow[cell.row],stateInfo=agent.StateInfo,contactType=(agent.FirstName,this.options.container.contactType);"EmailContactEvent"===contactType||"VoiceMailContactEvent"===contactType||"ChatContactEvent"===contactType?"0"!==stateInfo.StateId&&1!=this.options.container.isChatContactTransferClicked&&1!=this.options.container.isEmailContactTransferClicked&&1!=this.options.container.isVoiceMailTransferClicked&&($(e.currentTarget.parentNode).addClass("gridRowDisabled"),$("#"+stateInfo.StateDOMId).addClass("phone-disabled-hover")):"WorkItemContactEvent"===contactType?"state-available"!=agent.StateInfo.CssState&&"state-unavailable"!=agent.StateInfo.CssState&&"0"!==stateInfo.StateId&&1!=this.options.container.isWorkItemTransferClicked&&($(e.currentTarget.parentNode).addClass("gridRowDisabled"),$("#"+stateInfo.StateDOMId).addClass("phone-disabled-hover")):("Available"===this.options.container.agentInfo.cState.state||"Unavailable"===this.options.container.agentInfo.cState.state)&&this.phoneIconDisable(stateInfo.StateSortId)?($(e.currentTarget.parentNode).addClass("gridRowDisabled"),$("#"+stateInfo.StateDOMId).addClass("phone-disabled-hover")):IC_Validation.isNotNullOrEmpty(stateInfo.CssState)&&$("#"+stateInfo.StateDOMId).addClass(stateInfo.CssState+"-hover")},onGridRowMouseLeave:function(e,args){var cell=args.grid.getCellFromEvent(e),stateInfo=this.tableRow[cell.row].StateInfo;IC_Validation.isNotNullOrEmpty(stateInfo.CssState)&&($("#"+stateInfo.StateDOMId).removeClass(stateInfo.CssState+"-hover"),$("#"+stateInfo.StateDOMId).removeClass("phone-disabled-hover")),$(e.currentTarget.parentNode).removeClass("gridRowDisabled")},onGridRowClick:function(e,args){var cell=args.grid.getCellFromEvent(e),agent=this.tableRow[cell.row],contactType=this.options.container.contactType;if("EmailContactEvent"===contactType||"VoiceMailContactEvent"===contactType||"ChatContactEvent"===contactType){if(1!=this.options.container.isChatContactTransferClicked&&1!=this.options.container.isEmailContactTransferClicked&&1!=this.options.container.isVoiceMailTransferClicked)return!1}else if("WorkItemContactEvent"===contactType&&"state-available"!=agent.StateInfo.CssState&&"state-unavailable"!=agent.StateInfo.CssState&&1!=this.options.container.isWorkItemTransferClicked)return!1;"0"!==agent.StateInfo.StateId&&this.options.container.onAgentSelected(agent.AgentId)},phoneIconDisable:function(stateSortId){return 2===stateSortId||4===stateSortId||5===stateSortId||6===stateSortId||7===stateSortId||8===stateSortId},calcStateTime:function(seconds){return parseInt((.001*(new Date).getTime()).toFixed(0))-seconds},isMatchFound:function(agent){var agentName=agent.fn+" "+agent.ln,matchFound=!0,stateFilterValue=this.filter.stateFilterValue;return IC_Common.isButtonSelected(this.stateSelectionBtn)?IC_Validation.isValidObject(stateFilterValue)&&IC_Validation.isNotNullOrEmpty(stateFilterValue.id)&&(matchFound="notequals"===stateFilterValue.condition?agent.stateId!=stateFilterValue.id:agent.stateId==stateFilterValue.id):IC_Validation.isNotNullOrEmpty(this.filter.searchText)&&this.filter.searchText!==this.DefaultSearchText&&(matchFound=-1!==agentName.toLowerCase().indexOf(this.filter.searchText.toLowerCase())),matchFound},updateGrid:function(callAPI){var i=0,agentList=[],that=this;if(IC_Validation.isNotNullOrEmpty(this.filter.filterValue))if(IC_Common.isButtonSelected(this.skillFilterBtn))if(!IC_Validation.isNotNullOrEmpty(this.skillAgents[this.filter.filterValue])||callAPI)AgentConsoleDataStore.pollAgentsCache=!1,this.options.container.getSkillAgents(this.filter.filterValue,function(skillAgentList){if(that.skillAgents[that.filter.filterValue]={},skillAgentList.length>0)for(i=0;i<that.agentList.length;i++)-1!=skillAgentList.indexOf(that.agentList[i].id.toString())&&(agentList.push(that.agentList[i]),that.skillAgents[that.filter.filterValue][that.agentList[i].id]=1);that.updateGridAgents(agentList),AgentConsoleDataStore.pollAgentsCache=!0});else{for(i=0;i<this.agentList.length;i++)1==this.skillAgents[this.filter.filterValue][this.agentList[i].id]&&agentList.push(this.agentList[i]);this.updateGridAgents(agentList)}else{for(i=0;i<this.agentList.length;i++)this.agentList[i].teamId==this.filter.filterValue&&agentList.push(this.agentList[i]);this.updateGridAgents(agentList)}else agentList=this.agentList,this.updateGridAgents(agentList)},updateGridAgents:function(agentList){var agent,len=agentList.length,lastUpdateTime=0;for(delete this.tableRow,this.tableRow=[],i=0;i<len;i++)!0===IC_Common.toBoolean(agentList[i].ia)&&this.isMatchFound(agentList[i])&&(lastUpdateTime=new Date(agentList[i].utime),agent={id:i,AgentId:agentList[i].id,StateInfo:{StateId:agentList[i].stateId,CssState:"",Duration:IC_Common.timeDiff(this.options.container.getServerTimestamp(),lastUpdateTime)},FirstName:$.trim(agentList[i].fn),LastName:$.trim(agentList[i].ln),UserName:agentList[i].un,OutStateCode:agentList[i].osc,OutStateDescription:agentList[i].osd,AgentStateName:agentList[i].asn},"1"===agentList[i].stateId?(agent.StateInfo.CssState="state-available",agent.StateInfo.StateSortId=1):"2"===agentList[i].stateId?!0===IC_Common.toBoolean(agentList[i].acw)?(agent.StateInfo.CssState="state-acw",agent.StateInfo.StateSortId=2):(agent.StateInfo.CssState="state-unavailable",agent.StateInfo.StateSortId=3):"3"===agentList[i].stateId?(agent.StateInfo.CssState="state-inbound",agent.StateInfo.StateSortId=4):"4"===agentList[i].stateId?(agent.StateInfo.CssState="state-outbound",agent.StateInfo.StateSortId=5):"5"===agentList[i].stateId?(agent.StateInfo.CssState="state-inbound",agent.StateInfo.StateSortId=6):"6"===agentList[i].stateId?(agent.StateInfo.CssState="state-outbound",agent.StateInfo.StateSortId=7):"7"===agentList[i].stateId?(agent.StateInfo.StateSortId=8,!0===IC_Common.toBoolean(agentList[i].acw)?agent.StateInfo.CssState="state-acw":agent.StateInfo.CssState="state-dialer"):(agent.StateInfo.CssState="",agent.StateInfo.StateSortId=9),this.tableRow.push(agent));if(this.tableRow.length>this.rowLimit)if(this.headerCss="",this.options.container.isPopout){var divWidth=(this.totGridWidth-this.stateColWidth)/2;this.fNameColWidth=divWidth,this.lNameColWidth=divWidth,IC_Validation.isValidObject(this.columnBorderDiv)&&this.columnBorderDiv.hide()}else this.stateColWidth=52,this.fNameColWidth=63,this.lNameColWidth=62;else{if(this.headerCss="headerDecorationTopRight",this.options.container.isPopout){divWidth=(this.totGridWidth-this.stateColWidth)/2;this.fNameColWidth=divWidth,this.lNameColWidth=divWidth,IC_Validation.isValidObject(this.columnBorderDiv)&&this.columnBorderDiv.showfn(),$(".agentConsolePopout .agentList .columnBorderDiv .border2").css({width:divWidth-1+"px"})}else this.stateColWidth=52,this.fNameColWidth=63,this.lNameColWidth=62;$(".agentList .grid-canvas").css({height:this.gridScrollHeight+"px"})}IC_Validation.isNotNullOrEmpty(this.fNameColWidth)&&IC_Validation.isNumber(this.fNameColWidth)||(this.stateColWidth=100,this.fNameColWidth=135,this.lNameColWidth=135),this.setGridColumn(),document.getElementById(this.gridId)&&(IC_Validation.isNotNullOrUndefinedString(this.sortGrid.sortDir)||(this.sortGrid.sortCol="FirstName",this.grid.setSortColumn(this.sortGrid.sortCol,!0)),this.tableRow.sort($.proxy(this.gridSorter,this)),this.options.container.isPopout?this.gridHeight=this.gridHeight||292:this.gridHeight=this.gridHeight||275,this.agentListGrid.css("height",this.gridHeight+"px"),this.columnBorderDiv.css("height",this.gridScrollHeight+"px"),this.dataView.beginUpdate(),this.dataView.setItems(this.tableRow),this.dataView.endUpdate(),this.grid.setColumns(this.colModel),this.grid.invalidate(),this.grid.render()),$(".agentList .slick-viewport").css("height",this.gridScrollHeight+"px")},showSearchTextBox:function(){IC_Common.selectButton(this.searchBtn),this.searchBtn.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),IC_Common.unselectButton(this.stateSelectionBtn),this.stateFilterCombo.css("display","none"),this.searchText.css("display","block"),this.onFilterChange()},showStateFilter:function(){IC_Common.selectButton(this.stateSelectionBtn),this.stateSelectionBtn.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),IC_Common.unselectButton(this.searchBtn),this.searchText.css("display","none"),this.stateFilterCombo.comboBox("setSelectedItem",{id:"0",value:IC_Localization.loggedIn,condition:"notequals"}),this.stateFilterCombo.css("display","block"),this.onFilterChange()},showSkillFilter:function(){IC_Common.isButtonSelected(this.teamFilterBtn)&&(this.lastSelectedTeamItem=this.filterCombo.comboBox("getSelectedItem")),IC_Common.selectButton(this.skillFilterBtn),this.skillFilterBtn.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),IC_Common.unselectButton(this.teamFilterBtn),this.teamFilterBtn.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.filterCombo.comboBox("setStore",this.skillList),this.filterCombo.comboBox("setSelectedItem",{id:this.lastSelectedSkillItem.id,value:!1!==IC_Validation.isNotNullOrEmpty(this.lastSelectedSkillItem.value)?this.lastSelectedSkillItem.value:IC_Localization.allSkills}),this.onFilterChange()},showTeamFilter:function(){IC_Common.isButtonSelected(this.skillFilterBtn)&&(this.lastSelectedSkillItem=this.filterCombo.comboBox("getSelectedItem")),IC_Common.selectButton(this.teamFilterBtn),this.teamFilterBtn.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),IC_Common.unselectButton(this.skillFilterBtn),this.filterCombo.comboBox("setStore",this.teamList),this.filterCombo.comboBox("setSelectedItem",{id:this.lastSelectedTeamItem.id,value:!1!==IC_Validation.isNotNullOrEmpty(this.lastSelectedTeamItem.value)?this.lastSelectedTeamItem.value:IC_Localization.allTeams}),this.onFilterChange()},updateTeamList:function(teamList){var len=teamList.length,i=0;for(this.teamList=[],i=0;i<len;i++)this.teamList.push({id:teamList[i].id,value:$.trim(teamList[i].name)});this.teamList.sort(function(a,b){var x=a.value.toLowerCase(),y=b.value.toLowerCase();return 1*(x==y?0:x>y?1:-1)}),this.teamList.splice(0,0,{id:"",value:IC_Localization.allTeams})},updateSkillList:function(skillListMap){for(var skillId in this.skillList=[],skillListMap)skillListMap.hasOwnProperty(skillId)&&this.skillList.push({id:skillListMap[skillId].id,value:$.trim(skillListMap[skillId].name)});this.skillList.sort(function(a,b){var x=a.value.toLowerCase(),y=b.value.toLowerCase();return 1*(x==y?0:x>y?1:-1)}),this.skillList.splice(0,0,{id:"",value:IC_Localization.allSkills})},updateMetaData:function(type,list){"teams"===type?this.updateTeamList(list):"skills"===type&&this.updateSkillList(list),IC_Common.isButtonSelected(this.skillFilterBtn)?this.showSkillFilter():this.showTeamFilter()},updatePermissionsList:function(type,data){this.hideAgentPresence=!1;var that=this;IC_Validation.isNotNullOrEmptyArray(data)&&$.grep(data,function(event){"hideagentpresence"===event.Key&&(that.hideAgentPresence=!0)}),this.hideAgentPresence?this.grid.setOptions({rowHeight:25}):this.grid.setOptions({rowHeight:45})},updateData:function(agentListMap,loggedInAgentId){if(IC_Validation.isNotNullOrEmpty(this.agentList)&&IC_Validation.isNotNullOrUndefinedString(loggedInAgentId)){for(var agentId in this.agentList=[],agentListMap)agentListMap.hasOwnProperty(agentId)&&loggedInAgentId!==agentId&&this.agentList.push(agentListMap[agentId]);this.updateGrid()}},updateCSSOnWorkItemTransfer:function(remainingHeight,paddingValue){var modalDialogHeight;this.rowLimit=5,modalDialogHeight=this.actualModalDialogHeight-paddingValue,this.gridHeight=this.actualGridHeight-(paddingValue+this.infoPnlHeight),this.contentPanel.css("height",this.gridHeight+"px"),this.gridScrollHeight=this.gridHeight-(this.actualGridHeight-this.actualScrollHeight),this.agentListGrid.css("height",this.gridHeight+"px"),this.grid.resizeCanvas(),this.infoPnlOnTransfer.css("display","block"),this.agentListPanel.css("height",modalDialogHeight+"px"),this.columnBorderDiv.css("height",this.gridScrollHeight+"px"),this.updateGrid()},resetCSSToOriginal:function(){this.rowLimit=11;this.gridHeight=this.actualGridHeight,this.gridScrollHeight=this.actualScrollHeight,this.agentListPanel.css("height","100%"),this.contentPanel.css("height",this.gridHeight+"px"),this.agentListGrid.css("height",this.gridHeight+"px"),this.grid.resizeCanvas(),this.infoPnlOnTransfer.css("display","none"),this.columnBorderDiv.css("height",this.gridScrollHeight+"px"),$(".agentList .slick-viewport").css("height",this.gridScrollHeight+"px")},updatePanelHeight:function(height){this.infoPnlHeight=25,this.adjustFor=7;var filterPnlHt=this.searchAndFilterPanel.outerHeight(!0);this.gridHeight=height-(filterPnlHt+this.adjustFor),this.actualGridHeight=height-(filterPnlHt+this.adjustFor),this.actualModalDialogHeight=height,this.actualScrollHeight=height-(filterPnlHt+this.adjustFor+25),this.gridScrollHeight=this.actualScrollHeight,this.contentPanel.css("height",this.gridHeight+"px")},resizeWidget:function(width,height,callAPI){var totGridWidth,divWidth;IC_Validation.isNotNullOrEmpty(width)||(width=408),IC_Validation.isNotNullOrEmpty(height)||(height=392),this.gridHeight=height-105,this.gridScrollHeight=this.gridHeight-25,this.contentPanel.css("height",this.gridHeight+"px"),this.rowLimit=Math.round(this.gridScrollHeight/19),totGridWidth=this.agentListGrid.width(),this.totGridWidth=totGridWidth,divWidth=(totGridWidth-this.stateColWidth)/2,this.fNameColWidth=divWidth,this.lNameColWidth=divWidth,$(".agentConsolePopout .agentList .columnBorderDiv").css({width:totGridWidth+"px"}),$(".agentConsolePopout .agentList .columnBorderDiv .border2").css({width:divWidth-1+"px"}),this.updateGrid(callAPI)},onClose:function(){this.options.container.closeAgentListAndShowHome(),IC_Common.removeFocusFromCloseIcon(this.closeBtnIcon,"closeBtnIconFocus")},destroy:function(){},setFocusToAgentListHeader:function(){this.headerPanel.trigger("focus")}})}(jQuery);