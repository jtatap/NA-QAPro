!function($){$.widget("AgentConsole.userSetting",{options:{container:null,agentInfo:null,resourceBase:""},passwordChanged:!1,defaultPassword:"********",password:"",isEvolve:!1,_create:function(){var userSettingPanel,agentInfoPanel,logLevelPanel,btnPanel,logoutBtnPanel,feedbackSubmitBtn,that=this;this.logLevels=[{id:"ALL",value:IC_Localization.all},{id:"TRACE",value:IC_Localization.trace},{id:"DEBUG",value:IC_Localization.debug},{id:"INFO",value:IC_Localization.info},{id:"WARN",value:IC_Localization.warn},{id:"ERROR",value:IC_Localization.error},{id:"FATAL",value:IC_Localization.fatal},{id:"OFF",value:IC_Localization.off}],$('<span class="dialogHidden">'+IC_Localization.begin+" "+IC_Localization.options+"</span>").appendTo(this.element),userSettingPanel=$("<div/>").appendTo(this.element),this.headerPanel=$('<div class="header" id = "optionHeaderId" tabindex="-1" aria-labelledby="optionHeaderTxtId"/>').appendTo(userSettingPanel),$('<div class="optionIcon" />').appendTo(this.headerPanel),$('<div class="label textEllipsis" id="optionHeaderTxtId">'+IC_Localization.options+"</div>").appendTo(this.headerPanel),this.closeBtn=$('<div id = "closeIconId" role="button" aria-label = "'+IC_Localization.close+'" tabindex = "0"/>').attr("title",IC_Localization.close).on("click",$.proxy(this.onClose,this)).appendTo(this.headerPanel),this.closeBtnIcon=$("<img/>").addClass("optionCloseIcon").attr("src",this.options.resourceBase+"/css/images/arrow-down-white.png").appendTo(this.closeBtn),IC_Common.enterKeyPress(this.closeBtn,function(){that.onClose()}),IC_Common.setFocusToCloseIcon(this.closeBtn,this.closeBtnIcon,"closeBtnFocus","closeBtnIconFocus"),this.helpBtn=$('<div class="optionHelpIcon" id = "helpBtnId" title="'+IC_Localization.help+'" />').on("click",$.proxy(this.onHelp,this)).appendTo(this.headerPanel),$('<div class="hrLine"/>').appendTo(userSettingPanel),this.contentPanel=$('<div class="contentPanel" />').appendTo(userSettingPanel),this.errorPanel=$('<div id="errorPanelId" class="errorPanel"/>').appendTo(this.contentPanel),this.errorPanel.hide(),agentInfoPanel=$("<div/>").appendTo(this.contentPanel),stationPhoneIDPanel=$('<div class="stationPhoneIDPanel">').appendTo(agentInfoPanel),this.phoneDiv=$('<div class="radionBtnPnl">').appendTo(stationPhoneIDPanel),this.phoneNoRbtn=$('<input type="radio" name="radioID" value = "Phone" id = "phoneId" title="'+IC_Localization.phoneNumber+'"/>').css({float:"left"}).prop("checked",!0).appendTo(this.phoneDiv),this.phoneNoLbl=$("<div> </div>").text(IC_Localization.phoneNumber).css({"padding-top":"3px"}).appendTo(this.phoneDiv),this.stationDiv=$('<div class="radionBtnPnl">').appendTo(stationPhoneIDPanel),this.stationRbtn=$('<input type="radio" name="radioID" value = "Station" id = "stationId" title="'+IC_Localization.stationID+'"/>').css({float:"left"}).appendTo(this.stationDiv),this.stationIDLbl=$("<div> </div>").text(IC_Localization.stationID).css({"padding-top":"3px"}).appendTo(this.stationDiv),this.softPhoneDiv=$('<div class="radionBtnPnl" style="display: none" />').appendTo(stationPhoneIDPanel),this.softPhoneRbtn=$('<input type="radio" name="radioID" value = "'+IC_Util.SoftPhone+'" id = "softPhoneId" title="'+IC_Localization.integratedSoftphone+'"/>').css({float:"left"}).appendTo(this.softPhoneDiv),this.softPhoneIDLbl=$("<div> </div>").text(IC_Localization.integratedSoftphone).css({"padding-top":"3px"}).appendTo(this.softPhoneDiv),this.selectedPanel=$('<div class="userInfoHeader">').appendTo(stationPhoneIDPanel),this.selectedTextLabel=$('<div class="userLabel textEllipsis" ></div>').appendTo(this.selectedPanel),this.selectedIDLbl=$('<div class="userValue"> </div>').appendTo(this.selectedPanel),this.selectedIDText=$('<input type="text" class="userText" id = "agentPhoneId"/>').attr("title",IC_Localization.inContactAgentPhone).appendTo(this.selectedPanel),$("input[name=radioID]").on("change",$.proxy(this.stationPhoneIDChange,this)),this.enableTooltip=$('<div class="tooltipLabelDiv">').appendTo(agentInfoPanel),this.enableTooltipChkbox=$('<input type="checkbox" name="tooltipChkbox" value = "tooltip" id = "tooltipChkboxId" title="'+IC_Localization.enableTooltips+'"/>').css({float:"left"}).prop("checked",this.options.container.options.isTooltipEnabled).appendTo(this.enableTooltip),this.enableTooltipLbl=$('<div class="textEllipsis" title="'+IC_Localization.enableTooltips+'"> </div>').text(IC_Localization.enableTooltips).css({"padding-top":"2px"}).appendTo(this.enableTooltip),this.feedbackPanel=$('<div class="userInfoHeader">').css("height","55px").appendTo(agentInfoPanel),$('<div class="userLabel textEllipsis" title="'+IC_Localization.submitFeedback+'">'+IC_Localization.submitFeedback+":</div>").css("height","22px").appendTo(this.feedbackPanel),feedbackSubmitBtn=$('<div class="btnDivEnable btnStyle" id = "feedbackBtnId"></div>').appendTo(this.feedbackPanel),$('<div class="feedbackFormLabel textEllipsis" title="'+IC_Localization.form+'">'+IC_Localization.form+"</div>").appendTo(feedbackSubmitBtn),$('<div class="feedbackArrowImg" />').appendTo(feedbackSubmitBtn),feedbackSubmitBtn.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),feedbackSubmitBtn.on("click",$.proxy(this.onFeedbackClick,this)),logLevelPanel=$('<div class="userInfoHeader logLevel">').appendTo(agentInfoPanel),$('<div class="userLabel textEllipsis" title="'+IC_Localization.logLevel+'">'+IC_Localization.logLevel+":</div>").appendTo(logLevelPanel),this.logLevelLbl=$('<div class="userValue">'+this.getLocalizedLoglevel(IC_Util.LogLevel)+"</div>").appendTo(logLevelPanel),this.logLevelCombo=$('<div id="logComboId"/>').addClass("logCombo").appendTo(logLevelPanel),this.logLevelCombo.comboBox({resourceBase:this.options.resourceBase}),this.logLevelCombo.comboBox("setStore",this.logLevels),this.logLevelCombo.comboBox("setSelectedItem",{id:IC_Util.LogLevel,value:this.getLocalizedLoglevel(IC_Util.LogLevel)}),btnPanel=$('<div class="userInfoHeader">').appendTo(agentInfoPanel),this.divSubmit=$('<div class="btnDivEnable btnLogout textEllipsis" id = "submitBtnId" title="'+IC_Localization.edit+'">'+IC_Localization.edit+"</div>").appendTo(btnPanel),this.divSubmit.on("click",$.proxy(this.onSettingToggle,this)),this.divSubmit.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.divCancel=$('<div class="btnDivEnable btnLogout textEllipsis" id = "cancelBtnId" title="'+IC_Localization.cancel+'">'+IC_Localization.cancel+"</div>").css({display:"none"}).appendTo(btnPanel),this.divCancel.on("click",$.proxy(this.onSettingCancel,this)),this.divCancel.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.createSoftPhoneVolumeControls(agentInfoPanel),logoutBtnPanel=$('<div class="userInfoHeader"/>').appendTo(agentInfoPanel),this.logoutBtnDiv=$('<div class="btnDivEnable btnLogout textEllipsis" id = "logoutBtnId" title="'+IC_Localization.logout+'">'+IC_Localization.logout+"</div>").appendTo(logoutBtnPanel),"Logged out"===this.options.agentInfo.cState.state?(this.logoutBtnDiv.hide(),this.feedbackPanel.hide()):(this.logoutBtnDiv.showfn(),this.feedbackPanel.showfn()),this.logoutBtnDiv.on("click",$.proxy(this.onLogoutClick,this)),this.logoutBtnDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.downloadBtnDiv=$('<div class="btnDivEnable btnStyle btnDownload textEllipsis" id = "downloadBtnId" title="'+IC_Localization.downloadLog+'">'+IC_Localization.downloadLog+"</div>").appendTo(logoutBtnPanel),this.downloadBtnDiv.on("click",$.proxy(this.onDownloadClick,this)),this.downloadBtnDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.options.container.options.agentAudioSettings&&(this.audioSettings=this.options.container.options.agentAudioSettings),this.options.container.options.agentVisualSettings&&(this.visualSettings=this.options.container.options.agentVisualSettings),this.settingsDiv=$('<div class="settingsHeader"> </div>').appendTo(this.contentPanel),this.audioSettingsDiv=$('<div><span class="userLabel textEllipsis">Audio</span> </div>').appendTo(this.settingsDiv),this.agentMsgAudio=$('<div class="settingsLabelDiv">').appendTo(this.audioSettingsDiv),this.agentMsgAudioChkbox=$('<input type="checkbox" class="avSettingsChkBox" disabled name="aAgentMsgChkbox" value = "agentMsg" id = "agentMsgChkboxId" title="'+IC_Localization.newAgentMessage+'"/>').prop("checked",this.audioSettings&&this.audioSettings.AgentMessages).appendTo(this.agentMsgAudio),this.agentMsgAudioLbl=$('<div class="textEllipsis avSettingsLbl" title="'+IC_Localization.newAgentMessage+'"> </div>').text(IC_Localization.newAgentMessage).appendTo(this.agentMsgAudio),this.contactAudio=$('<div class="settingsLabelDiv">').appendTo(this.audioSettingsDiv),this.contactAudioChkbox=$('<input type="checkbox" class="avSettingsChkBox" disabled name="aContactCheckbox" value = "contact" id = "vContactChkboxId" title="'+IC_Localization.newContacts+'"/>').prop("checked",this.audioSettings&&this.audioSettings.Contacts).appendTo(this.contactAudio),this.contactAudioLbl=$('<div class="textEllipsis avSettingsLbl" title="'+IC_Localization.newContacts+'"> </div>').text(IC_Localization.newContacts).appendTo(this.contactAudio),this.chatMsgAudio=$('<div class="settingsLabelDiv">').appendTo(this.audioSettingsDiv),this.chatMsgAudioChkbox=$('<input type="checkbox" class="avSettingsChkBox" disabled name="aChatMsgChkbox" value = "chatMsg" id = "chatMsgChkboxId" title="'+IC_Localization.newChatMessage+'"/>').prop("checked",this.audioSettings&&this.audioSettings.ChatMessages).appendTo(this.chatMsgAudio),this.chatMsgAudioLbl=$('<div class="textEllipsis avSettingsLbl" title="'+IC_Localization.newChatMessage+'"> </div>').text(IC_Localization.newChatMessage).appendTo(this.chatMsgAudio),this.endChatCallAudio=$('<div class="settingsLabelDiv">').appendTo(this.audioSettingsDiv),this.endChatCallAudioChkbox=$('<input type="checkbox" class="avSettingsChkBox" disabled name="aEndChatCallChkbox" value = "endChatCall" id = "endChatCallChkboxId" title="'+IC_Localization.endChatOrCall+'"/>').prop("checked",this.audioSettings&&this.audioSettings.EndChatOrCall).appendTo(this.endChatCallAudio),this.endChatCallAudioLbl=$('<div class="textEllipsis avSettingsLbl" title="'+IC_Localization.endChatOrCall+'"> </div>').text(IC_Localization.endChatOrCall).appendTo(this.endChatCallAudio),this.VisualsettingsDiv=$('<div ><span class="userLabel textEllipsis">Visual</span> </div>').appendTo(this.settingsDiv),this.agentMsgVisual=$('<div class="settingsLabelDiv">').appendTo(this.VisualsettingsDiv),this.agentMsgVisualChkbox=$('<input type="checkbox" class="avSettingsChkBox" disabled name="vAgentMsgChkbox" value = "agentMsg" id = "agentMsgChkboxId" title="'+IC_Localization.newAgentMessage+'"/>').prop("checked",this.visualSettings&&this.visualSettings.AgentMessages).appendTo(this.agentMsgVisual),this.agentMsgVisualLbl=$('<div class="textEllipsis avSettingsLbl" title="'+IC_Localization.newAgentMessage+'"> </div>').text(IC_Localization.newAgentMessage).appendTo(this.agentMsgVisual),this.contactVisual=$('<div class="settingsLabelDiv">').appendTo(this.VisualsettingsDiv),this.contactVisualChkbox=$('<input type="checkbox" class="avSettingsChkBox" disabled name="vContactCheckbox" value = "contact" id = "vContactChkboxId" title="'+IC_Localization.newContacts+'"/>').prop("checked",this.visualSettings&&this.visualSettings.Contacts).appendTo(this.contactVisual),this.contactVisualLbl=$('<div class="textEllipsis avSettingsLbl" title="'+IC_Localization.newContacts+'"> </div>').text(IC_Localization.newContacts).appendTo(this.contactVisual),this.chatMsgVisual=$('<div class="settingsLabelDiv">').appendTo(this.VisualsettingsDiv),this.chatMsgVisualChkbox=$('<input type="checkbox" class="avSettingsChkBox" disabled name="vChatMsgChkbox" value = "chatMsg" id = "chatMsgChkboxId" title="'+IC_Localization.newChatMessage+'"/>').prop("checked",this.visualSettings&&this.visualSettings.ChatMessages).appendTo(this.chatMsgVisual),this.chatMsgVisualLbl=$('<div class="textEllipsis avSettingsLbl" title="'+IC_Localization.newChatMessage+'"> </div>').text(IC_Localization.newChatMessage).appendTo(this.chatMsgVisual),this.endChatCallVisual=$('<div class="settingsLabelDiv">').appendTo(this.VisualsettingsDiv),this.endChatCallVisualChkbox=$('<input type="checkbox" class="avSettingsChkBox" disabled name="vEndChatCallChkbox" value = "endChatCall" id = "endChatCallChkboxId" title="'+IC_Localization.endChatOrCall+'"/>').prop("checked",this.visualSettings&&this.visualSettings.EndChatOrCall).appendTo(this.endChatCallVisual),this.endChatCallVisualLbl=$('<div class="textEllipsis avSettingsLbl" title="'+IC_Localization.endChatOrCall+'"> </div>').text(IC_Localization.endChatOrCall).appendTo(this.endChatCallVisual),$('<span class="dialogHidden">'+IC_Localization.end+" "+IC_Localization.options+"</span>").appendTo(this.element)},_init:function(){this.stationorPhoneNumber(),that=this,$(document).ready(function(){try{"complete"===document.readyState?that.renderCustomScrollBar(that.contentPanel):$(window).on("load",function(){that.renderCustomScrollBar(that.contentPanel)})}catch(err){}})},isWebRTCEnabled:function(isSoftPhone){!0===isSoftPhone?this.softPhoneDiv.showfn():this.softPhoneDiv.hide(),this.stationorPhoneNumber()},stationPhoneIDChange:function(){var selectedId=$("input[name=radioID]:radio:checked").val();this.selectedIDText.text(""),this.selectedPanel.showfn(),this.selectedIDText.showfn(),this.selectedPanel.showfn(),this.divVolumePanel.hide(),"Station"===selectedId?(this.selectedTextLabel.text(IC_Localization.inContactAgentStationID+":").attr("title",IC_Localization.inContactAgentStationID),this.selectedIDText.val(this.options.container.options.stationId).attr("title",IC_Localization.inContactAgentStationID)):"Phone"===selectedId?(agentPhone=this.options.container.options.phoneNo===IC_Util.WebRTC?"":this.options.container.options.phoneNo,this.selectedTextLabel.text(IC_Localization.inContactAgentPhone+":").attr("title",IC_Localization.inContactAgentPhone),this.selectedIDText.val(agentPhone).attr("title",IC_Localization.inContactAgentPhone)):selectedId===IC_Util.SoftPhone&&(this.selectedPanel.hide(),this.selectedIDText.hide(),this.divVolumePanel.showfn(),this.selectedIDText.val(IC_Util.WebRTC).attr("title",IC_Localization.integratedSoftphone),this.selectedTextLabel.text(IC_Localization.integratedSoftphone+" :").attr("title",IC_Localization.integratedSoftphone))},createSoftPhoneVolumeControls:function(parent){var defaultVolume=this.options.container.getSoftPhoneVolume();this.divVolumePanel=$('<div id="iddivVolumepanel" class="divVolumePanelcss">').appendTo(parent),this.divlblVolume=$('<div id="lblSoftPhone" title="'+IC_Localization.softphoneVolume+'" />').text(IC_Localization.softphoneVolume+" :").appendTo(this.divVolumePanel),this.divVolumeKey=$('<input id="volume" type="range" min="0" max="1" step=".02" value="'+defaultVolume+'" class="volumeColor">').on("input change",$.proxy(this.onSoftphoneVolumeChange,this)),this.divVolumePanel.hide(),this.currentVolumeDiv=$("<p class='volumeLevel' />").css("width",100*defaultVolume+"%"),$("<div class='volumeControl' />").appendTo(this.divVolumePanel).append(this.divVolumeKey,this.currentVolumeDiv)},onSoftphoneVolumeChange:function(){var softPhoneVoulme=this.divVolumeKey.val();this.currentVolumeDiv.css("width",100*softPhoneVoulme+"%"),this.options.container.onSoftPhoneVolumeChange(softPhoneVoulme)},getLocalizedLoglevel:function(id){var i=0;for(i=0;i<this.logLevels.length;i++)if(this.logLevels[i].id===id)return this.logLevels[i].value;return id},onClose:function(){this.options.container.closeUserSetting(),IC_Common.removeFocusFromCloseIcon(this.closeBtnIcon,"closeBtnIconFocus")},onHelp:function(){this.options.container.onClickHelp()},onDownloadClick:function(e){(IC_Common.isButtonEnabled(this.logoutBtnDiv)||IC_Common.isButtonSelected(this.logoutBtnDiv))&&this.options.container.downloadLogEntries()},onFeedbackClick:function(e){this.options.container.showFeedbackForm()},onLogoutClick:function(e){(IC_Common.isButtonEnabled(this.logoutBtnDiv)||IC_Common.isButtonSelected(this.logoutBtnDiv))&&this.options.container.logoutUser()},stationorPhoneNumber:function(){var containerOptions=this.options.container.options;this.divVolumePanel.hide(),IC_Validation.isNotNullOrUndefinedString(containerOptions.stationId)?(this.stationRbtn.attr("checked","checked"),this.selectedTextLabel.text(IC_Localization.inContactAgentStationID+":").attr("title",IC_Localization.inContactAgentStationID),"block"===this.selectedIDLbl.css("display")?this.selectedIDLbl.text(containerOptions.stationId):this.selectedIDText.val(containerOptions.stationId).attr("title",IC_Localization.inContactAgentStationID)):containerOptions.phoneNo!==IC_Util.WebRTC?(this.phoneNoRbtn.attr("checked","checked"),this.selectedTextLabel.text(IC_Localization.inContactAgentPhone+":").attr("title",IC_Localization.inContactAgentPhone),"block"===this.selectedIDLbl.css("display")?(this.selectedIDLbl.text(containerOptions.phoneNo),this.selectedIDLbl.prop("title",containerOptions.phoneNo)):this.selectedIDText.val(containerOptions.phoneNo).attr("title",IC_Localization.inContactAgentPhone)):!0===this.options.container.getSoftphoneEnabled()?(this.selectedTextLabel.text(IC_Localization.integratedSoftphone+" :").attr("title",IC_Localization.integratedSoftphone),this.selectedIDLbl.text(containerOptions.phoneNo),this.selectedPanel.showfn(),this.divVolumePanel.showfn(),this.divSubmit.text()===IC_Localization.save&&(this.softPhoneDiv.showfn(),this.softPhoneRbtn.attr("checked","checked"),this.stationPhoneIDChange())):(this.softPhoneDiv.hide(),this.selectedTextLabel.text(IC_Localization.inContactAgentPhone+":").attr("title",IC_Localization.inContactAgentPhone),this.phoneNoRbtn.attr("checked","checked"),this.selectedIDText.val("").attr("title",IC_Localization.inContactAgentPhone))},onSettingToggle:function(){var phoneNumberType=$("input[name=radioID]:radio:checked").val(),isTooltipEnabled=$('input[name="tooltipChkbox"]').is(":checked"),stationIDTxt="",phoneNoTxt="";if(that=this,this.divSubmit.text()===IC_Localization.edit)this.divSubmit.text(IC_Localization.save).attr("title",IC_Localization.save),this.phoneDiv.css("display","block"),this.stationDiv.css("display","block"),!0===this.options.container.getSoftphoneEnabled()&&this.softPhoneDiv.css("display","block"),this.options.container.options.agentAudioSettings&&(this.audioSettings=this.options.container.options.agentAudioSettings),this.options.container.options.agentVisualSettings&&(this.visualSettings=this.options.container.options.agentVisualSettings),this.agentMsgAudioChkbox.prop("checked",this.audioSettings&&this.audioSettings.AgentMessages),this.agentMsgAudioChkbox.removeAttr("disabled"),this.contactAudioChkbox.prop("checked",this.audioSettings&&this.audioSettings.Contacts),this.contactAudioChkbox.removeAttr("disabled"),this.chatMsgAudioChkbox.prop("checked",this.audioSettings&&this.audioSettings.ChatMessages),this.chatMsgAudioChkbox.removeAttr("disabled"),this.endChatCallAudioChkbox.prop("checked",this.audioSettings&&this.audioSettings.EndChatOrCall),this.endChatCallAudioChkbox.removeAttr("disabled"),this.agentMsgVisualChkbox.prop("checked",this.visualSettings&&this.visualSettings.AgentMessages),this.agentMsgVisualChkbox.removeAttr("disabled"),this.contactVisualChkbox.prop("checked",this.visualSettings&&this.visualSettings.Contacts),this.contactVisualChkbox.removeAttr("disabled"),this.chatMsgVisualChkbox.prop("checked",this.visualSettings&&this.visualSettings.ChatMessages),this.chatMsgVisualChkbox.removeAttr("disabled"),this.endChatCallVisualChkbox.prop("checked",this.visualSettings&&this.visualSettings.EndChatOrCall),this.endChatCallVisualChkbox.removeAttr("disabled"),this.selectedIDLbl.css({display:"none"}),this.selectedTextLabel.css({display:"block"}),this.selectedIDText.css({display:"block"}),this.divCancel.css({display:"block"}),this.logLevelLbl.css({display:"none"}),this.logLevelCombo.css({display:"block"}),this.enableTooltipChkbox.prop("checked",this.options.container.options.isTooltipEnabled),this.enableTooltip.css("display","block"),this.stationorPhoneNumber();else{var errorStr="";if(IC_Validation.isNotNullOrEmpty(this.selectedIDText.val())||(errorStr=this.addErrorMsg(errorStr,IC_Localization.phoneNumberOrStationIDRequired)),"Station"===phoneNumberType?IC_Validation.isNotNullOrEmpty(this.selectedIDText.val())&&!IC_Validation.isValidStationId(this.selectedIDText.val())&&(errorStr=this.addErrorMsg(errorStr,IC_Localization.stationIDNotValid)):"Phone"===phoneNumberType&&IC_Validation.isNotNullOrEmpty(this.selectedIDText.val())&&!IC_Validation.isValidPhoneNumber(this.selectedIDText.val())&&(errorStr=this.addErrorMsg(errorStr,IC_Localization.phoneNumberIsNotValid)),IC_Validation.isNotNullOrEmpty(errorStr))return this.errorPanel.html(IC_Localization.error+": "+errorStr),this.errorPanel.showfn(),this.renderCustomScrollBar(this.errorPanel),void this.renderCustomScrollBar(this.contentPanel);var logLevel=this.logLevelCombo.comboBox("getSelectedItem").id;IC_Util.LogLevel!=logLevel&&this.logLevelLbl.val(IC_Util.LogLevel),"Station"===phoneNumberType?stationIDTxt=this.selectedIDText.val():"Phone"===phoneNumberType?phoneNoTxt=this.selectedIDText.val():phoneNumberType===IC_Util.SoftPhone&&(phoneNoTxt=IC_Util.WebRTC);var aAgentMessages=$('input[name="aAgentMsgChkbox"]').is(":checked"),aContacts=$('input[name="aContactCheckbox"]').is(":checked"),aChatMessages=$('input[name="aChatMsgChkbox"]').is(":checked"),aEndChatOrCall=$('input[name="aEndChatCallChkbox"]').is(":checked"),vAgentMessages=$('input[name="vAgentMsgChkbox"]').is(":checked"),vContacts=$('input[name="vContactCheckbox"]').is(":checked"),vChatMessages=$('input[name="vChatMsgChkbox"]').is(":checked"),vEndChatOrCall=$('input[name="vEndChatCallChkbox"]').is(":checked"),VSettingsModified=!!vAgentMessages&&0==this.options.container.options.agentVisualSettings.AgentMessages;if(VSettingsModified=(VSettingsModified=VSettingsModified||!!vContacts&&0==this.options.container.options.agentVisualSettings.Contacts)||!!vChatMessages&&0==this.options.container.options.agentVisualSettings.ChatMessages,VSettingsModifieda=VSettingsModified||!!vEndChatOrCall&&0==this.options.container.options.agentVisualSettings.EndChatOrCall,VSettingsModified&&"granted"!==Notification.permission&&confirm(IC_Localization.enableVisualNotificationConfirmation)){var tabOrWindow=window.open(document.location.href,"_blank");tabOrWindow.onload=function(){tabOrWindow.agentConsoleContainer.hidden=!0,tabOrWindow.focus(),tabOrWindow.Notification.requestPermission(function(res){tabOrWindow.close()})}}var agentAudioSettings={AgentMessages:aAgentMessages,Contacts:aContacts,ChatMessages:aChatMessages,EndChatOrCall:aEndChatOrCall},agentVisualSettings={AgentMessages:vAgentMessages,Contacts:vContacts,ChatMessages:vChatMessages,EndChatOrCall:vEndChatOrCall};this.options.container.saveUserSetting(stationIDTxt,phoneNoTxt,phoneNumberType,logLevel,isTooltipEnabled,agentAudioSettings,agentVisualSettings)}this.renderCustomScrollBar(this.contentPanel)},addErrorMsg:function(errorMsg,msg){return IC_Validation.isNotNullOrEmpty(errorMsg)?errorMsg+="<br/>"+msg:errorMsg=msg,errorMsg},onSettingCancel:function(){this.passwordChanged=!1,this.errorPanel.hide(),this.divSubmit.text(IC_Localization.edit).attr("title",IC_Localization.edit),this.divCancel.css({display:"none"}),this.selectedTextLabel.css({display:"block"}),this.selectedIDLbl.css({display:"block"}),this.selectedIDText.css({display:"none"}),this.stationorPhoneNumber(),this.stationDiv.css("display","none"),this.phoneDiv.css("display","none"),this.softPhoneDiv.css("display","none"),this.agentMsgAudioChkbox.prop({disabled:"true",checked:this.audioSettings&&this.audioSettings.AgentMessages}),this.contactAudioChkbox.prop({disabled:"true",checked:this.audioSettings&&this.audioSettings.Contacts}),this.chatMsgAudioChkbox.prop({disabled:"true",checked:this.audioSettings&&this.audioSettings.ChatMessages}),this.endChatCallAudioChkbox.prop({disabled:"true",checked:this.audioSettings&&this.audioSettings.EndChatOrCall}),this.agentMsgVisualChkbox.prop({disabled:"true",checked:this.visualSettings&&this.visualSettings.AgentMessages}),this.contactVisualChkbox.prop({disabled:"true",checked:this.visualSettings&&this.visualSettings.Contacts}),this.chatMsgVisualChkbox.prop({disabled:"true",checked:this.visualSettings&&this.visualSettings.ChatMessages}),this.endChatCallVisualChkbox.prop({disabled:"true",checked:this.visualSettings&&this.visualSettings.EndChatOrCall}),this.logLevelCombo.css({display:"none"}),this.logLevelLbl.css({display:"block"}),this.enableTooltip.css("display","none"),this.renderCustomScrollBar(this.contentPanel)},updateView:function(error){this.onSettingToggle(this.isEvolve),IC_Validation.isValidObject(error)&&error.ShowError&&(IC_Validation.isNotNullOrEmpty(error.response)&&IC_Validation.isNotNullOrEmpty(error.response.error_description)?this.errorPanel.html(IC_Common.getLocalizedErrorMsg(error.response.error_description)):this.errorPanel.html(IC_Common.getLocalizedErrorMsg(error.msg)),this.errorPanel.showfn(),this.renderCustomScrollBar(this.errorPanel),this.renderCustomScrollBar(this.contentPanel))},showLogoutbtn:function(){this.logoutBtnDiv.showfn(),this.feedbackPanel.showfn()},renderCustomScrollBar:function(objName){objName.css("max-height",this.element.height()-55+"px"),"block"===objName.css("display")&&(objName.mCustomScrollbar("destroy"),objName.mCustomScrollbar({scrollButtons:{enable:!0},scrollInertia:0}))},destroy:function(){var self=this;this.element.toggle("slide",{complete:function(){for(var obj in $(self).children().each(function(){IC_Common.discardElement(this)}),$.Widget.prototype.destroy.call(self),self.element.remove(),self)self.hasOwnProperty(obj)&&IC_Common.discardElement(this)},direction:"down"},250)},setFocusToOptionsHeader:function(isEvolve){this.headerPanel.trigger("focus"),this.isEvolve=isEvolve}})}(jQuery);