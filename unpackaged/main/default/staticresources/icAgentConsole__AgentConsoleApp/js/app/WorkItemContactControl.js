!function($){$.widget("AgentConsole.workItemContactPanel",$.AgentConsole.callContactPanel,{options:{controller:null,resourceBase:"",canRoundTopCorners:!1,canRoundBottomCorners:!1,isPopout:!1},_init:function(){this.contactStatusLocal={Active:IC_Localization.active,Disconnected:IC_Localization.disconnected,Dialing:IC_Localization.dialing,Ringing:IC_Localization.ringing,Hold:IC_Localization.hold,Resume:IC_Localization.resume,Paused:IC_Localization.paused,Interrupted:IC_Localization.interrupted,AMD:IC_Localization.amd,Holding:IC_Localization.holding,Masking:IC_Localization.masking,Preview:IC_Localization.preview,Joined:IC_Localization.joined,Incoming:IC_Localization.incoming},this.disconnectedStatus={CallAbandoned:IC_Localization.callAbandoned,AnsweringMachine:IC_Localization.answeringMachine,Rejected:IC_Localization.rejected,BadNumber:IC_Localization.badNumber,NoAnswer:IC_Localization.noAnswer,TransferComplete:IC_Localization.transferComplete}},_create:function(){this.resourceBase=this.options.resourceBase,this.root=this.createRootPanels(),this.root.appendTo(this.element),this.postCreate()},postCreate:function(contactInfo){this._workItemInfo=contactInfo,this.statePanel.css("display","block"),this.rightArrowPnl.removeClass("RightArrowInBumberBox").addClass("RightArrowInBumberBoxWorkItm"),this.LeftArrowPnl.removeClass("LeftArrowInBumberBox").addClass("LeftArrowInBumberBoxWorkItm"),this.mediaTypeImgPnlL.removeClass("MediaType").addClass("MediaTypeWorkItem"),this.mediaTypeImgPnlR.removeClass("MediaType").addClass("MediaTypeWorkItem"),this.dropImg.attr("src",this.resourceBase+"/css/images/bumber-workitem-drop-disabled.png"),this.transferDiv=$('<div class="btnBrRound5 MaskBtnPnl btnDivDisable" id="transWIDivId" align="center" />'),this.transferDiv.attr("title",IC_Localization.transfer),this.transferDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.transferDiv.on("click",$.proxy(this.transferClick,this)),this.transferImg=$('<img src="'+this.resourceBase+'/css/images/bumber-workitem-transfer-disabled.png" class="ImgMask" />'),this.transferDiv.append(this.transferImg),this.maskDiv.css("display","none"),this.contactControlsPanel.append(this.transferDiv),this.recordDiv.remove(),this.mediaTypeImgPnlL.attr("src",this.resourceBase+"/css/images/mediatype-workitem.png"),this.mediaTypeImgPnlR.attr("src",this.resourceBase+"/css/images/mediatype-workitem.png")},transferClick:function(e){e.stopPropagation(),e.preventDefault();(IC_Common.isButtonEnabled(this.transferDiv)||IC_Common.isButtonSelected(this.transferDiv))&&this.options.controller.onWorkItemTransfer(this._workItemInfo.id)},calculateEllipsisSpace:function(contactInfo){this.contactIDorNumberPnl.css("width","auto");var workItemTypeAndID,status,workItemDurationWidth=this.callDurationPnl.css("width"),name=contactInfo.skillName,skillWith=0,skillScrollWidth=0;workItemDurationWidth=156-(workItemDurationWidth=workItemDurationWidth.replace("px","")),skillWith=this.skillNamePnl.css("width").replace("px",""),skillScrollWidth=this.skillNamePnl.prop("scrollWidth"),this.marqueeTime>0||skillWith<skillScrollWidth?this.marqueeTime<=60?0===this.marqueeTime?(this.skillNamePnl.html('<marquee title="'+name+'" behavior="alternate" scrollamount="1">&nbsp;&nbsp;&nbsp;'+name+"&nbsp;&nbsp;&nbsp;</marquee>"),++this.marqueeTime):++this.marqueeTime:IC_Common.setTextWithEllipsis(this.skillNamePnl,name,158,!0):this.skillNamePnl.text(name),this.contactIDorNumberPnl.css("width",workItemDurationWidth+"px"),status="("+this.getLocalizedWorkIemStatus(contactInfo.status)+")",this.contactStatus.text(status),workItemTypeAndID=contactInfo.workItemType==IC_Util.SalesforceOmnichannelRouting?IC_Localization.omniChannel+" "+contactInfo.workItemId:contactInfo.workItemType+" "+contactInfo.workItemId,this.contactIDorNumberPnl.text(workItemTypeAndID),this.contactIDorNumberPnl.css("width").replace("px",""),(skillWith=this.contactIDorNumberPnl.css("width").replace("px",""))<(skillScrollWidth=this.contactIDorNumberPnl.prop("scrollWidth"))&&this.contactIDorNumberPnl.attr("title",this.options.contact.name||workItemTypeAndID)},getLocalizedWorkIemStatus:function(status){return this.contactStatusLocal.hasOwnProperty(status)?this.contactStatusLocal[status]:status},updateWorkItemData:function(contactInfo){this.calculateEllipsisSpace(contactInfo),this._workItemInfo=contactInfo;var dropState="disabled",transferState="disabled";"Active"===contactInfo.status?(dropState="enabled",transferState="enabled"):"Holding"!==contactInfo.status&&"Disconnected"!==contactInfo.status||(dropState="disabled",transferState="disabled"),this.changeButtonState(this.dropDiv,this.dropImg,dropState,this.resourceBase+"/css/images/bumber-workitem-drop.png",this.resourceBase+"/css/images/bumber-workitem-drop-disabled.png"),this.changeButtonState(this.transferDiv,this.transferImg,transferState,this.resourceBase+"/css/images/bumber-workitem-transfer.png",this.resourceBase+"/css/images/bumber-workitem-transfer-disabled.png")},getContact:function(){return this._workItemInfo},enableDisbleBtnOnTransfer:function(isTransferClicked){var holdState="enabled",dropState="enabled",transferState="enabled";isTransferClicked&&(holdState="disabled",dropState="disabled",transferState="disabled"),this.changeButtonState(this.holdResumeDiv,this.holdResumeImg,holdState,this.resourceBase+"/css/images/bumber-hold.png",this.resourceBase+"/css/images/bumber-hold-disabled.png"),this.changeButtonState(this.dropDiv,this.dropImg,dropState,this.resourceBase+"/css/images/bumber-workitem-drop.png",this.resourceBase+"/css/images/bumber-workitem-drop-disabled.png"),this.changeButtonState(this.transferDiv,this.transferImg,transferState,this.resourceBase+"/css/images/bumber-workitem-transfer.png",this.resourceBase+"/css/images/bumber-workitem-transfer-disabled.png")}})}(jQuery);