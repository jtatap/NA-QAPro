!function($){$.widget("AgentConsole.workItemAcceptRejectPanel",$.AgentConsole.acceptRejectPanel,{options:{controller:null,resourceBase:""},timerId:0,_init:function(){document.getElementById("renderTextSize")||$('<div id="renderTextSize"/>').addClass("renderTextSize").appendTo("Body")},_create:function(){this.contact=this.options.contact,this.resourceBase=this.options.resourceBase,this.root=this.createRootPanel(),this.root.appendTo(this.element),this.workItemPayload=$('<div class="workItemPayload"/>').appendTo(this.message),this.postCreate()},postCreate:function(){this.mediaTypeImgPnlL.attr("src",this.resourceBase+"/css/images/mediatype-workitem.png"),this.timeOutPanel.css("display","block"),this.acceptBtn.on("click",$.proxy(this.acceptBtnClick,this)),this.rejectBtn.on("click",$.proxy(this.rejectBtnClick,this)),this.startTimer(this.contact),this.messageHeader.text(IC_Localization.incomingWorkItem).addClass("textEllipsis").attr("title",IC_Localization.incomingWorkItem),this.statusPanel.text(this.contact.workItemType===IC_Util.SalesforceOmnichannelRouting?IC_Localization.omniChannel:this.contact.workItemType),this.skillNamePanel.text(this.contact.skillName),this.aniDNSPayloadPanel.text(this.contact.workItemId),this.workItemPayload.html(this.contact.workItemPayload),this.textMask(this.statusPanel,this.contact.workItemType,115),this.lastServerTimestamp=this.contact.lastStateTime},acceptBtnClick:function(){this.options.controller.acceptContact(this.contact.id),this.destroy()},rejectBtnClick:function(){this.options.controller.rejectContact(this.contact.id),this.destroy()},toggleAcceptButtonAccess:function(isEnabled){isEnabled?this.acceptBtn.removeClass("acceptBtnDisable ").addClass("acceptGradient"):this.acceptBtn.removeClass("acceptGradient").addClass("acceptBtnDisable ")},textMask:function(objName,text,limit){$("#renderTextSize").text(text),$("#renderTextSize").width()>limit?(objName.attr("title",objName.text()),objName.addClass("textEllipsis")):(objName.attr("title",""),objName.removeClass("textEllipsis")),objName.css("width",limit+"px"),$("#renderTextSize").text("")},startTimer:function(contact){var that=this;this.acceptRejectDuration=0,this.acceptRejectDuration>=0&&(this.timerId=setInterval(function(){that.updateTimer(that.timeOutPanel)},1e3))},timeDiff:function(time){var ms=Math.abs(this.options.controller.getServerTimestamp()-time);return Math.round(ms/1e3)},updateTimer:function(timerPnlObj){var calculatedTime=0;this.acceptRejectDuration=this.timeDiff(this.contact.time),this.contactTimerVal=this.acceptRejectDuration,this.contactTimerVal<345600?(this.contactTimerVal=this.contactTimerVal+1,this.acceptRejectDuration=this.contactTimerVal,calculatedTime=IC_Common.secondsToTime(this.contactTimerVal)):calculatedTime=">96 "+IC_Localization.hours,timerPnlObj.text(calculatedTime)},onDestroy:function(){clearInterval(this.timerId),this.acceptRejectDuration=0}})}(jQuery);