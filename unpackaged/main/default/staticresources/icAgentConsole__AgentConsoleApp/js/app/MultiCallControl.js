!function($){$.widget("AgentConsole.multiCallControl",{options:{resourceBase:"",container:null,addState:"disabled",muteState:"disabled",transferState:"disabled",conferenceState:"disabled",keypadState:"disabled",popoutState:"disabled"},_create:function(){this.resourceBase=this.options.resourceBase,this.root=this.createRootPanels(),this.root.appendTo(this.element),this.postCreate(),this.toggleBlinking=!1},postCreate:function(){},createRootPanels:function(){return this.rootPanel=$("<div/>"),this.addDiv=$('<div id = "addDivId" class="btnBrRound5 addCall btnDivDisable" />').appendTo(this.rootPanel),this.addImg=$('<img src="'+this.options.resourceBase+'/css/images/call-add-disabled.png" />').appendTo(this.addDiv),this.addDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.addDiv.on("click",$.proxy(this.onAddClick,this)),this.muteDiv=$('<div id = "muteDivId" class="btnBrRound5 mute btnDivDisable" title="'+IC_Localization.mute+'" />').appendTo(this.rootPanel),this.muteImg=$('<img src="'+this.options.resourceBase+'/css/images/call-mute-disabled.png" />').appendTo(this.muteDiv),this.muteDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.muteDiv.on("click",$.proxy(this.onMuteClick,this)),this.keyPadDiv=$('<div id = "keyPadDivId" class="btnBrRound5 keypadTone btnDivDisable" title="'+IC_Localization.keypadTones+'" />').appendTo(this.rootPanel),this.keyPadImg=$('<img src="'+this.options.resourceBase+'/css/images/keypad-tones-disabled.png" />').appendTo(this.keyPadDiv),this.keyPadDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.keyPadDiv.on("click",$.proxy(this.onKeyPadClick,this)),this.transDiv=$('<div id = "transDivId" class="btnBrRound5 transfer btnDivDisable" title="'+IC_Localization.transfer+'" />').appendTo(this.rootPanel),this.transImg=$('<img src="'+this.options.resourceBase+'/css/images/call-trans-disabled.png" />').appendTo(this.transDiv),this.transDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.transDiv.on("click",$.proxy(this.onTransferClick,this)),this.confDiv=$('<div id = "confDivId" class="btnBrRound5 conference btnDivDisable" />').appendTo(this.rootPanel),this.confImg=$('<img src="'+this.options.resourceBase+'/css/images/call-conf-disabled.png" />').appendTo(this.confDiv),this.confDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.confDiv.on("click",$.proxy(this.onConferenceClick,this)),this.addChatDiv=$('<div id = "addChatDivId" class="btnBrRound5 add btnDivDisable" title="'+IC_Localization.addChat+'" id="addChatDivId"/>').appendTo(this.rootPanel),this.addChatImg=$('<img src="'+this.options.resourceBase+'/css/images/chat-disable.png" />').appendTo(this.addChatDiv),this.addChatDiv.on("click",$.proxy(this.onAddChatClick,this)),this.popoutDiv=$('<div class="btnBrRound5 chatpop btnDivDisable" id="popoutDivId" title="'+IC_Localization.popout+'" />').appendTo(this.rootPanel),this.popoutImg=$('<img src="'+this.options.resourceBase+'/css/images/chat-popout-disabled.png" />').appendTo(this.popoutDiv),this.popoutDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.popoutDiv.on("click",$.proxy(this.onPopoutClick,this)),this.rootPanel},_init:function(){},setVisibilityControl:function(ctrlType){"CallContactEvent"===ctrlType||"WorkItemContactEvent"===ctrlType?(this.addChatDiv.hide(),this.popoutDiv.hide(),"WorkItemContactEvent"===ctrlType?this.keyPadDiv.hide():this.keyPadDiv.showfn(),this.transDiv.showfn(),this.confDiv.showfn(),this.muteDiv.showfn(),this.addDiv.showfn(),this.setVisibilityKeypad(this.options.keypadState),this.setVisibilityAdd(this.options.addState),this.setVisibilityMute(this.options.muteState),this.setVisibilityTransfer(this.options.transferState),this.setVisibilityConference(this.options.conferenceState)):"ChatContactEvent"===ctrlType?(this.transDiv.hide(),this.confDiv.hide(),this.keyPadDiv.hide(),this.muteDiv.hide(),this.addDiv.hide(),this.addChatDiv.showfn(),this.popoutDiv.hide(),this.setVisibilityAddChat(this.options.addChatState),this.setVisibilitychatPopout(this.options.chatPopoutState)):"EmailContactEvent"===ctrlType&&(this.transDiv.hide(),this.confDiv.hide(),this.keyPadDiv.hide(),this.muteDiv.hide(),this.addDiv.hide(),this.addChatDiv.hide(),this.popoutDiv.hide())},removeSelectedState:function(){this.addDiv.removeClass("btnDivHover")},onAddChatClick:function(){(IC_Common.isButtonEnabled(this.addChatDiv)||IC_Common.isButtonSelected(this.addChatDiv))&&(clearTimeout(this.chatIcnBlinkingTimeout),this.removeSelectedState(),this.options.container.addChat())},onAddClick:function(){(IC_Common.isButtonEnabled(this.addDiv)||IC_Common.isButtonSelected(this.addDiv))&&(this.removeSelectedState(),this.options.container.onAddCallClick())},onMuteClick:function(){(IC_Common.isButtonEnabled(this.muteDiv)||IC_Common.isButtonSelected(this.muteDiv))&&this.options.container.onMuteClick()},onKeyPadClick:function(){(IC_Common.isButtonEnabled(this.keyPadDiv)||IC_Common.isButtonSelected(this.keyPadDiv))&&this.options.container.onkeyPadClick()},onTransferClick:function(){(IC_Common.isButtonEnabled(this.transDiv)||IC_Common.isButtonSelected(this.transDiv))&&this.options.container.onTransferClick()},onConferenceClick:function(){(IC_Common.isButtonEnabled(this.confDiv)||IC_Common.isButtonSelected(this.confDiv))&&this.options.container.conferenceClick()},onPopoutClick:function(){(IC_Common.isButtonEnabled(this.popoutDiv)||IC_Common.isButtonSelected(this.popoutDiv))&&this.options.container.onPopoutClick()},changeButtonState:function(div,img,state,iconEnabled,iconDisabled){"enabled"===(state=state||"disabled")?IC_Common.enableButton(div,img,iconEnabled):"disabled"===state?IC_Common.disableButton(div,img,iconDisabled):"selected"===state&&IC_Common.selectButton(div,img,iconEnabled)},setVisibilityKeypad:function(btnState){var iconEnabled=this.options.resourceBase+"/css/images/keypad-tones.png",iconDisabled=this.options.resourceBase+"/css/images/keypad-tones-disabled.png";this.changeButtonState(this.keyPadDiv,this.keyPadImg,btnState,iconEnabled,iconDisabled)},setVisibilityAdd:function(btnState,addCallTooltip){var iconEnabled=this.options.resourceBase+"/css/images/call-add.png",iconDisabled=this.options.resourceBase+"/css/images/call-add-disabled.png";IC_Validation.isNotNullOrUndefinedString(addCallTooltip)||(addCallTooltip=IC_Localization.addCall),this.addDiv.attr("title",addCallTooltip),this.changeButtonState(this.addDiv,this.addImg,btnState,iconEnabled,iconDisabled)},setVisibilityMute:function(btnState){var iconEnabled=this.options.resourceBase+"/css/images/call-mute.png",iconDisabled=this.options.resourceBase+"/css/images/call-mute-disabled.png";this.changeButtonState(this.muteDiv,this.muteImg,btnState,iconEnabled,iconDisabled),"selected"===btnState?this.muteDiv.attr("title",IC_Localization.unmute):this.muteDiv.attr("title",IC_Localization.mute)},setVisibilityTransfer:function(btnState){var iconEnabled=this.options.resourceBase+"/css/images/call-trans.png",iconDisabled=this.options.resourceBase+"/css/images/call-trans-disabled.png";this.changeButtonState(this.transDiv,this.transImg,btnState,iconEnabled,iconDisabled)},setVisibilityConference:function(btnState){var iconEnabled=this.options.resourceBase+"/css/images/call-conf.png",iconDisabled=this.options.resourceBase+"/css/images/call-conf-disabled.png";this.confDiv.attr("title",IC_Localization.conference),this.changeButtonState(this.confDiv,this.confImg,btnState,iconEnabled,iconDisabled)},setVisibilityEndConference:function(btnState){var endConfImgEnabled=this.options.resourceBase+"/css/images/call-conference-end.png";this.confDiv.attr("title",IC_Localization.endConference),this.changeButtonState(this.confDiv,this.confImg,btnState,endConfImgEnabled,endConfImgEnabled)},addChatIcnBlinking:function(){var that=this,iconEnabled="";this.chatIcnBlinkingTimeout=setTimeout(function(){!0===that.toggleBlinking?(that.toggleBlinking=!1,iconEnabled=that.options.resourceBase+"/css/images/chat-disable.png",that.addChatDiv.removeClass("chat-blinking-bg")):(iconEnabled=that.options.resourceBase+"/css/images/chat-enable.png",that.toggleBlinking=!0,that.addChatDiv.addClass("chat-blinking-bg")),that.changeButtonState(that.addChatDiv,that.addChatImg,"enabled",iconEnabled,""),that.addChatIcnBlinking()},500)},setVisibilityAddChat:function(btnState){var iconEnabled=this.options.resourceBase+"/css/images/chat-enable.png",iconDisabled=this.options.resourceBase+"/css/images/chat-disable.png";if(clearTimeout(this.chatIcnBlinkingTimeout),"enabled"===btnState){if(IC_Validation.isNotNullOrUndefinedString(AgentConsoleDataStore.lastNewSkillQueueUpdateTime)){if(0!==this.timeDiff(AgentConsoleDataStore.lastNewSkillQueueUpdateTime))return void this.addChatIcnBlinking();iconEnabled=this.options.resourceBase+"/css/images/chat-enable.png",this.addChatDiv.addClass("chat-blinking-bg")}}else this.addChatDiv.removeClass("chat-blinking-bg");this.changeButtonState(this.addChatDiv,this.addChatImg,btnState,iconEnabled,iconDisabled)},timeDiff:function(time){var ms=Math.abs((new Date).getTime()-time);return(ms=AgentConsoleDataStore.agentInfo.chatRefusalTimeout-Math.round(ms/1e3))<0&&(ms=0),ms},setVisibilitychatConf:function(btnState){var iconEnabled=this.options.resourceBase+"/css/images/chat-add2.png",iconDisabled=this.options.resourceBase+"/css/images/chat-add2-disabled.png";this.changeButtonState(this.chatNoteDiv,this.chatNoteImg,btnState,iconEnabled,iconDisabled)},setVisibilitychatPopout:function(btnState){var iconEnabled=this.options.resourceBase+"/css/images/chat-popout.png",iconDisabled=this.options.resourceBase+"/css/images/chat-popout-disabled.png";this.changeButtonState(this.popoutDiv,this.popoutImg,btnState,iconEnabled,iconDisabled)},hidePopInIcon:function(){this.popoutDiv.hide()}})}(jQuery);