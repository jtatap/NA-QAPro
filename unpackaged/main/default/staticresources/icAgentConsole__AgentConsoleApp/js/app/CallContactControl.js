!function($){var logger=IC_Common.getLogger("CallContact");$.widget("AgentConsole.callContactPanel",{options:{controller:null,resourceBase:"",canMask:!1,agentInfo:"",canRoundTopCorners:!1,canRoundBottomCorners:!1,isPopout:!1},stopDestroy:!1,forceUpdateNaturalCalling:!1,_init:function(){this.contactStatusLocal={Active:IC_Localization.active,Disconnected:IC_Localization.disconnected,Dialing:IC_Localization.dialing,Ringing:IC_Localization.ringing,Hold:IC_Localization.hold,Resume:IC_Localization.resume,Paused:IC_Localization.paused,Interrupted:IC_Localization.interrupted,AMD:IC_Localization.amd,Holding:IC_Localization.holding,Masking:IC_Localization.masking,Preview:IC_Localization.preview,Joined:IC_Localization.joined,Incoming:IC_Localization.incoming,CallBackDisconnected:IC_Localization.callBack},this.disconnectedStatus={CallAbandoned:IC_Localization.callAbandoned,AnsweringMachine:IC_Localization.answeringMachine,Rejected:IC_Localization.rejected,BadNumber:IC_Localization.badNumber,NoAnswer:IC_Localization.noAnswer,TransferComplete:IC_Localization.transferComplete,Fax:IC_Localization.fax},this.DefaultAmntText=IC_Localization.enterAmount,this.DefaultDispText=IC_Localization.selectDisposition,this.blendedHeight=0},_create:function(){this.resourceBase=this.options.resourceBase,this.root=this.createRootPanels(),this.root.appendTo(this.element),this.postCreate()},_agentStateTimerId:"Duration",_durationStateTimerId:"DurationInState",_timerLst:[],callDurationWidth:20,stopHoverSlide:!1,pcDeliveryType:{TenDigitDialAuto:!0,TenDigitDial:!0},lastServerTimeStamp:0,timeout:0,isPreviewMode:!1,marqueeTime:0,postCreate:function(){},createRootPanels:function(){this.options;return IC_Validation.isNotNullOrUndefinedString(this.options.contact.otherInfo)&&(this.forceUpdateNaturalCalling=!0),this.rootPanel=$('<div class="callCtrlPanel"/>'),this.statePanel=$('<div class="StatePnl" />'),this.bumberPanelLeft=$('<span class="BumperPnlLeft" id="bumberPanelLeftId"/>'),this.stateControlsPanel=$('<div class="StateCtrlPnl btnDivEnable" />'),this.mediaTypeImgPnlL=$('<img class="MediaType" src="'+this.resourceBase+'/css/images/mediatype-phone.png" />'),this.rightArrowPnl=$('<img class="RightArrowInBumberBox" src="'+this.resourceBase+'/css/images/bumber-arrow-right.png" />'),this.rightArrowPnl.hide(),this.bumberPanelLeft.append(this.mediaTypeImgPnlL).append(this.rightArrowPnl),this.contactIDNumberAndDurationHolder=$('<div class="contactIDNumberPnlAndDurationPnl"/>'),this.contactIDorNumberPnl=$('<div id = "contactIDorNumberPnlId" class="contactIDNumberPnl textEllipsis"/>'),this.callDurationPnl=$('<div class="ContactTypeTime" align="right" />'),this.contactIDNumberAndDurationHolder.append(this.contactIDorNumberPnl).append(this.callDurationPnl),this.phoneNumber=$('<div class=""/>'),this.phoneNumberPnl=$('<div class="phoneNumberPnl textEllipsis"/>'),this.phoneNumber.append(this.phoneNumberPnl),this.skillNameHolder=$('<div class=""/>'),this.skillNamePnl=$('<div id = "skillNamePnlId" class="ContactType textEllipsis" />'),this.skillNameHolder.append(this.skillNamePnl),this.stausAndTimeHolder=$('<div class="statusAndTimePnl"/>'),this.contactStatus=$('<div class="ContactStatus StatusActive textEllipsis" align="left" id="callContactStatusId"/>'),this.contactRecording=$('<div class="ContactStatus StatusRecording" align="center" />'),this.recordStatusImg=$('<img src="'+this.resourceBase+'/css/images/contact-recording.gif" class="ImgStatusRecording" />'),this.contactRecording.append(this.recordStatusImg),this.contactStatusTime=$('<div class="ContactStatusTime" align="right" />'),this.stausAndTimeHolder.append(this.contactStatus).append(this.contactRecording).append(this.contactStatusTime),this.statePanel.removeClass("tenDigitDial clickToCall"),"NaturalCalling"===this.options.contact.type||!0===this.forceUpdateNaturalCalling?this.pcDeliveryType.hasOwnProperty(this.options.contact.deliveryType)?(this.lastServerTimeStamp=this.options.contact.lastStateTime,this.timeout=this.options.contact.timeout,this.isPreviewMode=!0,this.stateControlsPanel.append(this.contactIDNumberAndDurationHolder).append(this.stausAndTimeHolder).append(this.phoneNumber).append(this.skillNameHolder),this.stausAndTimeHolder.css({"margin-top":"2px"}),this.statePanel.addClass("tenDigitDial")):(this.stateControlsPanel.append(this.contactIDNumberAndDurationHolder).append(this.stausAndTimeHolder).append(this.phoneNumber).append(this.skillNameHolder),this.stausAndTimeHolder.css({"margin-top":"2px"}),this.statePanel.addClass("clickToCall")):this.stateControlsPanel.append(this.contactIDNumberAndDurationHolder).append(this.skillNameHolder).append(this.stausAndTimeHolder),this.statePanel.append(this.bumberPanelLeft).append(this.stateControlsPanel),this.controlsPanel=$('<div class="ControlsPnl" id = "controlsPanelId"/>'),this.bumberPanelRight=$('<div class="BumperPnlRight" id="BumperPnlRightId"/>'),this.contactControlsPanel=$('<div class="ContactCtrlPnl callContactCtrlPnl" />'),this.mediaTypeImgPnlR=$('<img class="MediaType" src="'+this.resourceBase+'/css/images/mediatype-phone.png"/>'),this.LeftArrowPnl=$('<img class="LeftArrowInBumberBox" src="'+this.resourceBase+'/css/images/bumber-arrow-left.png" />'),this.bumberPanelRight.append(this.mediaTypeImgPnlR).append(this.LeftArrowPnl),this.bumberLeftArrowIconDiv=$('<div id = "callBumberLeftArrowDiv"/>'),this.bumberLeftArrowImg=$('<img class="LeftArrowInBumberPanel" src="'+this.resourceBase+'/css/images/bumber-arrow-left.png" />'),this.bumberLeftArrowIconDiv.css({display:"none"}),this.bumberLeftArrowIconDiv.append(this.bumberLeftArrowImg),this.holdResumeDiv=$('<div id = "holdResumeDivId" class="btnBrRound5 HoldResumeBtnPnl btnDivDisable" title= "'+IC_Localization.hold+'" align="center" />'),this.holdResumeImg=$('<img src="'+this.resourceBase+'/css/images/bumber-hold-disabled.png" class="ImgHoldResume" />'),this.holdResumeDiv.append(this.holdResumeImg),this.holdResumeDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.holdResumeDiv.on("click",$.proxy(this.holdResumeClick,this)),this.dropDiv=$('<div class="btnBrRound5 DropBtnPnl btnDivDisable" title="'+IC_Localization.disconnect+'" align="center" id = "callDropIconId"/>'),this.dropImg=$('<img src="'+this.resourceBase+'/css/images/bumber-drop-disabled.png" class="ImgDrop" />'),this.dropDiv.append(this.dropImg),this.dropDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.dropDiv.on("click",$.proxy(this.dropClick,this)),this.maskDiv=$('<div id = "maskDivId" class="btnBrRound5 MaskBtnPnl btnDivDisable" align="center" />'),this.maskDiv.attr("title",IC_Localization.mask),this.maskImg=$('<img src="'+this.resourceBase+'/css/images/bumber-mask-disabled.png" class="ImgMask" />'),this.maskDiv.append(this.maskImg),this.maskDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.maskDiv.on("click",$.proxy(this.maskClick,this)),this.recordDiv=$('<div id = "recordDivId" class="btnBrRound5 RecordBtnPnl btnDivDisable" title="'+IC_Localization.record+'" align="center" />').css("display","none"),this.recordImg=$('<img src="'+this.resourceBase+'/css/images/bumber-record-disabled.png" class="ImgRecord" />'),this.recordDiv.append(this.recordImg),this.recordDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.recordDiv.on("click",$.proxy(this.recordClick,this)),this.commitmentDiv=$('<div id = "commitmentDivId" class="btnBrRound5 CommitBtnPnl btnDivDisable" title="'+IC_Localization.commit+'" align="center" id="commitIconId"/>'),this.commitmentImg=$('<img src="'+this.resourceBase+'/css/images/pin.png" class="ImgCommitment" />').css({width:"18px",height:"16px"}),this.commitmentDiv.append(this.commitmentImg),this.commitmentDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.commitmentDiv.on("click",$.proxy(this.commitmentClick,this)),this.bumberRightArrowIconDiv=$('<div id = "callBumberRightArrowDiv"/>'),this.bumberRightArrowImg=$('<img class="RightArrowInBumberPanel" src="'+this.resourceBase+'/css/images/bumber-arrow-right.png" />'),this.bumberRightArrowIconDiv.append(this.bumberRightArrowImg),this.contactControlsPanel.append(this.holdResumeDiv).append(this.dropDiv).append(this.maskDiv).append(this.recordDiv).append(this.commitmentDiv),this.contactControlsPanelSlide=$('<div id = "controlsPanelSlide"/>'),this.contactControlsPanelSlide.append(this.contactControlsPanel),this.controlsPanel.append(this.bumberPanelRight).append(this.bumberLeftArrowIconDiv).append(this.contactControlsPanelSlide).append(this.bumberRightArrowIconDiv),this.rootPanel.append(this.statePanel).append(this.controlsPanel),this.loadDialerUI(),this.setCornersCss(),this.bumberPanelRight.on("click",$.proxy(this.rightBumberClick,this)),this.bumberPanelRight.on("mouseenter",$.proxy(this.rightBumberMouseEnter,this)),this.bumberPanelRight.on("mouseleave",$.proxy(this.rightBumberMouseLeave,this)),this.contactStatus.on("click",$.proxy(this.statePnlClick,this)),this.bumberPanelLeft.on("click",$.proxy(this.leftBumberClick,this)),this.bumberPanelLeft.on("mouseover",$.proxy(this.leftBumberMouseEnter,this)),this.controlsPanel.on("mouseleave",$.proxy(this.ctrsPnlClickMouseLeave,this)),this.contactControlsPanel.on("click",$.proxy(this.ctrsPnlClick,this)),this.contactControlsPanel.on("mouseleave",$.proxy(this.ctrsPnlMouseLeave,this)),this.bumberLeftArrowIconDiv.on("click",$.proxy(this.bumberPanelLeftSlide,this)),this.bumberRightArrowIconDiv.on("click",$.proxy(this.bumberPanelRightSlide,this)),this.agentIndicatorPanel=$('<div class="contactIndicator"/>').appendTo(this.stateControlsPanel),this.agentIndicatorPanel.indicator({container:this,isContact:!0}),this.statePanel.removeClass("regularCall"),"Regular"===this.options.contact.type&&this.statePanel.addClass("regularCall"),this.agentIndicatorPanel.hide(),this.rootPanel},loadDialerUI:function(){var machineIcn,faxIcn,dropIcn,that=this;this.callStatusDesc(this.options.contact.status);"NaturalCalling"===this.options.contact.type||!0===this.forceUpdateNaturalCalling?(this.contactIDNumberAndDurationHolder.hide(),this.pcDeliveryType.hasOwnProperty(this.options.contact.deliveryType)||this.contactIDorNumberPnl.css({"font-size":"12px","margin-top":"10px"}),this.contactStatusTime.css({"font-size":"10.5px"}),this.contactStatus.css({"font-size":"13px","margin-left":"6px"}),this.campPanel=$('<div class="campPnl btnDivEnable" />'),this.campPanelDiv=$("<div/>"),this.dialerInfo1=$('<div class="dialerInfo valOneDialInfo" />'),this.dialerInfo2=$('<div class="dialerInfo valTwoDialInfo" />'),this.drop=$('<div class="drop btnDivEnable"  title="'+IC_Localization.badNumberTooltip+'" />'),this.drop.on("click",$.proxy(function(){that.disposeBadNumberCall(that._contactInfo.id,"badNumber")},this)),this.drop.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),dropIcn=$('<img src="'+this.resourceBase+'/css/images/bumber-drop.png"  class="icn" />'),this.drop.append(dropIcn),this.drop.hide(),this.fax=$('<div class="fax btnDivEnable"  title="'+IC_Localization.fax+'" />'),this.fax.on("click",$.proxy(function(){that.callAMDOverride(that._contactInfo.id,"faxMachine")},this)),this.fax.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),faxIcn=$('<img src="'+this.resourceBase+'/css/images/personal-connection-override-fax.png"  class="icn" />'),this.fax.append(faxIcn),this.fax.hide(),this.machine=$('<div class="machine btnDivEnable" title="'+IC_Localization.machine+'" />'),this.machine.on("click",$.proxy(function(){that.callAMDOverride(that._contactInfo.id,"answeringMachine")},this)),this.machine.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),machineIcn=$('<img src="'+this.resourceBase+'/css/images/personal-connection-override-answer-machine.png" class="icn" />'),this.machine.append(machineIcn),this.machine.hide(),this.valOne=$('<div class="valOne textEllipsis" title="'+IC_Localization.valueOne+'"/>').text(IC_Localization.valueOne+" :"),this.valTwo=$('<div class="valTwo textEllipsis" title="'+IC_Localization.valueTwo+'"/>').text(IC_Localization.valueTwo+" :"),this.campPanelDiv.append(this.valOne),this.campPanelDiv.append(this.dialerInfo1),this.campPanelDiv.append(this.valTwo),this.campPanelDiv.append(this.dialerInfo2),this.campPanel.append(this.campPanelDiv),this.callAcceptRejectPnl=$('<div class="call-accept-reject-pnl" id = "callAcceptRejectPnl"/>'),"Consult"===this.options.contact.type||"PersonalQueue"===this.options.contact.type||"Active"===this.options.contact.status&&"Disconnected"===this.options.contact.status||(this.inputTxtDiv=$("<div/>").addClass("inputTxtDiv").appendTo(this.callAcceptRejectPnl),this.pnumberDiv=$("<div/>").addClass("pnumberDiv").appendTo(this.inputTxtDiv),this.pnumberTxt=$('<input type="text" id = "callPnumberTxtId" title="'+IC_Localization.enterPhoneNumberHere+'">').addClass("pnumberTxt textEllipsis").appendTo(this.pnumberDiv),this.pnumberTxt.val(IC_Localization.enterPhoneNumberHere),this.pnumberTxt.addClass("dispComboText"),this.pnumberTxt.on("click",$.proxy(this.onPNumberChange,this)),this.pnumberTxt.on("focus",$.proxy(this.onPNumberChange,this)),this.pnumberTxt.on("blur",$.proxy(this.onPNumberBlur,this)),this.pnumberTxt.on("keypress",function(e){if(that.pnumberTxt.css({border:"1px solid #a1a1a1"}),13===e.which)that.validatePhone();else if(8!=e.which&&0!=e.which&&(e.which<48||e.which>57)&&42!=e.which&&35!=e.which&&43!=e.which&&!0!==e.ctrlKey&&(86!=e.which||118!=e.which))return!1})),this.btnHolder=$('<div style="height: 24px;padding-top: 5px;margin-right: 1px;" />'),this.btnHolder.removeClass("acceptRejectHolder"),this.acceptDiv=$('<div id = "acceptDivId" class="btnBrRound5 grayGradient pc-icons" title= "'+IC_Localization.accept+'" align="center" />'),this.acceptImg=$('<img src="'+this.resourceBase+'/css/images/checkmark.svg" />'),this.acceptImg.css({width:"14px"}),this.acceptDiv.append(this.acceptImg),this.acceptDiv.hoverfn(function(){$(this).addClass("bntHover")},function(){$(this).removeClass("bntHover")}),this.rejectDiv=$('<div id = "rejectDivId" class="btnBrRound5 grayGradient pc-icons" title= "'+IC_Localization.requeue+'" align="center" />'),this.rejectImg=$('<img src="'+this.resourceBase+'/css/images/close.svg" />'),this.rejectDiv.append(this.rejectImg),this.rejectDiv.hoverfn(function(){$(this).addClass("bntHover")},function(){$(this).removeClass("bntHover")}),this.snoozeDiv=$('<div id = "acceptDivId" class="btnBrRound5 grayGradient pc-icons" title= "'+IC_Localization.snooze+'" align="center" />'),this.snoozeImg=$('<img src="'+this.resourceBase+'/css/images/clock-timer.svg" />'),this.snoozeDiv.append(this.snoozeImg),this.snoozeDiv.hoverfn(function(){$(this).addClass("bntHover")},function(){$(this).removeClass("bntHover")}),this.rescheduleDiv=$('<div id = "acceptDivId" style="padding-top: 3px;height: 14px;" class="btnBrRound5 grayGradient pc-icons" title= "'+IC_Localization.reschedule+'" align="center" />'),this.rescheduleImg=$('<img src="'+this.resourceBase+'/css/images/schedule-new-commitment.svg" />'),this.rescheduleImg.css({width:"12px"}),this.rescheduleDiv.append(this.rescheduleImg),this.rescheduleDiv.hoverfn(function(){$(this).addClass("bntHover")},function(){$(this).removeClass("bntHover")}),this.acceptDiv.on("click",$.proxy(this.acceptBtnClick,this)),this.rejectDiv.on("click",$.proxy(this.rejectBtnClick,this)),this.snoozeDiv.on("click",$.proxy(this.snoozeBtnClick,this)),this.rescheduleDiv.on("click",$.proxy(this.rescheduleBtnClick,this)),this.btnHolder.append(this.snoozeDiv),this.btnHolder.append(this.rescheduleDiv),this.btnHolder.append(this.rejectDiv),this.btnHolder.append(this.acceptDiv),this.callAcceptRejectPnl.append(this.btnHolder),this.btnHolder.hide(),this.campPanel.append(this.callAcceptRejectPnl),this.rootPanel.append(this.campPanel).append(this.controlsPanel),this.dispPnl=$('<div class="dispPnl modalDialogPanel">'),dispositionContainer=$('<div class = "modalDialogBackground"/>').appendTo(this.dispPnl),this.headerPanel=$('<div class = "modalDialogHeader">').appendTo(dispositionContainer),this.headerPanel.css({height:"21px"}),dispositionHeader=$('<div class = "modalDialogHeaderText textEllipsis">'+IC_Localization.disposition+"</div>").appendTo(this.headerPanel),dispositionHeader.css({"padding-top":"3px"}),this.dispSelect=$('<div id = "callDispSelectId" class="selectBox dispSelect"> </div>').appendTo(dispositionContainer),this.dispSelect.comboBox({onDataChange:$.proxy(this.ondispositionSelected,this),resourceBase:this.options.resourceBase}),this.amntPanel=$('<div class = "container searchText amntDiv"/>').appendTo(dispositionContainer),this.amntValue=$('<input class = "searchTextInput" style="margin-bottom: 3px;width: 93px;margin-left: 6px; height:14px; " type="text" title="'+IC_Localization.enterAmount+'"/>').appendTo(this.amntPanel),this.dispAmountError=$("<div/>").addClass("dispErrorDiv textEllipsis").appendTo(dispositionContainer),this.dispAmountError.hide(),this.dispAmountError.text(IC_Localization.enterTheAmount),this.amntValue.on("click",$.proxy(this.onAmntTxtChange,this)),this.amntValue.on("focus",$.proxy(this.onAmntTxtChange,this)),this.amntValue.on("blur",$.proxy(this.onAmntTextBlur,this)),this.amntPanel.hide(),this.amntValue.on("keypress",function(e){if(8!==e.which&&0!==e.which&&(e.which<48||e.which>57)&&46!==e.which)return!1;var amnt=that.amntValue.val();return!(46===e.which&&amnt.length>0&&decimalValidator.test(amnt))&&void 0}),this.notesPnl=$('<div id = "callNotesPnlId" class="container notesDiv" />').appendTo(dispositionContainer),this.notesTxt=$('<textarea id = "pcNotesTxtId" class="notesTxt" title="'+IC_Localization.notes+'"/>').appendTo(this.notesPnl),this.notesTxt.on("keyup",$.proxy(this.notesChanged,this)),this.saveBtn=$('<div id = "dispSaveCloseBtnId" class="btnBrRound5 grayGradient saveCloseBtn textEllipsis" title="'+IC_Localization.save+" & "+IC_Localization.close+'">'+IC_Localization.save+" & "+IC_Localization.close+"</div>").appendTo(dispositionContainer),this.saveBtn.hoverfn(function(){$(this).addClass("bntHover")},function(){$(this).removeClass("bntHover")}),this.saveBtn.on("click",$.proxy(this.saveDisposition,this)),this.acceptDiv.hide(),this.rejectDiv.hide(),this.snoozeDiv.hide(),this.rescheduleDiv.hide(),this.dispPnl.hide(),this.callDispPnlPnl=$('<div class="call-accept-reject-pnl" id = "callAcceptRejectPnl"/>'),this.callDispPnlPnl.append(this.dispPnl),this.rootPanel.append(this.callDispPnlPnl).append(this.controlsPanel),this.campPanelDiv.append(this.machine),this.campPanelDiv.append(this.fax),this.campPanelDiv.append(this.drop),this.notesPnl.css({height:"64px"}),this.setDefaultText()):(this.rightArrowPnl.showfn(),this.stopHoverSlide=!0)},onPNumberChange:function(){this.pnumberTxt.val()===IC_Localization.enterPhoneNumberHere&&(this.pnumberTxt.val(""),this.pnumberTxt.removeClass("dispComboText"))},onPNumberBlur:function(){""==this.pnumberTxt.val()&&(this.pnumberTxt.val(IC_Localization.enterPhoneNumberHere),this.pnumberTxt.addClass("dispComboText"))},callAMDOverride:function(contactId,type){this.options.controller.dialerAMDOverrideContact(contactId,type)},disposeBadNumberCall:function(contactId,type){this.options.controller.disposeBadNumberCall(contactId,type)},truncateTxt:function(txt,limit){return txt.length>limit&&(txt=txt.substring(0,limit)+"..."),txt},setCornersCss:function(){this.bumberPanelLeft.removeClass("TopLeftRound BottomLeftRound"),this.stateControlsPanel.removeClass("TopRightRound BottomRightRound"),this.controlsPanel.removeClass("TopLeftRound TopRightRound BottomLeftRound BottomRightRound"),this.bumberPanelRight.removeClass("TopRightRound BottomRightRound"),this.contactControlsPanel.removeClass("TopLeftRound BottomLeftRound"),IC_Validation.isNotNullOrUndefinedString(this.campPanel)&&this.campPanel.removeClass("BottomLeftRound BottomRightRound"),!0===this.options.canRoundTopCorners&&(this.bumberPanelLeft.addClass("TopLeftRound"),this.stateControlsPanel.addClass("TopRightRound"),this.controlsPanel.addClass("TopLeftRound TopRightRound"),this.bumberPanelRight.addClass("TopRightRound"),this.contactControlsPanel.addClass("TopLeftRound")),"NaturalCalling"!==this.options.contact.type&&!0===this.options.canRoundBottomCorners&&!0!==this.forceUpdateNaturalCalling&&(this.bumberPanelLeft.addClass("BottomLeftRound"),this.stateControlsPanel.addClass("BottomRightRound"),this.controlsPanel.addClass("BottomLeftRound BottomRightRound"),this.bumberPanelRight.addClass("BottomRightRound"),this.contactControlsPanel.addClass("BottomLeftRound"))},leftBumberClick:function(){!0===this.stopHoverSlide&&this.showContactCtrlsPnl()},rightBumberClick:function(){!0===this.stopHoverSlide&&this.showContactStatePnl()},bumberPanelLeftSlide:function(){var right=parseInt(this.contactControlsPanel.css("right").replace("px",""));right>0&&(right-=30,this.contactControlsPanel.animate({right:right+"px"},100)),0==right?this.bumberLeftArrowIconDiv.css({display:"none"}):this.bumberLeftArrowIconDiv.css({display:"block"}),right>=0?this.bumberRightArrowIconDiv.css({display:"block"}):this.bumberRightArrowIconDiv.css({display:"none"})},bumberPanelRightSlide:function(){var numOfIcons=this.contactControlsPanel.find('div:not([style*="display: none"])').length,right=parseInt(this.contactControlsPanel.css("right").replace("px","")),diff=23*numOfIcons-92;right<=diff&&(right+=30,this.contactControlsPanel.animate({right:right+"px"},100)),right>diff&&this.bumberRightArrowIconDiv.css({display:"none"}),0==right?this.bumberLeftArrowIconDiv.css({display:"none"}):this.bumberLeftArrowIconDiv.css({display:"block"})},bumberArrowShowHide:function(){var visibleBumperArrowIcons=this.contactControlsPanel.find('div:not([style*="display: none"])').length;displayIcons=4,right=parseInt(this.contactControlsPanel.css("right").replace("px","")),diff=23*visibleBumperArrowIcons-23*displayIcons,visibleBumperArrowIcons<=4||right>diff?this.bumberRightArrowIconDiv.css({display:"none"}):this.bumberRightArrowIconDiv.css({display:"block"});var panelWidth=35*visibleBumperArrowIcons;this.contactControlsPanel.css({width:panelWidth+"px"})},leftBumberMouseEnter:function(){if(!0===this.stopHoverSlide){this.bumberPanelLeft.addClass("bumperBoxHover").removeClass("BumberPnlLeft");"block"!=this.bumberPanelLeft.css("display")&&"inline"!=this.bumberPanelLeft.css("display")||!1===this.leftBumberMouseFlag||(this.leftBumberMouseFlag=!1,this.controlsPanel.animate({width:"toggle"},{duration:250,specialEasing:{width:"linear",height:"easeOutBounce"}}))}},ctrsPnlClickMouseLeave:function(){if(!0!==this.maskingFlag&&!0!==this.rightBumberMouseFlag&&!0===this.stopHoverSlide){this.bumberPanelLeft.removeClass("bumperBoxHover").addClass("BumberPnlLeft");"block"!=this.controlsPanel.css("display")&&"inline"!=this.controlsPanel.css("display")||!1!==this.leftBumberMouseFlag||(this.leftBumberMouseFlag=!0,this.bumberPanelLeft.showfn(),this.controlsPanel.animate({width:"toggle"},{duration:250,specialEasing:{width:"linear",height:"easeOutBounce"}}))}},ctrsPnlMouseLeave:function(){this.rightBumberMouseFlag=!1},rightBumberMouseEnter:function(){this.bumberPanelRight.addClass("bumperBoxHoverSelected")},rightBumberMouseLeave:function(){this.bumberPanelRight.removeClass("bumperBoxHoverSelected"),this.rightBumberMouseFlag=!0},statePnlClick:function(){this.showContactCtrlsPnl()},ctrsPnlClick:function(e){e.stopPropagation()},holdResumeClick:function(e){e.stopPropagation(),e.preventDefault();(IC_Common.isButtonEnabled(this.holdResumeDiv)||IC_Common.isButtonSelected(this.holdResumeDiv))&&("Holding"===this._contactInfo.status?(this.options.controller.resumeContact(this._contactInfo.id),this.changeButtonState(this.holdResumeDiv,this.holdResumeImg,"disabled",this.resourceBase+"/css/images/bumber-resume.png",this.resourceBase+"/css/images/bumber-resume-disabled.png")):"Active"===this._contactInfo.status&&(this.options.controller.holdContact(this._contactInfo.id),this.changeButtonState(this.holdResumeDiv,this.holdResumeImg,"disabled",this.resourceBase+"/css/images/bumber-hold.png",this.resourceBase+"/css/images/bumber-hold-disabled.png")))},dropClick:function(e){(IC_Common.isButtonEnabled(this.dropDiv)||IC_Common.isButtonSelected(this.dropDiv))&&("Holding"===this._contactInfo.status?(e.stopPropagation(),e.preventDefault()):(logger.trace("DropClick - ClassName:",e.target.className," Type: ",e.type),logger.trace("Drop call initiated from call contact"),this.options.controller.endContact(this._contactInfo.id),this.showContactStatePnl()))},maskClick:function(e){e.stopPropagation(),e.preventDefault(),(IC_Common.isButtonEnabled(this.maskDiv)||IC_Common.isButtonSelected(this.maskDiv))&&("Masking"===this._contactInfo.status?(this.maskingFlag=!1,this.options.controller.unmaskCallRecording(this._contactInfo.id)):(this.maskingFlag=!0,this.options.controller.maskCallRecording(this._contactInfo.id)))},recordClick:function(e){(IC_Common.isButtonEnabled(this.recordDiv)||IC_Common.isButtonSelected(this.recordDiv))&&(!0===this._contactInfo.logging?(e.stopPropagation(),e.preventDefault()):(this.options.controller.recordCall(this._contactInfo.id),this.showContactStatePnl()))},commitmentClick:function(){IC_Common.isButtonEnabled(this.commitmentDiv)&&this.options.controller.addCallCommitment(this.options.contact)},showContactCtrlsPnl:function(){var that=this;this.controlsPanel.animate({width:"toggle"},{duration:250,complete:function(){that.bumberPanelLeft.hide()}})},showContactStatePnl:function(){(0===this.callDurationPnl.width()||IC_Validation.isNotNullOrUndefinedString(this.callDurationPnl.width()))&&(this.callDurationWidth=this.callDurationPnl.width()),"none"==this.bumberPanelLeft.css("display")&&(this.bumberPanelLeft.showfn(),this.controlsPanel.animate({width:"toggle"},{duration:250,specialEasing:{width:"linear",height:"easeOutBounce"}}))},closeContactCtrlsPnl:function(){this.showContactStatePnl()},updateCSS:function(contactInfo){var statusLocal,agentOverrideBadNumber,holdImgDisabled="/css/images/bumber-hold-disabled.png",holdImgEnabled="/css/images/bumber-hold.png",recordImg="/css/images/bumber-record.png",holdState="disabled",dropState="disabled",maskState="disabled",recordState="disabled",status=this.callStatusDesc(contactInfo.status),disconnectCode=contactInfo.disconnectCode,val1="",val2="",dialerInfoHideHt=23,showPreviewIcon=!1,that=this;if(this.valFieldCnt=0,IC_Validation.isNotNullOrUndefinedString(this.btnHolder)&&this.btnHolder.css({"padding-top":"5px"}),"NaturalCalling"===this.options.contact.type&&"Preview"===status&&(showPreviewIcon=!0),"Incoming"!==status&&"Disconnected"!==status){var mute=this.options.agentInfo.lgMuted;dropState="Holding"===status?"disabled":"Masking"===status?"disabled":!0===mute?"disabled":"enabled",updatePcCallOtherInfo(),"Dialing"!==status&&"Ringing"!==status&&"Preview"!==status&&"AMD"!==status&&(this.rightArrowPnl.showfn(),this.stopHoverSlide=!0,"Masking"===status?(maskState="selected",this.maskDiv.attr("title",IC_Localization.unmask),this.maskingFlag=!0,this.leftBumberMouseEnter()):("Joined"===status?maskState=!1:(maskState=!0===this.options.canMask?"enabled":"disabled",this.maskingFlag=!1),this.maskDiv.attr("title",IC_Localization.mask)),!0===contactInfo.logging?(recordState="selected",recordImg="/css/images/bumber-recording.gif",this.recordDiv.attr("title",IC_Localization.recordingInProgress)):(recordState="enabled",this.recordDiv.attr("title",IC_Localization.record)),"Holding"===status?(holdState="enabled",maskState="disabled",recordState="disabled",holdImgEnabled="/css/images/bumber-resume.png",holdImgDisabled="/css/images/bumber-resume-disabled.png",this.holdResumeDiv.attr("title",IC_Localization.resume)):("Joined"!==status&&"Masking"!==status&&(holdState="enabled"),this.holdResumeDiv.attr("title",IC_Localization.hold)))}function updatePcCallOtherInfo(){if("NaturalCalling"===that.options.contact.type||!0===that.forceUpdateNaturalCalling){if(that.dialerInfo1.text(""),that.dialerInfo2.text(""),0!==Object.keys(AgentConsoleDataStore.allSkillList).length){var skillList=AgentConsoleDataStore.allSkillList[contactInfo.skillId];IC_Validation.isValidObject(skillList)&&(agentOverrideBadNumber=skillList.agentOverrideBadNumber)}if("Ringing"===status&&!0===agentOverrideBadNumber?(that.drop.showfn(),IC_Validation.isNotNullOrUndefinedString(that.campPanel)&&that.campPanel.css("height",showPreviewIcon?"108px":"74px")):"AMD"===status?(that.fax.showfn(),that.machine.showfn(),that.drop.hide(),IC_Validation.isNotNullOrUndefinedString(that.campPanel)&&that.campPanel.css("height",showPreviewIcon?"108px":"74px")):(that.drop.hide(),that.fax.hide(),that.machine.hide(),IC_Validation.isNotNullOrUndefinedString(that.campPanel)&&that.campPanel.css("height",showPreviewIcon?"94px":"45px")),IC_Validation.isNotNullOrUndefinedString(contactInfo.otherInfo))try{var otherInfo={};otherInfo=IC_Common.getFormatOtherInfo(contactInfo.otherInfo),IC_Validation.isNotNullOrUndefinedString(otherInfo)&&(otherInfo.valueOne.length>0&&0==otherInfo.valueTwo.length&&!IC_Validation.isNotNullOrUndefinedString(otherInfo.valueTwo[1])&&(that.dialerInfo2.hide(),that.valTwo.hide(),that.btnHolder.css({"padding-top":"12px"}),that.campPanel.css("height",that.campPanel.height()+(showPreviewIcon?16:5)-dialerInfoHideHt+"px")),IC_Validation.isNotNullOrUndefinedString(otherInfo.valueOne[0])&&(that.valFieldCnt=1,val1=IC_Validation.isNotNullOrUndefinedString(IC_Localization[otherInfo.valueOne[0].toLowerCase()])?IC_Localization[otherInfo.valueOne[0].toLowerCase()]:otherInfo.valueOne[0],that.valOne.text(val1),that.valOne.attr("title",val1)),IC_Validation.isNotNullOrUndefinedString(otherInfo.valueTwo[0])&&(that.valFieldCnt+=1,val2=IC_Validation.isNotNullOrUndefinedString(IC_Localization[otherInfo.valueTwo[0].toLowerCase()])?IC_Localization[otherInfo.valueTwo[0].toLowerCase()]:otherInfo.valueTwo[0],that.valTwo.text(val2),that.valTwo.attr("title",val2)),that.dialerInfo1.text(otherInfo.valueOne[1]),IC_Common.setTextWithEllipsis(that.dialerInfo1,otherInfo.valueOne[1],80),that.dialerInfo2.text(otherInfo.valueTwo[1]),IC_Common.setTextWithEllipsis(that.dialerInfo2,otherInfo.valueTwo[1],80))}catch(ex){logger.error("Other Information Field: "+ex.message)}else that.valFieldCnt=2}}if("Disconnected"===status&&updatePcCallOtherInfo(),"Dialing"!=status&&"Ringing"!=status&&"AMD"!=status||(this.rightArrowPnl.showfn(),this.stopHoverSlide=!0),"NaturalCalling"===this.options.contact.type&&IC_Validation.isNotNullOrUndefinedString(this.callDispPnlPnl))if(showPreviewIcon)this.callDispPnlPnl.showfn(),this.callAcceptRejectPnl.showfn();else if(this.callDispPnlPnl.hide(),this.callAcceptRejectPnl.hide(),"Disconnected"==status&&"none"===this.fax.css("display")&&"none"===this.callAcceptRejectPnl.css("display")&&IC_Validation.isNotNullOrUndefinedString(this.campPanel)&&IC_Validation.isNotNullOrUndefinedString(this.controlsPanel)){var campPanelHeight=this.campPanel.height()-this.callAcceptRejectPnl.height();campPanelHeight>25&&(this.campPanel.css("height",campPanelHeight+"px"),this.drop.hide())}if(this.changeButtonState(this.holdResumeDiv,this.holdResumeImg,holdState,this.resourceBase+holdImgEnabled,this.resourceBase+holdImgDisabled),this.changeButtonState(this.dropDiv,this.dropImg,dropState,this.resourceBase+"/css/images/bumber-drop.png",this.resourceBase+"/css/images/bumber-drop-disabled.png"),this.changeButtonState(this.recordDiv,this.recordImg,recordState,this.resourceBase+recordImg,this.resourceBase+"/css/images/bumber-record-disabled.png"),this.changeButtonState(this.maskDiv,this.maskImg,maskState,this.resourceBase+"/css/images/bumber-mask.png",this.resourceBase+"/css/images/bumber-mask-disabled.png"),"selected"===recordState?(this.recordDiv.off("mouseenter mouseleave"),this.recordDiv.removeClass("btnDivSelect btnDivEnable btnDivHover").addClass("btnDivEnable"),this.contactRecording.showfn()):this.contactRecording.hide(),statusLocal=IC_Validation.isNotNullOrUndefinedString(this.contactStatusLocal[status])?this.contactStatusLocal[status]:status,"NaturalCalling"===this.options.contact.type||!0===this.forceUpdateNaturalCalling?this.contactStatus.text("NA"!=disconnectCode?this.getLocalizedDisconnectCode(contactInfo.disconnectCode):statusLocal):this.contactStatus.text("("+("NA"!=disconnectCode?this.getLocalizedDisconnectCode(contactInfo.disconnectCode):statusLocal)+")"),"Holding"===status||"Disconnected"===status?("Disconnected"===status&&IC_Validation.isNotNullOrEmpty(contactInfo.disconnectCode)&&"noports"===contactInfo.disconnectCode.toLowerCase()&&this.contactStatus.text("("+IC_Localization.noPorts+")"),this.contactStatus.removeClass("StatusIncomeDialing StatusActive").addClass("StatusHoldDisconnect"),this.bumberPanelLeft.removeClass("BumpPnlLeftGradientIncoming BumpPnlLeftGradientActive").addClass("BumpPnlLeftGradientHoldDiconnect"),this.bumberPanelRight.removeClass("BumpPnlRightGradientIncoming BumpPnlRightGradientActive").addClass("BumpPnlRightGradientHoldDisconnect")):"Incoming"===status||"Dialing"===status||"Ringing"===status||"Preview"===status?(this.contactStatus.removeClass("StatusActive StatusHoldDisconnect").addClass("StatusIncomeDialing"),this.bumberPanelLeft.removeClass("BumpPnlLeftGradientActive BumpPnlLeftGradientHoldDiconnect").addClass("BumpPnlLeftGradientIncoming"),this.bumberPanelRight.removeClass("BumpPnlRightGradientActive BumpPnlRightGradientHoldDisconnect").addClass("BumpPnlRightGradientIncoming")):(this.contactStatus.removeClass("StatusIncomeDialing StatusHoldDisconnect").addClass("StatusActive"),this.bumberPanelLeft.removeClass("BumpPnlLeftGradientIncoming BumpPnlLeftGradientHoldDiconnect").addClass("BumpPnlLeftGradientActive"),this.bumberPanelRight.removeClass("BumpPnlRightGradientIncoming BumpPnlRightGradientHoldDisconnect").addClass("BumpPnlRightGradientActive")),"CallContactEvent"==contactInfo.contactType&&("Regular"==contactInfo.type||"PersonalQueue"==contactInfo.type&&"REAGENT"!=contactInfo.ani)){var comminmentBtnState=0==contactInfo.finalState&&this.options.controller.hasOutBoundPhoneSkill()?"enabled":"disabled";this.changeButtonState(this.commitmentDiv,this.commitmentImg,comminmentBtnState,this.resourceBase+"/css/images/pin.png",this.resourceBase+"/css/images/pin-disabled.png")}else this.commitmentDiv.hide();this.contactStatusWidth=this.contactStatus.width(),this.bumberArrowShowHide()},getLocalizedDisconnectCode:function(disconnectCode){return this.disconnectedStatus.hasOwnProperty(disconnectCode)?this.disconnectedStatus[disconnectCode]:disconnectCode},callStatusDesc:function(callStatus){return"NaturalCalling"===callStatus?"Calling":"NaturalCallDialing"===callStatus?"Dialing":"NaturalCallAMD"===callStatus?"AMD":"NaturalCallRinging"===callStatus?"Ringing":callStatus},updateView:function(options){this.options.canRoundTopCorners=void 0!==typeof options.canRoundTopCorners&&options.canRoundTopCorners,this.options.canRoundBottomCorners=void 0!==typeof options.canRoundBottomCorners&&options.canRoundBottomCorners,this.setCornersCss()},changeButtonState:function(div,img,state,iconEnabled,iconDisabled){"enabled"===(state=state||"disabled")?IC_Common.enableButton(div,img,iconEnabled):"disabled"===state?IC_Common.disableButton(div,img,iconDisabled):"selected"===state&&IC_Common.selectButton(div,img,iconEnabled)},startContactDurationTimer:function(contactInfo){var that=this,timerId=this._agentStateTimerId+contactInfo.id;this.contactDuration=0,null!==this._timerLst[timerId]&&void 0!==this._timerLst[timerId]&&clearInterval(this._timerLst[timerId]),"Preview"===contactInfo.status&&this.pcDeliveryType.hasOwnProperty(contactInfo.deliveryType)?(this.lastServerTimeStamp=this.options.contact.lastStateTime,this.timeout=this.options.contact.timeout,this.isPreviewMode=!0):this.isPreviewMode=!1,this.contactDuration>=0&&(this._timerLst[timerId]=setInterval(function(){that.updateTimer(that.callDurationPnl,"contactDuration")},1e3),that.updateTimer(that.callDurationPnl,"contactDuration"))},startContactDurationInStateTimer:function(contactInfo){var that=this,timerId=this._durationStateTimerId+contactInfo.id;this.contactStateDuration=0,null!==this._timerLst[timerId]&&void 0!==this._timerLst[timerId]&&clearInterval(this._timerLst[timerId]),this.contactStateDuration>=0&&(this._timerLst[timerId]=setInterval(function(){that.updateTimer(that.contactStatusTime,"contactState")},1e3),that.updateTimer(that.contactStatusTime,"contactState"))},contactStatusEllipsis:function(){var statusAndTimePnlWidth=this.stausAndTimeHolder.width(),contactTimerWidth=this.contactStatusTime.width(),contactStatusWidth=this.contactStatusWidth,diffTimerWidth=statusAndTimePnlWidth-contactTimerWidth;contactStatusWidth+=10;"block"===this.contactRecording.css("display")&&(diffTimerWidth-=this.contactRecording.width()),contactStatusWidth>diffTimerWidth?this.contactStatus.css({width:diffTimerWidth-20+"px"}):contactStatusWidth>0&&this.contactStatus.css({width:"auto"})},timeDiff:function(contactStateTime){var ms=Math.abs(this.options.controller.getServerTimestamp()-contactStateTime);return Math.round(ms/1e3)},updateTimer:function(timerPnlObj,type){var calculatedTime=0;if("contactDuration"===type)this.contactDuration=this.timeDiff(this._contactInfo.time),this.contactTimerVal=this.contactDuration,this.contactTimerVal<345600?(this.contactTimerVal=this.contactTimerVal+1,this.contactDuration=this.contactTimerVal,calculatedTime=IC_Common.secondsToTime(this.contactTimerVal)):calculatedTime=">96 "+IC_Localization.hours,timerPnlObj.text(calculatedTime);else if("contactState"===type){if(!1===this.isPreviewMode)this.contactStateDuration=this.timeDiff(this._contactInfo.lastStateTime),this.contactStateTimerVal=this.contactStateDuration,this.contactStateTimerVal<345600?(this.contactStateTimerVal=this.contactStateTimerVal+1,this.contactStateDuration=this.contactStateTimerVal,calculatedTime=IC_Common.secondsToTime(this.contactStateTimerVal)):calculatedTime=">96 "+IC_Localization.hours;else{var diff=this.timeDiff(this.lastServerTimeStamp);(calculatedTime=this.timeout?this.timeout-diff:diff)<0&&(calculatedTime=0),calculatedTime=IC_Common.secondsToTime(calculatedTime)}timerPnlObj.text(calculatedTime)}var hours,contactDuration=this.contactTimerVal;IC_Validation.isNotNullOrUndefinedString(contactDuration)&&"number"==typeof contactDuration&&(hours=Math.floor(contactDuration/3600),contactDuration%60,(Math.floor(contactDuration/60)%60<=10&&0===hours||hours<=10)&&(this.calculateEllipsisSpace(this._contactInfo),this.contactStatusEllipsis()))},updateData:function(contactInfo){this._contactInfo=contactInfo,this.startContactDurationTimer(contactInfo),this.startContactDurationInStateTimer(contactInfo),this.calculateEllipsisSpace(contactInfo),this.updateCSS(contactInfo),"function"==typeof this.updateWorkItemData&&"WorkItemContactEvent"===contactInfo.contactType&&this.updateWorkItemData(contactInfo)},getContact:function(){return this._contactInfo},calculateEllipsisSpace:function(contactInfo){this.contactIDorNumberPnl.css("width","auto");var phoneNumber,callDurationWidth=0===this.callDurationPnl.width()?this.callDurationWidth:this.callDurationPnl.width(),name="",skillWith=0,skillScrollWidth=0;"Consult"!==contactInfo.type&&"PersonalQueue"!==contactInfo.type||!IC_Validation.isNotNullOrEmpty(contactInfo.consultAgentName)?"NaturalCalling"===contactInfo.type?(name=contactInfo.name,this.skillNamePnl.css("font-size","12px"),this.skillNamePnl.css("margin-left","6px")):name=contactInfo.skillName:name=contactInfo.consultAgentName,skillWith=this.skillNamePnl.css("width").replace("px",""),skillScrollWidth=this.skillNamePnl.prop("scrollWidth"),this.marqueeTime>0||skillWith<skillScrollWidth?this.marqueeTime<=60?0===this.marqueeTime?(this.skillNamePnl.html('<marquee title="'+name+'" behavior="alternate" scrollamount="1">&nbsp;&nbsp;&nbsp;'+name+"&nbsp;&nbsp;&nbsp;</marquee>"),++this.marqueeTime):++this.marqueeTime:IC_Common.setTextWithEllipsis(this.skillNamePnl,name,158,!0):this.skillNamePnl.text(name),callDurationWidth=156-parseInt(callDurationWidth),this.contactIDorNumberPnl.css("width",callDurationWidth+"px"),phoneNumber=contactInfo.inbound?contactInfo.ani:contactInfo.dnis,"NaturalCalling"!==this.options.contact.type&&!0!==this.forceUpdateNaturalCalling||IC_Validation.isNullOrEmpty(this.options.contact.name)||""===this.options.contact.name.trim()?(this.contactIDorNumberPnl.text(phoneNumber),this.contactIDorNumberPnl.attr("title",phoneNumber)):(this.phoneNumberPnl.text(IC_Common.phoneMask(phoneNumber)),this.contactIDorNumberPnl.text(this.options.contact.name),(skillWith=this.contactIDorNumberPnl.css("width").replace("px",""))<(skillScrollWidth=this.contactIDorNumberPnl.prop("scrollWidth"))&&this.contactIDorNumberPnl.attr("title",this.options.contact.name))},updateContactIndicator:function(contactIndicator){this.agentIndicatorPanel.indicator("updateData","contactId",this._contactInfo.id),this.agentIndicatorPanel.indicator("updateData","indicator",contactIndicator)},updatePermissionsList:function(data){var contactInfo=this._contactInfo,showRecord=!1,showMaskBtn=!1;if(IC_Validation.isNotNullOrEmptyArray(data))for(var i=0;i<data.length;i++)"recordcontact"===data[i].Key&&(this.recordDiv.showfn(),showRecord=!0,!0===contactInfo.logging&&(this.contactRecording.showfn(),this.recordDiv.off("mouseenter mouseleave"),this.recordDiv.removeClass("btnDivSelect btnDivEnable btnDivHover").addClass("btnDivEnable"))),"masking"===data[i].Key&&(this.maskDiv.showfn(),showMaskBtn=!0);showRecord||(this.recordDiv.hide(),this.contactRecording.hide()),showMaskBtn||this.maskDiv.hide(),this.bumberArrowShowHide()},resizeContentPanel:function(showIndicator){this.options.isPopout||this.options.controller.contactIndicatorResizeResult(showIndicator,this._contactInfo.id),!0===showIndicator?(this.agentIndicatorPanel.showfn(),this.statePanel.css({height:"72px"}),this.bumberPanelLeft.css({height:"70px"}),this.stateControlsPanel.css({height:"70px"}),this.controlsPanel.css({height:"72px"}),this.bumberPanelRight.css({height:"71px"}),this.contactControlsPanel.css({height:"70px"}),this.holdResumeDiv.css({"margin-top":"24px"}),this.dropDiv.css({"margin-top":"24px"}),this.maskDiv.css({"margin-top":"24px"}),this.recordDiv.css({"margin-top":"24px"}),this.commitmentDiv.css({"margin-top":"24px"}),IC_Validation.isValidObject(this.transferDiv)&&this.transferDiv.css({"margin-top":"24px"})):(this.agentIndicatorPanel.hide(),this.statePanel.css({height:"50px"}),this.bumberPanelLeft.css({height:"48px"}),this.stateControlsPanel.css({height:"48px"}),this.controlsPanel.css({height:"50px"}),this.bumberPanelRight.css({height:"48px"}),this.contactControlsPanel.css({height:"48px"}),this.holdResumeDiv.css({"margin-top":"14px"}),this.dropDiv.css({"margin-top":"14px"}),this.maskDiv.css({"margin-top":"14px"}),this.recordDiv.css({"margin-top":"14px"}),this.commitmentDiv.css({"margin-top":"14px"}),IC_Validation.isValidObject(this.transferDiv)&&this.transferDiv.css({"margin-top":"14px"}))},agentIndicatorAction:function(indicator){this.options.controller.agentIndicatorAction(indicator)},setCanMask:function(mask){this.options.canMask=mask},onMute:function(mute){var dropState=!0===mute?"disabled":"enabled";this.changeButtonState(this.dropDiv,this.dropImg,dropState,this.resourceBase+"/css/images/bumber-drop.png",this.resourceBase+"/css/images/bumber-drop-disabled.png")},notesChanged:function(){var obj=this.dispSelect.comboBox("getSelectedItem");IC_Validation.isValidObject(obj)&&IC_Validation.isNotNullOrUndefinedString(obj.id)&&(this.dispSelected=obj);var that=this;clearTimeout(this.notesChangedTimer),this.notesChangedTimer=setTimeout(function(){var obj=that.dispSelected,data={contactId:that._contactInfo.id,notes:that.notesTxt.val(),disp:obj,amt:that.amntValue.val()};that.options.controller.pcPreviewNotesUpdate(data,!0)},500)},updatePreviewNotes:function(data){IC_Validation.isValidObject(data)&&IC_Validation.isNotNullOrUndefinedString(data.disp)&&IC_Validation.isNotNullOrUndefinedString(this.dispSelect)&&(data.contactId===this._contactInfo.id?(this.dispSelected=data.disp,this.dispSelect.comboBox("setSelectedItem",{value:data.disp.value}),this.notesTxt.val(data.notes),this.amntPanel.toggle(data.disp.isAmount),IC_Validation.isNotNullOrUndefinedString(data.amt)&&data.amt!==this.DefaultAmntText?this.amntValue.val(data.amt).removeClass("dispComboText "):this.amntValue.val(this.DefaultAmntText).addClass("dispComboText ")):this.setDefaultText()),this.ondispositionSelected(!0)},rescheduleBtnClick:function(){this.options.controller.showRescheduleDateTime(this._contactInfo.id,this._contactInfo.dnis)},ondispositionSelected:function(isUpdate){var obj={},dispPnl=this.dispPnl.height();dispPnl-=this.headerPanel.outerHeight(!0)+(this.dispSelect?this.dispSelect.outerHeight(!0):0)+this.saveBtn.outerHeight(!0)+6,this.amntValue.css({border:"1px solid rgb(161, 161, 161)"}),isUpdate?(!IC_Validation.isNotNullOrUndefinedString(this.dispSelected)&&IC_Validation.isNotNullOrUndefinedString(this.dispSelect)&&this.dispSelect.comboBox("setSelectedItem",{value:this.DefaultDispText}),obj=this.dispSelected):IC_Validation.isNotNullOrUndefinedString(this.dispSelect)&&(obj=this.dispSelect.comboBox("getSelectedItem"),this.dispSelected=obj,this.amntValue.val(this.DefaultAmntText)),IC_Validation.isValidObject(obj)&&obj.isAmount&&(dispPnl-=20),this.dispAmountError.hide(),IC_Validation.isValidObject(obj)&&obj.isAmount?this.amntPanel.showfn():this.amntPanel.hide(),this.notesPnl.css({height:dispPnl+"px"}),this.notesTxt.css({height:dispPnl-6+"px"}),IC_Validation.isValidObject(obj)&&IC_Validation.isNotNullOrUndefinedString(this.dispSelect)&&this.notesChanged()},setDefaultText:function(){IC_Validation.isNotNullOrUndefinedString(this.dispSelect)&&this.dispSelect.comboBox("setSelectedItem",{value:this.DefaultDispText}),$("#"+this.dispDivId+" .txtSpn").addClass("dispComboText"),this.amntValue.val(this.DefaultAmntText),this.amntValue.addClass("dispComboText"),this.notesTxt.val("")},onAmntTxtChange:function(){this.amntValue.css({border:"1px solid rgb(161, 161, 161)"}),this.amntValue.val()===this.DefaultAmntText?(this.amntValue.val(""),this.amntValue.removeClass("dispComboText")):this.notesChanged(),this.ondispositionSelected(!0)},onAmntTextBlur:function(){""==this.amntValue.val()&&(this.amntValue.val(this.DefaultAmntText),this.amntValue.addClass("dispComboText"))},updateDispositions:function(dispositions,contactType){this.disposition=dispositions,this.populateDispositions()},populateDispositions:function(){var isAmount,primDisposition,i=0,filteredList=[];if(primDisposition=this.disposition.filter(function(item){return!0===item.isPreviewDisposition}),this.showDispositionValue=primDisposition.length>0,IC_Validation.isNotNullOrEmptyArray(primDisposition)){for(i=0;i<primDisposition.length;i++){isAmount=!1,IC_Validation.isNullOrEmpty(primDisposition[i].isAmount)||(isAmount=primDisposition[i].isAmount);var obj={id:primDisposition[i].id,value:primDisposition[i].name,order:primDisposition[i].order,isPreviewDisposition:primDisposition[i].isPreviewDisposition,isAmount:isAmount};filteredList.push(obj)}filteredList.sort(function(a,b){return a.order-b.order}),IC_Validation.isNotNullOrUndefinedString(this.dispSelect)&&this.dispSelect.comboBox("setStore",filteredList)}},acceptBtnClick:function(event){this.validatePhone()},validatePhone:function(){var pnumberTxt=$.trim(this.pnumberTxt.val().replace(/[`~!@#$%^&*()_|\-=?;:'",.<>\{\}\[\]\\\/\s]/gi,"")),status=!1;(this.pnumberTxt.css({border:"1px solid #a1a1a1"}),pnumberTxt.length>0)?"TenDigitDial"!==this._contactInfo.deliveryType?(status=!0,this.pnumberTxt.val(this._contactInfo.dnis)):pnumberTxt!==this._contactInfo.dnis?this.pnumberTxt.css({border:"1px solid #ff2929"}):status=!0:this.pnumberTxt.css({border:"1px solid #ff2929"});status&&this.options.controller.acceptContact(this._contactInfo.id)},rejectBtnClick:function(){this.options.controller.rejectContact(this._contactInfo.id),this.destroy()},snoozeBtnClick:function(){this.options.controller.snoozeContact(this._contactInfo.id),this.destroy()},saveDisposition:function(){var header,disposition,saveBtn,errorMsg,dispPnl,notesPnlMargin,obj=this.dispSelected;if(this.amntValue.css({border:"1px solid rgb(161, 161, 161)"}),IC_Validation.isValidObject(obj)){if(obj.isAmount&&!IC_Validation.isNumber(this.amntValue.val()))return this.dispAmountError.text(IC_Localization.enterTheAmount),void this.amntValue.css({border:"1px solid #ff0000"});this.amntValue.css({border:"1px solid rgb(161, 161, 161)"});var commitmentAmount=this.amntValue.val(),notesResult={disp:obj,secDisp:"",notes:this.notesTxt.val(),dispPayload:{isReschedule:!1,data:commitmentAmount}};this.options.controller.setDisposition(this._contactInfo.id,notesResult)}else this.dispAmountError.text(IC_Localization.error+": "+IC_Localization.selectTheDisposition),this.dispAmountError.showfn(),this.dispAmountError.css({clear:"left"}),header=this.headerPanel.outerHeight(!0),disposition=this.dispSelect.outerHeight(!0),errorMsg=this.dispAmountError.outerHeight(!0),saveBtn=this.saveBtn.outerHeight(!0),notesPnlMargin=6,dispPnl=this.dispPnl.height(),dispPnl-=header+disposition+errorMsg+saveBtn+notesPnlMargin,this.notesPnl.css({height:dispPnl+"px"}),this.notesTxt.css({height:dispPnl-notesPnlMargin+"px"})},resizePanel:function(isDialer){isDialer?(this.blendedHeight=0,this.ondispositionSelected(!0)):this.blendedHeight=30},isAgentIndicator:function(obj){return IC_Validation.isNotNullOrEmpty(obj)&&IC_Validation.isNotNullOrEmpty(obj.agentIndicator)?obj.agentIndicator.length:0},updatePanel:function(skillDetails){this.statePanel.height(),this.campPanel.height();var _dispPnlHeight,mediaTabsHeight=0;this.btnHolder.css({height:"24px"}),this.options.isPopout?this.dispPnl.css({height:"197px"}):(mediaTabsHeight=this.options.controller.mediaTabs(),_dispPnlHeight=this.options.controller.getContentPanelHeight()-30,_dispPnlHeight-=48,this.dispPnl.css({height:_dispPnlHeight-mediaTabsHeight+"px"})),skillDetails.prevDisposition&&this.showDispositionValue?(this.dispPnl.showfn(),this.ondispositionSelected(!0)):(this.dispPnl.hide(),this.campPanel.showfn()),this.btnHolder.showfn(),this.acceptDiv.showfn(),this.rejectDiv.toggle(skillDetails.prevRequeue),this.snoozeDiv.toggle(skillDetails.prevSnooze),this.rescheduleDiv.toggle(skillDetails.prevReschedule)},setCornerAfterCall:function(){this.bumberPanelLeft.addClass("TopLeftRound BottomLeftRound"),this.stateControlsPanel.addClass("TopRightRound BottomRightRound"),this.bumberPanelRight.addClass("TopRightRound BottomRightRound"),this.controlsPanel.addClass("TopLeftRound TopRightRound BottomLeftRound BottomRightRound"),this.contactControlsPanel.addClass("TopLeftRound BottomLeftRound")},destroy:function(){var that=this,contactId=that._contactInfo.id;this.dispSelect=null,!0!==this.stopDestroy&&(this.stopDestroy=!0,setTimeout(function(){logger.trace("ContactID: "+contactId," :contactInfo before"),null!==that._timerLst[that._agentStateTimerId+contactId]&&clearInterval(that._timerLst[that._agentStateTimerId+contactId]),null!==that._timerLst[that._durationStateTimerId+contactId]&&clearInterval(that._timerLst[that._durationStateTimerId+contactId]),that.element.slideUp(250,function(){that.options.controller.onContactDestroy(that._contactInfo,that);try{that.statePanel.remove(),that.controlsPanel.remove(),$(that).children().each(function(){IC_Common.discardElement(this)}),that.rootPanel.remove(),that.element.remove()}catch(ex){logger.error("destroy :",ex)}logger.trace("ContactID: "+contactId," :contactInfo after")})},3e3))}})}(jQuery);