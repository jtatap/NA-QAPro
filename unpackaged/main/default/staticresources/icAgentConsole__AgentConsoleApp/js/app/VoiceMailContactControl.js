!function($){var logger=IC_Common.getLogger("voiceMailContact");$.widget("AgentConsole.voiceMailContactPanel",{options:{controller:null,resourceBase:"",enableCallBack:!1},stopDestroy:!1,_init:function(){this.voiceMailStatusLocal={Active:IC_Localization.active,Discarded:IC_Localization.discarded,Resume:IC_Localization.resume,Incoming:IC_Localization.incoming,Holding:IC_Localization.holding}},_create:function(){this.resourceBase=this.options.resourceBase,this.root=this.createRootPanels(),this.root.appendTo(this.element),this.postCreate()},_agentStateTimerId:"Duration",_durationStateTimerId:"DurationInState",_timerLst:[],callDurationWidth:20,stopHoverSlide:!1,playPosition:0,paused:!1,totalDuration:0,playTimerHandle:null,postCreate:function(){},createRootPanels:function(){this.options;return this.voiceMailPanel=$('<div class="ChatPnl" />'),this.rootPanel=$('<div class="ctrlPanel"/>').appendTo(this.voiceMailPanel),this.voiceContentPanel=$('<div class="contentPnl"/>').appendTo(this.voiceMailPanel),this.contentPlayPnl=$('<div class="contentPlayPnl" id="vmContentPnl"/>').appendTo(this.voiceContentPanel),this.skillNameLabel=$('<div class="skillNameLabel"/>').appendTo(this.contentPlayPnl),this.voiceMailTimerDiv=$('<div class="voiceMailTimerDiv"/>').appendTo(this.contentPlayPnl),this.playButton=$('<div class="voicePlayBtn" id="vmPlayBtnId"/>').appendTo(this.contentPlayPnl),this.progressBarDiv=$("<div/>").appendTo(this.contentPlayPnl),this.statePanel=$('<div class="StatePnl" />'),this.bumberPanelLeft=$('<span class="BumperPnlLeft" id="vmBumberPanelLeftId"/>'),this.stateControlsPanel=$('<div class="StateCtrlPnl btnDivEnable" />'),this.mediaTypeImgPnlL=$('<img class="VoiceMailMediaType" src="'+this.resourceBase+'/css/images/vm-mediatype-icon.png" />'),this.rightArrowPnl=$('<img class="RightArrowInBumberBox" src="'+this.resourceBase+'/css/images/bumber-arrow-right.png" />'),this.rightArrowPnl.hide(),this.bumberPanelLeft.append(this.mediaTypeImgPnlL).append(this.rightArrowPnl),this.phoneAndDurationHolder=$('<div class="skillAndDurationPnl"/>'),this.phoneNumberPnl=$('<div class="ContactType" id="vmPhoneNumberTxtId"/>'),this.callDurationPnl=$('<div class="ContactTypeTime" align="right" />'),this.phoneAndDurationHolder.append(this.phoneNumberPnl).append(this.callDurationPnl),this.statusHolder=$('<div class="statusAndTimePnl"/>'),this.contactStatus=$('<div class="ContactStatus StatusActive textEllipsis" align="left" id="vmContactStatusId"/>'),this.statusHolder.append(this.contactStatus),this.stateControlsPanel.append(this.phoneAndDurationHolder).append(this.statusHolder),this.statePanel.append(this.bumberPanelLeft).append(this.stateControlsPanel),this.controlsPanel=$('<div class="ControlsPnl" id = "voicemailControlsPanelId"/>'),this.bumberPanelRight=$('<div class="BumperPnlRight" id="voicemailBumperPnlRightId"/>'),this.contactControlsPanel=$('<div class="ContactCtrlPnl" />'),this.mediaTypeImgPnlR=$('<img class="VoiceMailMediaType" src="'+this.resourceBase+'/css/images/vm-mediatype-icon.png"/>'),this.LeftArrowPnl=$('<img class="LeftArrowInBumberBox" src="'+this.resourceBase+'/css/images/bumber-arrow-left.png" />'),this.bumberPanelRight.append(this.mediaTypeImgPnlR).append(this.LeftArrowPnl),this.bumberLeftArrowIconDiv=$('<div id = "vmBumberLeftArrowDiv"/>'),this.bumberLeftArrowImg=$('<img class="LeftArrowInBumberPanel" src="'+this.resourceBase+'/css/images/bumber-arrow-left.png" />'),this.bumberLeftArrowIconDiv.css({display:"none"}),this.bumberLeftArrowIconDiv.append(this.bumberLeftArrowImg),this.transferDiv=$('<div class="btnBrRound5 VoiceControlBtn btnDivDisable" title="'+IC_Localization.transfer+'" align="center" id= "vmTransferDivId" />'),this.transferImg=$('<img src="'+this.resourceBase+'/css/images/bumber-workitem-transfer-disabled.png" class="ImgVoiceTransfer" />'),this.transferDiv.append(this.transferImg),this.transferDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.transferDiv.on("click",$.proxy(this.transferClick,this)),this.holdResumeDiv=$('<div class="btnBrRound5 VoiceControlBtn btnDivDisable" align="center" id="vmHoldResumeDivId"/>'),this.holdResumeDiv.attr("title",IC_Localization.hold),this.holdResumeImg=$('<img src="'+this.resourceBase+'/css/images/bumber-hold.png" class="ImgVoiceHold" />'),this.holdResumeDiv.append(this.holdResumeImg),this.holdResumeDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.holdResumeDiv.on("click",$.proxy(this.holdResumeClick,this)),this.returnCallDiv=$('<div class="btnBrRound5 VoiceControlBtn btnDivDisable" title="'+IC_Localization.returnCall+'" align="center" id= "vmReturnCallDivId" />'),this.returnCallImg=$('<img src="'+this.resourceBase+'/css/images/hp-sm-phone-disabled.png" class="ImgVoiceReturnCall" />'),this.returnCallDiv.append(this.returnCallImg),this.returnCallDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.returnCallDiv.on("click",$.proxy(this.returnCallResumeClick,this)),this.discardDiv=$('<div class="btnBrRound5 VoiceControlBtn btnDivDisable" align="center" id= "vmDiscardDivId" />'),this.discardDiv.attr("title",IC_Localization.discard),this.discardImg=$('<img src="'+this.resourceBase+'/css/images/bumber-drop-disabled.png" class="ImgVoiceDiscard" />'),this.discardDiv.append(this.discardImg),this.discardDiv.hoverfn(IC_Common.mouseEnterButton,IC_Common.mouseLeaveButton),this.discardDiv.on("click",$.proxy(this.discardClick,this)),this.bumberRightArrowIconDiv=$('<div id = "vmBumberRightArrowDiv"/>'),this.bumberRightArrowImg=$('<img class="RightArrowInBumberPanel" src="'+this.resourceBase+'/css/images/bumber-arrow-right.png" />'),this.bumberRightArrowIconDiv.append(this.bumberRightArrowImg),this.contactControlsPanel.append(this.transferDiv).append(this.holdResumeDiv).append(this.returnCallDiv).append(this.discardDiv),this.contactControlsPanelSlide=$('<div id = "controlsPanelSlide"/>'),this.contactControlsPanelSlide.append(this.contactControlsPanel),this.controlsPanel.append(this.bumberPanelRight).append(this.bumberLeftArrowIconDiv).append(this.contactControlsPanelSlide).append(this.bumberRightArrowIconDiv),this.rootPanel.append(this.statePanel).append(this.controlsPanel),this.setCornersCss(),this.bumberPanelRight.on("click",$.proxy(this.rightBumberClick,this)),this.bumberPanelRight.on("mouseenter",$.proxy(this.rightBumberMouseEnter,this)),this.bumberPanelRight.on("mouseleave",$.proxy(this.rightBumberMouseLeave,this)),this.contactStatus.on("click",$.proxy(this.statePnlClick,this)),this.bumberPanelLeft.on("click",$.proxy(this.leftBumberClick,this)),this.bumberPanelLeft.on("mouseover",$.proxy(this.leftBumberMouseEnter,this)),this.controlsPanel.on("mouseleave",$.proxy(this.ctrsPnlClickMouseLeave,this)),this.contactControlsPanel.on("click",$.proxy(this.ctrsPnlClick,this)),this.contactControlsPanel.on("mouseleave",$.proxy(this.ctrsPnlMouseLeave,this)),this.bumberLeftArrowIconDiv.on("click",$.proxy(this.bumberPanelLeftSlide,this)),this.bumberRightArrowIconDiv.on("click",$.proxy(this.bumberPanelRightSlide,this)),this.playButton.on("click",$.proxy(this.voiceMailPlayButtonClick,this)),this.voiceMailPanel},setCornersCss:function(){this.bumberPanelLeft.addClass("TopLeftRound"),this.stateControlsPanel.addClass("TopRightRound"),this.controlsPanel.addClass("TopLeftRound TopRightRound"),this.bumberPanelRight.addClass("TopRightRound"),this.contactControlsPanel.addClass("TopLeftRound")},holdResumeClick:function(e){e.stopPropagation(),e.preventDefault();(IC_Common.isButtonEnabled(this.holdResumeDiv)||IC_Common.isButtonSelected(this.holdResumeDiv))&&("Holding"===this._contactInfo.status?(this.options.controller.resumeVoiceMailContact(this._contactInfo),this.changeButtonState(this.holdResumeDiv,this.holdResumeImg,"disabled",this.resourceBase+"/css/images/bumber-resume.png",this.resourceBase+"/css/images/bumber-resume-disabled.png")):"Active"===this._contactInfo.status&&(this.options.controller.holdContact(this._contactInfo.id),this.changeButtonState(this.holdResumeDiv,this.holdResumeImg,"disabled",this.resourceBase+"/css/images/bumber-hold.png",this.resourceBase+"/css/images/bumber-hold-disabled.png")))},transferClick:function(e){e.stopPropagation(),e.preventDefault(),(IC_Common.isButtonEnabled(this.transferDiv)||IC_Common.isButtonSelected(this.transferDiv))&&this.options.controller.onVoiceMailTransfer(this._contactInfo.id)},leftBumberClick:function(){!0===this.stopHoverSlide&&this.showContactCtrlsPnl()},rightBumberClick:function(){!0===this.stopHoverSlide&&this.showContactStatePnl()},bumberPanelLeftSlide:function(){var right=parseInt(this.contactControlsPanel.css("right").replace("px",""));right>0&&(right-=30,this.contactControlsPanel.animate({right:right+"px"},100)),0==right?this.bumberLeftArrowIconDiv.css({display:"none"}):this.bumberLeftArrowIconDiv.css({display:"block"}),right>=0&&this.bumberRightArrowIconDiv.css({display:"block"})},bumberPanelRightSlide:function(){var numOfIcons=this.contactControlsPanel.find('div:not([style*="display: none"])').length,right=parseInt(this.contactControlsPanel.css("right").replace("px","")),diff=23*numOfIcons-92;right<=diff&&(right+=30,this.contactControlsPanel.animate({right:right+"px"},100)),right>diff&&this.bumberRightArrowIconDiv.css({display:"none"}),0==right?this.bumberLeftArrowIconDiv.css({display:"none"}):this.bumberLeftArrowIconDiv.css({display:"block"})},leftBumberMouseEnter:function(){if(!0===this.stopHoverSlide){this.bumberPanelLeft.addClass("bumperBoxHover").removeClass("BumberPnlLeft");"block"!=this.bumberPanelLeft.css("display")&&"inline"!=this.bumberPanelLeft.css("display")||!1===this.leftBumberMouseFlag||(this.leftBumberMouseFlag=!1,this.controlsPanel.animate({width:"toggle"},{duration:250,specialEasing:{width:"linear",height:"easeOutBounce"}}))}},ctrsPnlClickMouseLeave:function(){if(!0!==this.maskingFlag&&!0!==this.rightBumberMouseFlag&&!0===this.stopHoverSlide){this.bumberPanelLeft.removeClass("bumperBoxHover").addClass("BumberPnlLeft");"block"!=this.controlsPanel.css("display")&&"inline"!=this.controlsPanel.css("display")||!1!==this.leftBumberMouseFlag||(this.leftBumberMouseFlag=!0,this.bumberPanelLeft.showfn(),this.controlsPanel.animate({width:"toggle"},{duration:250,specialEasing:{width:"linear",height:"easeOutBounce"}}))}},ctrsPnlMouseLeave:function(){this.rightBumberMouseFlag=!1},rightBumberMouseEnter:function(){this.bumberPanelRight.addClass("bumperBoxHoverSelected")},rightBumberMouseLeave:function(){this.bumberPanelRight.removeClass("bumperBoxHoverSelected"),this.rightBumberMouseFlag=!0},statePnlClick:function(){this.showContactCtrlsPnl()},ctrsPnlClick:function(e){e.stopPropagation()},showContactCtrlsPnl:function(){var that=this;this.controlsPanel.animate({width:"toggle"},{duration:250,complete:function(){that.bumberPanelLeft.hide()}})},showContactStatePnl:function(){(0===this.callDurationPnl.width()||IC_Validation.isNotNullOrUndefinedString(this.callDurationPnl.width()))&&(this.callDurationWidth=this.callDurationPnl.width()),"none"==this.bumberPanelLeft.css("display")&&(this.bumberPanelLeft.showfn(),this.controlsPanel.animate({width:"toggle"},{duration:250,specialEasing:{width:"linear",height:"easeOutBounce"}}))},updateCSS:function(contactInfo){var transferState="disabled",discardState="disabled",returnCallState="disabled",holdResumeState="disabled",status=contactInfo.status,holdResumeImgEnabled="/css/images/bumber-hold.png",holdResumeImgDisabled="/css/images/bumber-hold-disabled.png",that=this;this.voiceMainPanelHt=100,this.totalDuration=IC_Common.toNumber(this._contactInfo.fileDuration),"Incoming"!==status?(this.voiceMailPanel.css("height",this.voiceMainPanelHt+"px"),"Holding"!==status&&"Discarded"!==status&&(discardState="enabled"),this.rightArrowPnl.showfn(),this.stopHoverSlide=!0,"Active"===status?(holdResumeImgEnabled="/css/images/bumber-hold.png",holdResumeImgDisabled="/css/images/bumber-hold-disabled.png",this.playButton.removeClass("voicePlayBtnDisable"),transferState="enabled",holdResumeState="enabled",returnCallState=this.options.enableCallBack?"enabled":"disabled",this.returnCallDiv.attr("title",IC_Localization.returnCall),this.holdResumeDiv.attr("title",IC_Localization.hold)):"Holding"===status&&(holdResumeImgEnabled="/css/images/bumber-resume.png",holdResumeImgDisabled="/css/images/bumber-resume-disabled.png",returnCallState="disabled",holdResumeState="enabled",this.holdResumeDiv.attr("title",IC_Localization.resume),this.playButton.addClass("voicePlayBtnDisable")),"enabled",this.playButton.showfn()):this.playButton.hide(),this.changeButtonState(this.discardDiv,this.discardImg,discardState,this.resourceBase+"/css/images/bumber-drop.png",this.resourceBase+"/css/images/bumber-drop-disabled.png"),this.changeButtonState(this.transferDiv,this.transferImg,transferState,this.resourceBase+"/css/images/bumber-workitem-transfer.png",this.resourceBase+"/css/images/bumber-workitem-transfer-disabled.png"),this.changeButtonState(this.returnCallDiv,this.returnCallImg,returnCallState,this.resourceBase+"/css/images/hp-sm-phone.png",this.resourceBase+"/css/images/hp-sm-phone-disabled.png"),this.changeButtonState(this.holdResumeDiv,this.holdResumeImg,holdResumeState,this.resourceBase+holdResumeImgEnabled,this.resourceBase+holdResumeImgDisabled),this.contactStatus.removeClass("BumpPnlLeftGradientIncoming BumpPnlLeftGradientActive BumpPnlLeftGradientHoldDiconnect"),this.statusColor(status),"Incoming"!==status&&(this.progressBarDiv.slider({range:"min",value:that.playPosition,max:that.totalDuration,stop:function(event,ui){that.playPosition=ui.value;var contactId=that._contactInfo.id;that.playPosition=that.totalDuration>that.playPosition?that.playPosition:0,that.voiceMailTimerDiv.text(IC_Common.secondsToTime(that.playPosition)+" / "+IC_Common.secondsToTime(that.totalDuration)),that.paused||that.options.controller.playVoiceMail(!1,that.playPosition,contactId)},slide:function(event,ui){that.voiceMailTimerDiv.text(IC_Common.secondsToTime(ui.value)+" / "+IC_Common.secondsToTime(that.totalDuration))}}),$(this.progressBarDiv).children(".ui-slider-handle").css("display","none")),this.voiceMailTimerDiv.text(IC_Common.secondsToTime(this.playPosition)+" / "+IC_Common.secondsToTime(this.totalDuration)),"Discarded"!==status&&"Disconnected"!==status||(this.clearPlayTimer(),this.playButton.removeClass("voicePauseBtn"),this.playButton.addClass("voicePlayBtn voicePlayBtnDisable"),this.playButton.off("click"),this.progressBarDiv.slider("disable"));var visibleBumperArrowIcons=this.contactControlsPanel.find('div:not([style*="display: none"])').length;displayIcons=4,right=parseInt(this.contactControlsPanel.css("right").replace("px","")),diff=23*visibleBumperArrowIcons-23*displayIcons,visibleBumperArrowIcons<=4||right>diff?this.bumberRightArrowIconDiv.css({display:"none"}):this.bumberRightArrowIconDiv.css({display:"block"});var panelWidth=35*visibleBumperArrowIcons;this.contactControlsPanel.css({width:panelWidth+"px"})},disableResultsNotes:function(){},hideVMControlPnl:function(){hideVMPlayHt=26,voiceMainPanelHt=this.voiceMainPanelHt-hideVMPlayHt,this.voiceMailPanel.css("height",voiceMainPanelHt+"px"),this.contentPlayPnl.css("height","12px"),this.playButton.hide(),this.progressBarDiv.hide()},showVMControlPnl:function(){(this.voiceMailPanel.css("height",this.voiceMainPanelHt+"px"),this.contentPlayPnl.css("height","38px"),IC_Validation.isNotNullOrEmpty(this._contactInfo)&&IC_Validation.isNotNullOrEmpty(this._contactInfo.status))&&("Incoming"!==this._contactInfo.status&&(this.playButton.showfn(),this.progressBarDiv.showfn()))},getVoiceMailPanelHeight:function(){return this.voiceMainPanelHt},voiceMailPlayButtonClick:function(){var position=this.playPosition,contactId=this._contactInfo.id;this.playButton.hasClass("voicePlayBtn")&&!this.playButton.hasClass("voicePlayBtnDisable")?(this.playButton.addClass("voicePlayBtnDisable"),position=this.totalDuration>position?position:0,this.options.controller.playVoiceMail(!1,position,contactId)):this.playButton.hasClass("voicePauseBtn")&&!this.playButton.hasClass("voicePlayBtnDisable")&&(this.playButton.addClass("voicePlayBtnDisable"),this.options.controller.pauseVoiceMail(contactId))},updateVoiceMailPlayBackData:function(voiceMailPlayBackObj){this.voiceMailPlayBackObj=voiceMailPlayBackObj;if(IC_Validation.isNotNull(voiceMailPlayBackObj)){this.paused=voiceMailPlayBackObj.isPaused;var elapsed=this.timeDiff(voiceMailPlayBackObj.startTime),position=voiceMailPlayBackObj.position;if(this.clearPlayTimer(),IC_Validation.isNotNullOrEmpty(this._contactInfo)&&IC_Validation.isNotNullOrEmpty(this._contactInfo.status)){var status=this._contactInfo.status;this.playPosition="Discarded"===status||"Disconnected"===status?this.playPosition:this.paused&&-1===position?0:this.paused?position:position+elapsed,this.progressBarDiv.slider({value:this.playPosition}),"Discarded"!==status&&"Disconnected"!==status&&this.updateProgress()}}},updateProgress:function(){var that=this,position=this.paused?this.playPosition:this.playPosition++;this.playButton.removeClass("voicePlayBtnDisable"),!1===this.paused?(this.playButton.removeClass("voicePlayBtn"),this.playButton.addClass("voicePauseBtn").attr("title",IC_Localization.pause)):(this.playButton.removeClass("voicePauseBtn"),this.playButton.addClass("voicePlayBtn").attr("title",IC_Localization.play)),this.progressBarDiv.slider({value:position}),this.voiceMailTimerDiv.text(IC_Common.secondsToTime(position)+" / "+IC_Common.secondsToTime(this.totalDuration)),this.paused||this.playPosition<this.totalDuration&&(that.playTimerHandle=setTimeout(function(){that.updateProgress()},1e3))},clearPlayTimer:function(){IC_Validation.isNotNull(this.playTimerHandle)&&clearTimeout(this.playTimerHandle)},statusColor:function(status){"Holding"===status||"Discarded"===status||"Disconnected"===status?(this.contactStatus.removeClass("StatusIncomeDialing StatusActive").addClass("StatusHoldDisconnect").addClass("BumpPnlLeftGradientHoldDiconnect"),this.bumberPanelLeft.removeClass("BumpPnlLeftGradientIncoming BumpPnlLeftGradientActive").addClass("BumpPnlLeftGradientHoldDiconnect"),this.bumberPanelRight.removeClass("BumpPnlRightGradientIncoming BumpPnlRightGradientActive").addClass("BumpPnlRightGradientHoldDisconnect")):"Incoming"===status?(this.contactStatus.removeClass("StatusActive StatusHoldDisconnect").addClass("StatusIncomeDialing").addClass("BumpPnlLeftGradientIncoming"),this.bumberPanelLeft.removeClass("BumpPnlLeftGradientActive BumpPnlLeftGradientHoldDiconnect").addClass("BumpPnlLeftGradientIncoming"),this.bumberPanelRight.removeClass("BumpPnlRightGradientActive BumpPnlRightGradientHoldDisconnect").addClass("BumpPnlRightGradientIncoming")):(this.contactStatus.removeClass("StatusIncomeDialing StatusHoldDisconnect").addClass("StatusActive").addClass("BumpPnlLeftGradientActive"),this.bumberPanelLeft.removeClass("BumpPnlLeftGradientIncoming BumpPnlLeftGradientHoldDiconnect").addClass("BumpPnlLeftGradientActive"),this.bumberPanelRight.removeClass("BumpPnlRightGradientIncoming BumpPnlRightGradientHoldDisconnect").addClass("BumpPnlRightGradientActive")),this.contactStatusWidth=this.contactStatus.width()},updateView:function(options){this.setCornersCss()},changeButtonState:function(div,img,state,iconEnabled,iconDisabled){"enabled"===(state=state||"disabled")?IC_Common.enableButton(div,img,iconEnabled):"disabled"===state?IC_Common.disableButton(div,img,iconDisabled):"selected"===state&&IC_Common.selectButton(div,img,iconEnabled)},startContactDurationTimer:function(contactInfo){var that=this,timerId=this._agentStateTimerId+contactInfo.id;this.contactDuration=0,null!==this._timerLst[timerId]&&void 0!==this._timerLst[timerId]&&clearInterval(this._timerLst[timerId]),this.contactDuration>=0&&(this._timerLst[timerId]=setInterval(function(){that.updateTimer(that.callDurationPnl,"contactDuration")},1e3),that.updateTimer(that.callDurationPnl,"contactDuration"))},timeDiff:function(contactStateTime){var ms=Math.abs(this.options.controller.getServerTimestamp()-contactStateTime);return Math.round(ms/1e3)},updateTimer:function(timerPnlObj,type){var calculatedTime=0;"contactDuration"===type&&(this.contactDuration=this.timeDiff(this._contactInfo.time),this.contactTimerVal=this.contactDuration,this.contactTimerVal<345600?(this.contactTimerVal=this.contactTimerVal+1,this.contactDuration=this.contactTimerVal,calculatedTime=IC_Common.secondsToTime(this.contactTimerVal)):calculatedTime=">96 "+IC_Localization.hours,timerPnlObj.text(calculatedTime));var hours,contactDuration=this.contactTimerVal;IC_Validation.isNotNullOrUndefinedString(contactDuration)&&"number"==typeof contactDuration&&(hours=Math.floor(contactDuration/3600),contactDuration%60,(Math.floor(contactDuration/60)%60<=10&&0===hours||hours<=10)&&this.calculateEllipsisSpace(this._contactInfo))},calculateEllipsisSpace:function(contactInfo){this.phoneNumberPnl.css("width","auto");var phonePnlWidth,callDurationWidth=0===this.callDurationPnl.width()?this.callDurationWidth:this.callDurationPnl.width();callDurationWidth=128-parseInt(callDurationWidth),this.phoneNumberPnl.text(contactInfo.from),phonePnlWidth=(phonePnlWidth=this.phoneNumberPnl.css("width")).replace("px",""),this.phoneNumberPnl.css("width",callDurationWidth+"px"),phonePnlWidth>=callDurationWidth&&(this.phoneNumberPnl.addClass("textEllipsis"),this.phoneNumberPnl.attr("title",contactInfo.from))},updateData:function(contactInfo){this._contactInfo=contactInfo,this.startContactDurationTimer(contactInfo),this.calculateEllipsisSpace(contactInfo);var statusLocal=IC_Validation.isNotNullOrUndefinedString(this.voiceMailStatusLocal[contactInfo.status])?this.voiceMailStatusLocal[contactInfo.status]:contactInfo.status;this.contactStatus.text(statusLocal),this.skillNameLabel.text(contactInfo.skillName),this.textMask(this.skillNameLabel,this.skillNameLabel.text(),110),this.updateCSS(contactInfo)},textMask:function(objName,text,limit){$("#renderTextSize").text(text),objName.attr("title",""),objName.addClass("textEllipsis"),$("#renderTextSize").width()>limit&&objName.attr("title",text),$("#renderTextSize").text("")},getContact:function(){return this._contactInfo},enableDisbleBtnOnTransfer:function(isTransferClicked){var transferState="enabled";isTransferClicked&&(transferState="disabled","disabled"),this.changeButtonState(this.transferDiv,this.transferImg,transferState,this.resourceBase+"/css/images/bumber-workitem-transfer.png",this.resourceBase+"/css/images/bumber-workitem-transfer-disabled.png")},enableDisableCallBack:function(enableCallBack){var returnCallState="disabled";enableCallBack&&(returnCallState="enabled"),"Active"===this._contactInfo.status&&this.changeButtonState(this.returnCallDiv,this.returnCallImg,returnCallState,this.resourceBase+"/css/images/hp-sm-phone.png",this.resourceBase+"/css/images/hp-sm-phone-disabled.png")},updateContactIndicator:function(contactIndicator){this.agentIndicatorPanel.indicator("updateData","contactId",this._contactInfo.id),this.agentIndicatorPanel.indicator("updateData","indicator",contactIndicator)},resizeContentPanel:function(showIndicator){this.options.controller.contactIndicatorResizeResult(showIndicator,this._contactInfo.id),!0===showIndicator?(this.agentIndicatorPanel.showfn(),this.statePanel.css({height:"70px"}),this.bumberPanelLeft.css({height:"70px"}),this.stateControlsPanel.css({height:"70px"}),this.controlsPanel.css({height:"72px"}),this.bumberPanelRight.css({height:"71px"}),this.contactControlsPanel.css({height:"70px"}),this.transferDiv.css({"margin-top":"24px"}),this.discardDiv.css({"margin-top":"24px"}),this.returnCallDiv.css({"margin-top":"24px"})):this.agentIndicatorPanel.hide()},agentIndicatorAction:function(indicator){this.options.controller.agentIndicatorAction(indicator)},returnCallResumeClick:function(e){e.stopPropagation(),e.preventDefault();resumeImgDisabled="/css/images/bumber-resume-disabled.png",resumeImgEnabled="/css/images/bumber-resume.png",(IC_Common.isButtonEnabled(this.returnCallDiv)||IC_Common.isButtonSelected(this.returnCallDiv))&&"Active"===this._contactInfo.status&&(this.options.controller.callBackVoiceMailContact(this._contactInfo),this.changeButtonState(this.returnCallDiv,this.returnCallImg,"disabled",this.resourceBase+"/css/images/hp-sm-phone.png",this.resourceBase+"/css/images/hp-sm-phone-disabled.png"))},discardClick:function(e){(IC_Common.isButtonEnabled(this.discardDiv)||IC_Common.isButtonSelected(this.discardDiv))&&("Holding"===this._contactInfo.status?(e.stopPropagation(),e.preventDefault()):(this.options.controller.endContact(this._contactInfo.id),this.showContactStatePnl()))},setCornerAfterCall:function(){IC_Validation.isNotNullOrUndefinedString(this.contentPlayPnl)&&this.contentPlayPnl.addClass("BottomLeftRound BottomRightRound")},destroy:function(){var that=this,contactId=that._contactInfo.id;!0!==this.stopDestroy&&(this.stopDestroy=!0,setTimeout(function(){logger.trace("ContactID: "+contactId," :contactInfo before"),null!==that._timerLst[that._agentStateTimerId+contactId]&&clearInterval(that._timerLst[that._agentStateTimerId+contactId]),null!==that._timerLst[that._durationStateTimerId+contactId]&&clearInterval(that._timerLst[that._durationStateTimerId+contactId]),that.element.slideUp(250,function(){that.options.controller.onContactDestroy(that._contactInfo,that);try{that.statePanel.remove(),that.controlsPanel.remove(),$(that).children().each(function(){IC_Common.discardElement(this)}),that.rootPanel.remove(),that.element.remove()}catch(ex){logger.error("destroy :",ex)}logger.trace("ContactID: "+contactId," :contactInfo after")})},3e3))},getPlayPosition:function(){return this.playPosition},setPlayPosition:function(duration){this.playPosition=duration,this.voiceMailTimerDiv.text(IC_Common.secondsToTime(this.playPosition)+" / "+IC_Common.secondsToTime(this.totalDuration))}})}(jQuery);