!function($){$.widget("AgentConsole.indicator",{options:{container:null,resourceBase:"",isContact:!1,contactId:""},_init:function(){},agentIndicator:[],contactIds:{},isIndicatorShown:!1,cHeight:24,showIndicatorOpen:!1,_create:function(){var that=this;this.resourceBase=this.options.resourceBase,this.content=$('<div class="indicatorContent" />').appendTo(this.element),!1===this.options.isContact&&this.content.addClass("bgBodyGradient"),this.content.hoverfn(function(event){var indicatorCount=event.currentTarget.childElementCount;if(!1===that.options.isContact)that.cHeight>30&&that.content.animate({height:that.cHeight+"px"},"slow");else if(indicatorCount>6){var indicatorHeight=indicatorCount%6==0?indicatorCount/6*25:25*Math.floor(indicatorCount/6)+25;that.content.addClass("bgBodyGradient"),that.content.addClass("border"),that.content.addClass("zindex"),that.content.animate({height:indicatorHeight+"px"},"slow")}},function(){that.content.animate({height:"24px"},"slow",function(){!0===that.options.isContact&&(that.content.removeClass("bgBodyGradient"),that.content.removeClass("border"),that.content.removeClass("zindex"))})})},updateData:function(type,data){var len;if("contactId"===type)this.options.contactId=data;else if("contact"===type){len=data.length,this.contactIds={};for(var i=0;i<len;i++)this.contactIds[data[i].id]=!0}else if("indicator"===type){var indicator,indicatorDiv,indicatorImg;len=data.length,this.agentIndicator=[];for(i=0;i<len;i++)!0===(indicator=data[i]).enable&&(!0===this.options.isContact?IC_Validation.isValidURL(data[i].img)&&(IC_Validation.isNullOrEmpty(indicator.contactID)||this.options.contactId===indicator.contactID)&&this.agentIndicator.push(indicator):this.agentIndicator.push(indicator));this.content.empty(),this.content.css({height:"auto"});for(i=0;i<this.agentIndicator.length;i++)IC_Validation.isValidURL(this.agentIndicator[i].img)?(indicatorDiv=$('<div class="indicatorDiv" />').appendTo(this.content),(indicatorImg=$('<img class="indicatorImg" src="'+this.agentIndicator[i].img+'" />').appendTo(indicatorDiv)).attr("title",this.agentIndicator[i].toolTip),indicatorImg.attr("data-value",JSON.stringify(this.agentIndicator[i])),indicatorImg.on("click",$.proxy(this.onIndicatorClick,this))):!0!==this.options.isContact&&((indicatorDiv=$('<div class="indicatorDiv" />').appendTo(this.content)).css({width:"auto",height:"auto"}),(indicatorImg=$('<div class="indicatorText" />').text(this.agentIndicator[i].img).appendTo(indicatorDiv)).attr("title",this.agentIndicator[i].toolTip),indicatorImg.attr("data-value",JSON.stringify(this.agentIndicator[i])),indicatorImg.on("click",$.proxy(this.onIndicatorClick,this)));this.agentIndicator.length>0?!1===this.isIndicatorShown&&(this.options.container.resizeContentPanel(!0),this.isIndicatorShown=!0):!0===this.isIndicatorShown&&(this.options.container.resizeContentPanel(!1),this.isIndicatorShown=!1),this.cHeight=this.content.height(),this.content.css({height:"24px"})}},getIndicatorShown:function(){return this.isIndicatorShown},onIndicatorClick:function(event){var selectedValue=event.target.getAttribute("data-value"),indicator=IC_Common.parseJSON(selectedValue);this.options.container.agentIndicatorAction(indicator)},updateView:function(){},destroy:function(){}})}(jQuery);