!function($){$.extend(!0,window,{Slick:{RowSelectionModel:function(options){var _grid,_inHandler,_options,_ranges=[],_self=this,_handler=new Slick.EventHandler,_defaults={selectActiveRow:!0};function wrapHandler(handler){return function(){_inHandler||(_inHandler=!0,handler.apply(this,arguments),_inHandler=!1)}}function rangesToRows(ranges){for(var rows=[],i=0;i<ranges.length;i++)for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++)rows.push(j);return rows}function rowsToRanges(rows){for(var ranges=[],lastCell=_grid.getColumns().length-1,i=0;i<rows.length;i++)ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));return ranges}function getSelectedRows(){return rangesToRows(_ranges)}function setSelectedRanges(ranges){(_ranges&&0!==_ranges.length||ranges&&0!==ranges.length)&&(_ranges=ranges,_self.onSelectedRangesChanged.notify(_ranges))}function handleActiveCellChange(e,data){_options.selectActiveRow&&null!=data.row&&setSelectedRanges([new Slick.Range(data.row,0,data.row,_grid.getColumns().length-1)])}function handleKeyDown(e){var activeRow=_grid.getActiveCell();if(_grid.getOptions().multiSelect&&activeRow&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.which==Slick.keyCode.UP||e.which==Slick.keyCode.DOWN)){var selectedRows=getSelectedRows();selectedRows.sort(function(x,y){return x-y}),selectedRows.length||(selectedRows=[activeRow.row]);var active,top=selectedRows[0],bottom=selectedRows[selectedRows.length-1];if((active=e.which==Slick.keyCode.DOWN?activeRow.row<bottom||top==bottom?++bottom:++top:activeRow.row<bottom?--bottom:--top)>=0&&active<_grid.getDataLength())_grid.scrollRowIntoView(active),setSelectedRanges(rowsToRanges(function(from,to){var i,rows=[];for(i=from;i<=to;i++)rows.push(i);for(i=to;i<from;i++)rows.push(i);return rows}(top,bottom)));e.preventDefault(),e.stopPropagation()}}function handleClick(e){var cell=_grid.getCellFromEvent(e);if(!cell||!_grid.canCellBeActive(cell.row,cell.cell))return!1;if(!_grid.getOptions().multiSelect||!e.ctrlKey&&!e.shiftKey&&!e.metaKey)return!1;var selection=rangesToRows(_ranges),idx=$.inArray(cell.row,selection);if(-1===idx&&(e.ctrlKey||e.metaKey))selection.push(cell.row),_grid.setActiveCell(cell.row,cell.cell);else if(-1!==idx&&(e.ctrlKey||e.metaKey))selection=$.grep(selection,function(o,i){return o!==cell.row}),_grid.setActiveCell(cell.row,cell.cell);else if(selection.length&&e.shiftKey){var last=selection.pop(),from=Math.min(cell.row,last),to=Math.max(cell.row,last);selection=[];for(var i=from;i<=to;i++)i!==last&&selection.push(i);selection.push(last),_grid.setActiveCell(cell.row,cell.cell)}return setSelectedRanges(rowsToRanges(selection)),e.stopImmediatePropagation(),!0}$.extend(this,{getSelectedRows:getSelectedRows,setSelectedRows:function(rows){setSelectedRanges(rowsToRanges(rows))},getSelectedRanges:function(){return _ranges},setSelectedRanges:setSelectedRanges,init:function(grid){_options=$.extend(!0,{},_defaults,options),_grid=grid,_handler.subscribe(_grid.onActiveCellChanged,wrapHandler(handleActiveCellChange)),_handler.subscribe(_grid.onKeyDown,wrapHandler(handleKeyDown)),_handler.subscribe(_grid.onClick,wrapHandler(handleClick))},destroy:function(){_handler.unsubscribeAll()},onSelectedRangesChanged:new Slick.Event})}}})}(jQuery);