!function($){$.extend(!0,window,{Slick:{CheckboxSelectColumn:function(options){var _grid,_selectAll_UID=createUID(),_handler=new Slick.EventHandler,_selectedRowsLookup={},_isSelectAllChecked=!1,_options=$.extend(!0,{},{columnId:"_checkbox_selector",cssClass:null,hideSelectAllCheckbox:!1,toolTip:"Select/Deselect All",width:30,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},options);function hideSelectAllFromColumnHeaderTitleRow(){_grid.updateColumnHeader(_options.columnId,"","")}function hideSelectAllFromColumnHeaderFilterRow(){$("#filter-checkbox-selectall-container").hide()}function handleSelectedRowsChanged(e,args){var row,i,selectedRows=_grid.getSelectedRows(),lookup={};for(i=0;i<selectedRows.length;i++)lookup[row=selectedRows[i]]=!0,lookup[row]!==_selectedRowsLookup[row]&&(_grid.invalidateRow(row),delete _selectedRowsLookup[row]);for(i in _selectedRowsLookup)_grid.invalidateRow(i);(_selectedRowsLookup=lookup,_grid.render(),_isSelectAllChecked=selectedRows.length&&selectedRows.length==_grid.getDataLength(),_options.hideInColumnTitleRow||_options.hideSelectAllCheckbox||(_isSelectAllChecked?_grid.updateColumnHeader(_options.columnId,"<input id='header-selector"+_selectAll_UID+"' type='checkbox' checked='checked'><label for='header-selector"+_selectAll_UID+"'></label>",_options.toolTip):_grid.updateColumnHeader(_options.columnId,"<input id='header-selector"+_selectAll_UID+"' type='checkbox'><label for='header-selector"+_selectAll_UID+"'></label>",_options.toolTip)),_options.hideInFilterHeaderRow)||$("#header-filter-selector"+_selectAll_UID).prop("checked",_isSelectAllChecked)}function handleKeyDown(e,args){32==e.which&&_grid.getColumns()[args.cell].id===_options.columnId&&(_grid.getEditorLock().isActive()&&!_grid.getEditorLock().commitCurrentEdit()||toggleRowSelection(args.row),e.preventDefault(),e.stopImmediatePropagation())}function handleClick(e,args){if(_grid.getColumns()[args.cell].id===_options.columnId&&$(e.target).is(":checkbox")){if(_grid.getEditorLock().isActive()&&!_grid.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();toggleRowSelection(args.row),e.stopPropagation(),e.stopImmediatePropagation()}}function toggleRowSelection(row){_selectedRowsLookup[row]?_grid.setSelectedRows($.grep(_grid.getSelectedRows(),function(n){return n!=row})):_grid.setSelectedRows(_grid.getSelectedRows().concat(row)),_grid.setActiveCell(row,function(){if(null===_checkboxColumnCellIndex){_checkboxColumnCellIndex=0;for(var colArr=_grid.getColumns(),i=0;i<colArr.length;i++)colArr[i].id==_options.columnId&&(_checkboxColumnCellIndex=i)}return _checkboxColumnCellIndex}()),_grid.focus()}function handleHeaderClick(e,args){if(args.column.id==_options.columnId&&$(e.target).is(":checkbox")){if(_grid.getEditorLock().isActive()&&!_grid.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();if($(e.target).is(":checked")){for(var rows=[],i=0;i<_grid.getDataLength();i++)rows.push(i);_grid.setSelectedRows(rows)}else _grid.setSelectedRows([]);e.stopPropagation(),e.stopImmediatePropagation()}}var _checkboxColumnCellIndex=null;function createUID(){return Math.round(1e7*Math.random())}function checkboxSelectionFormatter(row,cell,value,columnDef,dataContext){var UID=createUID()+row;return dataContext?_selectedRowsLookup[row]?"<input id='selector"+UID+"' type='checkbox' checked='checked'><label for='selector"+UID+"'></label>":"<input id='selector"+UID+"' type='checkbox'><label for='selector"+UID+"'></label>":null}$.extend(this,{init:function(grid){_grid=grid,_handler.subscribe(_grid.onSelectedRowsChanged,handleSelectedRowsChanged).subscribe(_grid.onClick,handleClick).subscribe(_grid.onKeyDown,handleKeyDown),_options.hideInFilterHeaderRow||function(grid){grid.onHeaderRowCellRendered.subscribe(function(e,args){"sel"===args.column.field&&($(args.node).empty(),$("<span id='filter-checkbox-selectall-container'><input id='header-filter-selector"+_selectAll_UID+"' type='checkbox'><label for='header-filter-selector"+_selectAll_UID+"'></label></span>").appendTo(args.node).on("click",function(evnt){handleHeaderClick(evnt,args)}))})}(grid),_options.hideInColumnTitleRow||_handler.subscribe(_grid.onHeaderClick,handleHeaderClick)},destroy:function(){_handler.unsubscribeAll()},deSelectRows:function(rowArray){var i,l=rowArray.length,removeRows=[];for(i=0;i<l;i++)_selectedRowsLookup[rowArray[i]]&&(removeRows[removeRows.length]=rowArray[i]);_grid.setSelectedRows($.grep(_grid.getSelectedRows(),function(n){return removeRows.indexOf(n)<0}))},selectRows:function(rowArray){var i,l=rowArray.length,addRows=[];for(i=0;i<l;i++)_selectedRowsLookup[rowArray[i]]||(addRows[addRows.length]=rowArray[i]);_grid.setSelectedRows(_grid.getSelectedRows().concat(addRows))},getColumnDefinition:function(){return{id:_options.columnId,name:_options.hideSelectAllCheckbox||_options.hideInColumnTitleRow?"":"<input id='header-selector"+_selectAll_UID+"' type='checkbox'><label for='header-selector"+_selectAll_UID+"'></label>",toolTip:_options.toolTip,field:"sel",width:_options.width,resizable:!1,sortable:!1,cssClass:_options.cssClass,hideSelectAllCheckbox:_options.hideSelectAllCheckbox,formatter:checkboxSelectionFormatter}},getOptions:function(){return _options},setOptions:function(options){if((_options=$.extend(!0,{},_options,options)).hideSelectAllCheckbox)hideSelectAllFromColumnHeaderTitleRow(),hideSelectAllFromColumnHeaderFilterRow();else if(_options.hideInColumnTitleRow?hideSelectAllFromColumnHeaderTitleRow():(_isSelectAllChecked?_grid.updateColumnHeader(_options.columnId,"<input id='header-selector"+_selectAll_UID+"' type='checkbox' checked='checked'><label for='header-selector"+_selectAll_UID+"'></label>",_options.toolTip):_grid.updateColumnHeader(_options.columnId,"<input id='header-selector"+_selectAll_UID+"' type='checkbox'><label for='header-selector"+_selectAll_UID+"'></label>",_options.toolTip),_handler.subscribe(_grid.onHeaderClick,handleHeaderClick)),_options.hideInFilterHeaderRow)hideSelectAllFromColumnHeaderFilterRow();else{var selectAllContainer=$("#filter-checkbox-selectall-container");selectAllContainer.show(),selectAllContainer.find('input[type="checkbox"]').prop("checked",_isSelectAllChecked)}}})}}})}(jQuery);