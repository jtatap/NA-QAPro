@isTest
public class AgileOneTest {
    static Map<String, String> responseHeaders = new Map<String, String>();    
	@isTest
    public static void getC360DataTest(){
        Test.startTest();
        responseHeaders.put('Content-Type', 'application/json');
        SingleRequestMock fakeResponse = new SingleRequestMock(200,
                                                 'OK',
                                                 '{"customerIds":["C0021733313","0031U00000U7ZjxQAF","2019101706050100104305CK"]}',
                                                 responseHeaders);
        
        Test.setMock(HttpCalloutMock.class, fakeResponse);   
        List<AgileOne.TransactionRec> transLst = AgileOne.getC360Data('C0021733313','2');
        Test.stopTest();
      
        System.assertNotEquals(null, transLst);
    }
    
    @isTest
    public static void getTrackerAPIAccesskeyTest(){
        Test.startTest();
        String brandId = '2';
        List<A1_TrackerAPI_creds__mdt> trackerCred = [select id,BrandId__c from A1_TrackerAPI_creds__mdt where BrandId__c=: brandId];
        String accessKey = AgileOne.getTrackerAPIAccesskey(trackerCred[0]);
        Test.stopTest();
        
        System.assertNotEquals(null, accessKey);
    }
    @isTest
    public static void getRewardsDataTest(){
        Test.startTest();
        Reward__c rew = new Reward__c(TransactionId__c='TR101',Status__c='Redeemed',LoyaltyId__c='CK1235999',RewardType__c='33');
        insert rew;
        List<Reward__c> rewardLst = AgileOne.getRewardsData('CK1235999');
        Test.stopTest();
        System.assertEquals('33', rewardLst[0].RewardType__c);
        System.assertEquals('Redeemed', rewardLst[0].Status__c);
    }
   /* @isTest
    public static void parseresourceJSONTest(){
        Test.startTest();
        //String response ='{"customerIds":["0032300000O1GnqAAF","E04000146848"],"{\\"displayResourceKey\\":\\"$customerTransaction360\\",\\"resource\\":\\"transaction\\",\\"layout\\":\\"customer\\"}":[{"rowKey":"testTransaction","values":[{"udmColumn":"transaction.Type","value":"TypeTrans"},{"udmColumn":"transaction.SourceTransactionNumber","value":"900"},{"udmColumn":"transaction.Total","value":"900"},{"udmColumn":"transaction.c_finalPoints","value":"900"},{"udmColumn":"transaction.TransactionTimestamp","value":"1584374412000"}],"children":[[{"udmColumn":"product.SourceProductNumber","value":"1011"},{"udmColumn":"product.Name","value":"name"},{"udmColumn":"product.BrandName","value":"brandName"},{"udmColumn":"transactionitem.SaleRevenue","value":"200"},{"udmColumn":"transactionitem.Discount","value":"100"},{"udmColumn":"transactionitem.Quantity","value":"5"}]],"ignore":false}],"{\\"displayResourceKey\\":\\"$customersummaryAttributes\\",\\"resource\\":\\"customersummary\\",\\"layout\\":\\"customer\\"}":[{"rowKey":"testcustomersummary","values":[{"udmColumn":"customersummary.c_balancePoints","value":"900"}],"children":[],"ignore":false}],"{\\"displayResourceKey\\":\\"$customerJourney\\",\\"resource\\":\\"event\\",\\"layout\\":\\"customer\\"}":[{"rowKey":"testevents","values":[{"udmColumn":"event.CustomerID","value":"E04000146848"},{"udmColumn":"event.c_pointsGranted","value":"-1100"},{"udmColumn":"event.c_accrualPeriod","value":"20200309-20200315"},{"udmColumn":"event.c_sfscCaseNumber","value":"00001726"},{"udmColumn":"event.c_sfscAgentId","value":"sona sofiaantony raj"},{"udmColumn":"event.EventTimeStamp","value":"1584374412000"},{"udmColumn":"event.Type","value":"points"},{"udmColumn":"event.Subtype","value":"customerServiceAdhocGrant"},{"udmColumn":"event.Variables","value":"UserAgent=SFDC-Callout%2F48.0"}],"children":[[{"udmColumn":"event.SourceProductNumber","value":null}]],"ignore":false}]}';
        string response='{"customerIds":["0032C00000eHQz9QAG","C04005391213"],"masterCustomerGroupMasterCustomerIds":["C04005391213"],"{\"resource\":\"customersummary\",\"layout\":\"customer\"}":[{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"MASTERCUSTOMERID","value":"C04005391213"},{"udmColumn":"customersummary.Address1","value":"71 Cross Bay Blvd Unit 344"},{"udmColumn":"customersummary.AddressCertified","value":"true"},{"udmColumn":"customersummary.City","value":"Broad Channel"},{"udmColumn":"customersummary.Country","value":"US"},{"udmColumn":"customersummary.CustomerId","value":"C04005391213"},{"udmColumn":"customersummary.DoNotEmail","value":"N"},{"udmColumn":"customersummary.EmailStatus","value":"U"},{"udmColumn":"customersummary.FirstName","value":"Nawal"},{"udmColumn":"customersummary.FirstTransactionDate","value":"2022-10-14 12:00:00.000"},{"udmColumn":"customersummary.Gender","value":"Neutral"},{"udmColumn":"customersummary.LastName","value":"Montes"},{"udmColumn":"customersummary.MasterCustomerID","value":"C04005391213"},{"udmColumn":"customersummary.PrimaryOrganization","value":"Digital"},{"udmColumn":"customersummary.PrimaryPhone","value":"8361936237"},{"udmColumn":"customersummary.State","value":"NY"},{"udmColumn":"customersummary.Tenuredays","value":"249.0"},{"udmColumn":"customersummary.TotalClickCount31_60Days","value":"0.0"},{"udmColumn":"customersummary.TotalClickCountLast30Days","value":"0.0"},{"udmColumn":"customersummary.TotalOpenCount31_60Days","value":"0.0"},{"udmColumn":"customersummary.TotalOpenCountLast30Days","value":"0.0"},{"udmColumn":"customersummary.TotalRevenue","value":"177.0"},{"udmColumn":"customersummary.TotalRevenue_Last12Months","value":"177.0"},{"udmColumn":"customersummary.TotalRevenue_Last13_24Months","value":"0.0"},{"udmColumn":"customersummary.TotalSendCount31_60Days","value":"0.0"},{"udmColumn":"customersummary.TotalSendCountLast30Days","value":"0.0"},{"udmColumn":"customersummary.TotalTransactionCount","value":"1.0"},{"udmColumn":"customersummary.TotalTransactionCount_Last12Months","value":"1.0"},{"udmColumn":"customersummary.TotalTransactionCount_Last13_24Months","value":"0.0"},{"udmColumn":"customersummary.TotalVisitCount31_60Days","value":"0.0"},{"udmColumn":"customersummary.TotalVisitCountLast30Days","value":"0.0"},{"udmColumn":"customersummary.ZipCode","value":"11693"},{"udmColumn":"customersummary.aovgroup","value":"150-200"},{"udmColumn":"customersummary.averagediscountrate","value":"0%"},{"udmColumn":"customersummary.c_accruedPoints","value":"1450.0"},{"udmColumn":"customersummary.c_balancePoints","value":"50.0"},{"udmColumn":"customersummary.closeststore","value":"SECAUCUS, NJ"},{"udmColumn":"customersummary.email","value":"nawalmontesgdce2e@yopmail.com"},{"udmColumn":"customersummary.frequencygroup","value":"One Time Buyer"},{"udmColumn":"customersummary.totaltransactioncountgroup","value":"1"}],"children":[],"ignore":false}],"{\"resource\":\"customer\",\"layout\":\"customer\"}":[{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"0032C00000eHQz9QAG"},{"udmColumn":"ID","value":"0032C00000eHQz9QAG"},{"udmColumn":"customer.BirthDate","value":"1900-05-25 12:45:00.000"},{"udmColumn":"customer.CustomerId","value":"0032C00000eHQz9QAG"},{"udmColumn":"customer.DoNotCall","value":"Unknown"},{"udmColumn":"customer.DoNotEmail","value":"N"},{"udmColumn":"customer.DoNotMail","value":"Y"},{"udmColumn":"customer.Email","value":"nawalmontesgdce2e@yopmail.com"},{"udmColumn":"customer.EmailStatus","value":"U"},{"udmColumn":"customer.FirstName","value":"Nawal"},{"udmColumn":"customer.ID","value":"0032C00000eHQz9QAG"},{"udmColumn":"customer.LastName","value":"Montes"},{"udmColumn":"customer.RowModified","value":"2022-05-25 02:46:35.194"},{"udmColumn":"customer.SourceCustomerNumber","value":"0032C00000eHQz9QAG"},{"udmColumn":"customer.SourceSystemID","value":"FTP_CSV_7"}],"children":[[{"udmColumn":"address.Address1","value":"71 Cross Bay Blvd"},{"udmColumn":"address.Address2","value":""},{"udmColumn":"address.Certified","value":"true"},{"udmColumn":"address.City","value":"Broad Channel"},{"udmColumn":"address.Country","value":"US"},{"udmColumn":"address.Name","value":""},{"udmColumn":"address.State","value":"NY"},{"udmColumn":"address.Zip","value":"11693"},{"udmColumn":"customeraddressxref.DeleteFlag","value":""}]],"ignore":false},{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"ID","value":"C04005391213"},{"udmColumn":"customer.CustomerId","value":"C04005391213"},{"udmColumn":"customer.Email","value":"nawalmontesgdce2e@yopmail.com"},{"udmColumn":"customer.EmailStatus","value":"U"},{"udmColumn":"customer.FirstName","value":"Nawal"},{"udmColumn":"customer.ID","value":"C04005391213"},{"udmColumn":"customer.LastName","value":"Montes"},{"udmColumn":"customer.RowModified","value":"2023-02-16 15:53:01.433"},{"udmColumn":"customer.SourceCustomerNumber","value":"C04005391213"},{"udmColumn":"customer.SourceSystemID","value":"KFK_0"}],"children":[[{"udmColumn":"address.Address1","value":"71 Cross Bay Blvd"},{"udmColumn":"address.Address2","value":""},{"udmColumn":"address.Certified","value":"true"},{"udmColumn":"address.City","value":"Broad Channel"},{"udmColumn":"address.Country","value":"US"},{"udmColumn":"address.Name","value":""},{"udmColumn":"address.State","value":"NY"},{"udmColumn":"address.Zip","value":"11693"},{"udmColumn":"customeraddressxref.DeleteFlag","value":""}]],"ignore":false}],"{\"resource\":\"ml_out_mc_utoprecommendations\",\"layout\":\"customer\"}":[{"rowKey":null,"values":[],"children":[],"ignore":false}],"{\"resource\":\"event\",\"layout\":\"customer\"}":[{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"EVENTTIMESTAMP","value":"2023-05-25 08:17:33.000"},{"udmColumn":"ID","value":"f5466d33-2c4b-4732-88a3-90bf7b3d8c46"},{"udmColumn":"event.CustomerID","value":"C04005391213"},{"udmColumn":"event.EventTimeStamp","value":"2023-05-25 08:17:33.000"},{"udmColumn":"event.ID","value":"f5466d33-2c4b-4732-88a3-90bf7b3d8c46"},{"udmColumn":"event.Subtype","value":"customerServiceAdhocGrant"},{"udmColumn":"event.Type","value":"points"},{"udmColumn":"event.Variables","value":"UserAgent=SFDC-Callout%2F58.0"},{"udmColumn":"event.c_accrualPeriod","value":"20230130-20240128"},{"udmColumn":"event.c_pointsGranted","value":"1450.0"},{"udmColumn":"event.c_sfscAgentId","value":"pvh csrtester"},{"udmColumn":"event.c_sfscCaseNumber","value":"02209409"},{"udmColumn":"event.c_sfscComments","value":"test point addition"}],"children":[[]],"ignore":false},{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"EVENTTIMESTAMP","value":"2022-10-14 09:12:49.632"},{"udmColumn":"ID","value":"c0f35ccd-b5e8-4eed-8a5d-9ec295a91d95"},{"udmColumn":"event.CustomerID","value":"C04005391213"},{"udmColumn":"event.EventTimeStamp","value":"2022-10-14 09:12:49.632"},{"udmColumn":"event.ID","value":"c0f35ccd-b5e8-4eed-8a5d-9ec295a91d95"},{"udmColumn":"event.Type","value":"checkout"},{"udmColumn":"event.Variables","value":"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36"}],"children":[[]],"ignore":false},{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"EVENTTIMESTAMP","value":"2022-10-14 09:09:51.555"},{"udmColumn":"ID","value":"10ccb6b8-1436-4f7d-bfd2-9836abc6ee18"},{"udmColumn":"event.CustomerID","value":"C04005391213"},{"udmColumn":"event.EventTimeStamp","value":"2022-10-14 09:09:51.555"},{"udmColumn":"event.ID","value":"10ccb6b8-1436-4f7d-bfd2-9836abc6ee18"},{"udmColumn":"event.Type","value":"cartUpdated"},{"udmColumn":"event.Variables","value":"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36"},{"udmColumn":"product.Name","value":"MIKKI SANDAL"}],"children":[[{"udmColumn":"event.SourceProductNumber","value":"19630135232721"}]],"ignore":false},{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"EVENTTIMESTAMP","value":"2022-10-14 09:09:51.555"},{"udmColumn":"ID","value":"0c665a01-f76d-43c7-a115-eef1c8914824"},{"udmColumn":"event.CustomerID","value":"C04005391213"},{"udmColumn":"event.EventTimeStamp","value":"2022-10-14 09:09:51.555"},{"udmColumn":"event.ID","value":"0c665a01-f76d-43c7-a115-eef1c8914824"},{"udmColumn":"event.Type","value":"cartUpdated"},{"udmColumn":"event.Variables","value":"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36"},{"udmColumn":"product.Name","value":"CIZZO SNEAKER"}],"children":[[{"udmColumn":"event.SourceProductNumber","value":"19630196788021"}]],"ignore":false},{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"EVENTTIMESTAMP","value":"2022-10-14 09:09:46.733"},{"udmColumn":"ID","value":"13b73877-cbd5-40e5-a0cd-9d6f0e1c6d53"},{"udmColumn":"event.CustomerID","value":"C04005391213"},{"udmColumn":"event.EventTimeStamp","value":"2022-10-14 09:09:46.733"},{"udmColumn":"event.ID","value":"13b73877-cbd5-40e5-a0cd-9d6f0e1c6d53"},{"udmColumn":"event.Type","value":"onsiteSearch"},{"udmColumn":"event.Variables","value":"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36"}],"children":[[]],"ignore":false},{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"EVENTTIMESTAMP","value":"2022-10-14 09:09:09.002"},{"udmColumn":"ID","value":"a4edcc9b-3a82-4ac8-8b70-f3db86f7c1ce"},{"udmColumn":"event.CustomerID","value":"C04005391213"},{"udmColumn":"event.EventTimeStamp","value":"2022-10-14 09:09:09.002"},{"udmColumn":"event.ID","value":"a4edcc9b-3a82-4ac8-8b70-f3db86f7c1ce"},{"udmColumn":"event.Type","value":"cartUpdated"},{"udmColumn":"event.Variables","value":"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36"},{"udmColumn":"product.Name","value":"MIKKI SANDAL"}],"children":[[{"udmColumn":"event.SourceProductNumber","value":"19630135232721"}]],"ignore":false},{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"EVENTTIMESTAMP","value":"2022-10-14 09:09:03.456"},{"udmColumn":"ID","value":"a207833b-ee24-4c2c-940f-28bb192d9760"},{"udmColumn":"event.CustomerID","value":"C04005391213"},{"udmColumn":"event.EventTimeStamp","value":"2022-10-14 09:09:03.456"},{"udmColumn":"event.ID","value":"a207833b-ee24-4c2c-940f-28bb192d9760"},{"udmColumn":"event.Type","value":"onsiteSearch"},{"udmColumn":"event.Variables","value":"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36"}],"children":[[]],"ignore":false}],"{\"resource\":\"transaction\",\"layout\":\"customer\"}":[{"rowKey":null,"values":[{"udmColumn":"CUSTOMERID","value":"C04005391213"},{"udmColumn":"ID","value":"1170036751"},{"udmColumn":"TRANSACTIONTIMESTAMP","value":"2022-10-14 12:00:00.000"},{"udmColumn":"organization.SourceOrganizationNumber","value":"0601CO"},{"udmColumn":"organization.type","value":"Digital"},{"udmColumn":"transaction.CustomerID","value":"C04005391213"},{"udmColumn":"transaction.ID","value":"1170036751"},{"udmColumn":"transaction.SourceTransactionNumber","value":"1170036751"},{"udmColumn":"transaction.Total","value":"177.0"},{"udmColumn":"transaction.TransactionTimestamp","value":"2022-10-14 12:00:00.000"},{"udmColumn":"transaction.Type","value":"Purchase"},{"udmColumn":"transaction.c_ecomOrderid","value":"1170036751"},{"udmColumn":"transaction.c_finalPoints","value":"177.0"}],"children":[[{"udmColumn":"product.BrandName","value":"CK"},{"udmColumn":"product.ImageURL","value":""},{"udmColumn":"product.Name","value":"MIKKI SANDAL"},{"udmColumn":"product.ProductURL","value":""},{"udmColumn":"product.SourceProductNumber","value":"19630135232721"},{"udmColumn":"transactionitem.Discount","value":"0"},{"udmColumn":"transactionitem.Quantity","value":"3"},{"udmColumn":"transactionitem.SaleRevenue","value":"177"},{"udmColumn":"transactionitem.ShipDate","value":"2022-10-14 00:00:00.000"},{"udmColumn":"transactionitem.ShippingRevenue","value":""},{"udmColumn":"transactionitem.Subtype","value":"Shipped"},{"udmColumn":"transactionitem.Type","value":"Purchase"},{"udmColumn":"transactionitem.c_webOrderDate","value":"2022-10-14 00:00:00.000"}]],"ignore":false}]}';
        		List<AgileOne.TransactionRec> transLst = AgileOne.parseresourceJSON(response);
        		Test.stopTest();
        System.assertEquals(true, transLst.size()>0);
    }*/
    @isTest
    public static void parseresourceJSONTest() {
		String json = '{\"customerIds\":[\"0032C00000eHQz9QAG\",\"C04005391213\"],\"masterCustomerGroupMasterCustomerIds\":[\"C04005391213\"],\"{\\\"resource\\\":\\\"customersummary\\\",\\\"layout\\\":\\\"customer\\\"}\":[{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"MASTERCUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"customersummary.Address1\",\"value\":\"71 Cross Bay Blvd Unit 344\"},{\"udmColumn\":\"customersummary.AddressCertified\",\"value\":\"true\"},{\"udmColumn\":\"customersummary.City\",\"value\":\"Broad Channel\"},{\"udmColumn\":\"customersummary.Country\",\"value\":\"US\"},{\"udmColumn\":\"customersummary.CustomerId\",\"value\":\"C04005391213\"},{\"udmColumn\":\"customersummary.DoNotEmail\",\"value\":\"N\"},{\"udmColumn\":\"customersummary.EmailStatus\",\"value\":\"U\"},{\"udmColumn\":\"customersummary.FirstName\",\"value\":\"Nawal\"},{\"udmColumn\":\"customersummary.FirstTransactionDate\",\"value\":\"2022-10-14 12:00:00.000\"},{\"udmColumn\":\"customersummary.Gender\",\"value\":\"Neutral\"},{\"udmColumn\":\"customersummary.LastName\",\"value\":\"Montes\"},{\"udmColumn\":\"customersummary.MasterCustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"customersummary.PrimaryOrganization\",\"value\":\"Digital\"},{\"udmColumn\":\"customersummary.PrimaryPhone\",\"value\":\"8361936237\"},{\"udmColumn\":\"customersummary.State\",\"value\":\"NY\"},{\"udmColumn\":\"customersummary.Tenuredays\",\"value\":\"249.0\"},{\"udmColumn\":\"customersummary.TotalClickCount31_60Days\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalClickCountLast30Days\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalOpenCount31_60Days\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalOpenCountLast30Days\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalRevenue\",\"value\":\"177.0\"},{\"udmColumn\":\"customersummary.TotalRevenue_Last12Months\",\"value\":\"177.0\"},{\"udmColumn\":\"customersummary.TotalRevenue_Last13_24Months\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalSendCount31_60Days\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalSendCountLast30Days\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalTransactionCount\",\"value\":\"1.0\"},{\"udmColumn\":\"customersummary.TotalTransactionCount_Last12Months\",\"value\":\"1.0\"},{\"udmColumn\":\"customersummary.TotalTransactionCount_Last13_24Months\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalVisitCount31_60Days\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.TotalVisitCountLast30Days\",\"value\":\"0.0\"},{\"udmColumn\":\"customersummary.ZipCode\",\"value\":\"11693\"},{\"udmColumn\":\"customersummary.aovgroup\",\"value\":\"150-200\"},{\"udmColumn\":\"customersummary.averagediscountrate\",\"value\":\"0%\"},{\"udmColumn\":\"customersummary.c_accruedPoints\",\"value\":\"1450.0\"},{\"udmColumn\":\"customersummary.c_balancePoints\",\"value\":\"50.0\"},{\"udmColumn\":\"customersummary.closeststore\",\"value\":\"SECAUCUS, NJ\"},{\"udmColumn\":\"customersummary.email\",\"value\":\"nawalmontesgdce2e@yopmail.com\"},{\"udmColumn\":\"customersummary.frequencygroup\",\"value\":\"One Time Buyer\"},{\"udmColumn\":\"customersummary.totaltransactioncountgroup\",\"value\":\"1\"}],\"children\":[],\"ignore\":false}],\"{\\\"resource\\\":\\\"customer\\\",\\\"layout\\\":\\\"customer\\\"}\":[{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"0032C00000eHQz9QAG\"},{\"udmColumn\":\"ID\",\"value\":\"0032C00000eHQz9QAG\"},{\"udmColumn\":\"customer.BirthDate\",\"value\":\"1900-05-25 12:45:00.000\"},{\"udmColumn\":\"customer.CustomerId\",\"value\":\"0032C00000eHQz9QAG\"},{\"udmColumn\":\"customer.DoNotCall\",\"value\":\"Unknown\"},{\"udmColumn\":\"customer.DoNotEmail\",\"value\":\"N\"},{\"udmColumn\":\"customer.DoNotMail\",\"value\":\"Y\"},{\"udmColumn\":\"customer.Email\",\"value\":\"nawalmontesgdce2e@yopmail.com\"},{\"udmColumn\":\"customer.EmailStatus\",\"value\":\"U\"},{\"udmColumn\":\"customer.FirstName\",\"value\":\"Nawal\"},{\"udmColumn\":\"customer.ID\",\"value\":\"0032C00000eHQz9QAG\"},{\"udmColumn\":\"customer.LastName\",\"value\":\"Montes\"},{\"udmColumn\":\"customer.RowModified\",\"value\":\"2022-05-25 02:46:35.194\"},{\"udmColumn\":\"customer.SourceCustomerNumber\",\"value\":\"0032C00000eHQz9QAG\"},{\"udmColumn\":\"customer.SourceSystemID\",\"value\":\"FTP_CSV_7\"}],\"children\":[[{\"udmColumn\":\"address.Address1\",\"value\":\"71 Cross Bay Blvd\"},{\"udmColumn\":\"address.Address2\",\"value\":\"\"},{\"udmColumn\":\"address.Certified\",\"value\":\"true\"},{\"udmColumn\":\"address.City\",\"value\":\"Broad Channel\"},{\"udmColumn\":\"address.Country\",\"value\":\"US\"},{\"udmColumn\":\"address.Name\",\"value\":\"\"},{\"udmColumn\":\"address.State\",\"value\":\"NY\"},{\"udmColumn\":\"address.Zip\",\"value\":\"11693\"},{\"udmColumn\":\"customeraddressxref.DeleteFlag\",\"value\":\"\"}]],\"ignore\":false},{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"ID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"customer.CustomerId\",\"value\":\"C04005391213\"},{\"udmColumn\":\"customer.Email\",\"value\":\"nawalmontesgdce2e@yopmail.com\"},{\"udmColumn\":\"customer.EmailStatus\",\"value\":\"U\"},{\"udmColumn\":\"customer.FirstName\",\"value\":\"Nawal\"},{\"udmColumn\":\"customer.ID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"customer.LastName\",\"value\":\"Montes\"},{\"udmColumn\":\"customer.RowModified\",\"value\":\"2023-02-16 15:53:01.433\"},{\"udmColumn\":\"customer.SourceCustomerNumber\",\"value\":\"C04005391213\"},{\"udmColumn\":\"customer.SourceSystemID\",\"value\":\"KFK_0\"}],\"children\":[[{\"udmColumn\":\"address.Address1\",\"value\":\"71 Cross Bay Blvd\"},{\"udmColumn\":\"address.Address2\",\"value\":\"\"},{\"udmColumn\":\"address.Certified\",\"value\":\"true\"},{\"udmColumn\":\"address.City\",\"value\":\"Broad Channel\"},{\"udmColumn\":\"address.Country\",\"value\":\"US\"},{\"udmColumn\":\"address.Name\",\"value\":\"\"},{\"udmColumn\":\"address.State\",\"value\":\"NY\"},{\"udmColumn\":\"address.Zip\",\"value\":\"11693\"},{\"udmColumn\":\"customeraddressxref.DeleteFlag\",\"value\":\"\"}]],\"ignore\":false}],\"{\\\"resource\\\":\\\"ml_out_mc_utoprecommendations\\\",\\\"layout\\\":\\\"customer\\\"}\":[{\"rowKey\":null,\"values\":[],\"children\":[],\"ignore\":false}],\"{\\\"resource\\\":\\\"event\\\",\\\"layout\\\":\\\"customer\\\"}\":[{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"EVENTTIMESTAMP\",\"value\":\"2023-05-25 08:17:33.000\"},{\"udmColumn\":\"ID\",\"value\":\"f5466d33-2c4b-4732-88a3-90bf7b3d8c46\"},{\"udmColumn\":\"event.CustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"event.EventTimeStamp\",\"value\":\"2023-05-25 08:17:33.000\"},{\"udmColumn\":\"event.ID\",\"value\":\"f5466d33-2c4b-4732-88a3-90bf7b3d8c46\"},{\"udmColumn\":\"event.Subtype\",\"value\":\"customerServiceAdhocGrant\"},{\"udmColumn\":\"event.Type\",\"value\":\"points\"},{\"udmColumn\":\"event.Variables\",\"value\":\"UserAgent=SFDC-Callout%2F58.0\"},{\"udmColumn\":\"event.c_accrualPeriod\",\"value\":\"20230130-20240128\"},{\"udmColumn\":\"event.c_pointsGranted\",\"value\":\"1450.0\"},{\"udmColumn\":\"event.c_sfscAgentId\",\"value\":\"pvh csrtester\"},{\"udmColumn\":\"event.c_sfscCaseNumber\",\"value\":\"02209409\"},{\"udmColumn\":\"event.c_sfscComments\",\"value\":\"test point addition\"}],\"children\":[[]],\"ignore\":false},{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"EVENTTIMESTAMP\",\"value\":\"2022-10-14 09:12:49.632\"},{\"udmColumn\":\"ID\",\"value\":\"c0f35ccd-b5e8-4eed-8a5d-9ec295a91d95\"},{\"udmColumn\":\"event.CustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"event.EventTimeStamp\",\"value\":\"2022-10-14 09:12:49.632\"},{\"udmColumn\":\"event.ID\",\"value\":\"c0f35ccd-b5e8-4eed-8a5d-9ec295a91d95\"},{\"udmColumn\":\"event.Type\",\"value\":\"checkout\"},{\"udmColumn\":\"event.Variables\",\"value\":\"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36\"}],\"children\":[[]],\"ignore\":false},{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"EVENTTIMESTAMP\",\"value\":\"2022-10-14 09:09:51.555\"},{\"udmColumn\":\"ID\",\"value\":\"10ccb6b8-1436-4f7d-bfd2-9836abc6ee18\"},{\"udmColumn\":\"event.CustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"event.EventTimeStamp\",\"value\":\"2022-10-14 09:09:51.555\"},{\"udmColumn\":\"event.ID\",\"value\":\"10ccb6b8-1436-4f7d-bfd2-9836abc6ee18\"},{\"udmColumn\":\"event.Type\",\"value\":\"cartUpdated\"},{\"udmColumn\":\"event.Variables\",\"value\":\"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36\"},{\"udmColumn\":\"product.Name\",\"value\":\"MIKKI SANDAL\"}],\"children\":[[{\"udmColumn\":\"event.SourceProductNumber\",\"value\":\"19630135232721\"}]],\"ignore\":false},{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"EVENTTIMESTAMP\",\"value\":\"2022-10-14 09:09:51.555\"},{\"udmColumn\":\"ID\",\"value\":\"0c665a01-f76d-43c7-a115-eef1c8914824\"},{\"udmColumn\":\"event.CustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"event.EventTimeStamp\",\"value\":\"2022-10-14 09:09:51.555\"},{\"udmColumn\":\"event.ID\",\"value\":\"0c665a01-f76d-43c7-a115-eef1c8914824\"},{\"udmColumn\":\"event.Type\",\"value\":\"cartUpdated\"},{\"udmColumn\":\"event.Variables\",\"value\":\"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36\"},{\"udmColumn\":\"product.Name\",\"value\":\"CIZZO SNEAKER\"}],\"children\":[[{\"udmColumn\":\"event.SourceProductNumber\",\"value\":\"19630196788021\"}]],\"ignore\":false},{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"EVENTTIMESTAMP\",\"value\":\"2022-10-14 09:09:46.733\"},{\"udmColumn\":\"ID\",\"value\":\"13b73877-cbd5-40e5-a0cd-9d6f0e1c6d53\"},{\"udmColumn\":\"event.CustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"event.EventTimeStamp\",\"value\":\"2022-10-14 09:09:46.733\"},{\"udmColumn\":\"event.ID\",\"value\":\"13b73877-cbd5-40e5-a0cd-9d6f0e1c6d53\"},{\"udmColumn\":\"event.Type\",\"value\":\"onsiteSearch\"},{\"udmColumn\":\"event.Variables\",\"value\":\"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36\"}],\"children\":[[]],\"ignore\":false},{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"EVENTTIMESTAMP\",\"value\":\"2022-10-14 09:09:09.002\"},{\"udmColumn\":\"ID\",\"value\":\"a4edcc9b-3a82-4ac8-8b70-f3db86f7c1ce\"},{\"udmColumn\":\"event.CustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"event.EventTimeStamp\",\"value\":\"2022-10-14 09:09:09.002\"},{\"udmColumn\":\"event.ID\",\"value\":\"a4edcc9b-3a82-4ac8-8b70-f3db86f7c1ce\"},{\"udmColumn\":\"event.Type\",\"value\":\"cartUpdated\"},{\"udmColumn\":\"event.Variables\",\"value\":\"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36\"},{\"udmColumn\":\"product.Name\",\"value\":\"MIKKI SANDAL\"}],\"children\":[[{\"udmColumn\":\"event.SourceProductNumber\",\"value\":\"19630135232721\"}]],\"ignore\":false},{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"EVENTTIMESTAMP\",\"value\":\"2022-10-14 09:09:03.456\"},{\"udmColumn\":\"ID\",\"value\":\"a207833b-ee24-4c2c-940f-28bb192d9760\"},{\"udmColumn\":\"event.CustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"event.EventTimeStamp\",\"value\":\"2022-10-14 09:09:03.456\"},{\"udmColumn\":\"event.ID\",\"value\":\"a207833b-ee24-4c2c-940f-28bb192d9760\"},{\"udmColumn\":\"event.Type\",\"value\":\"onsiteSearch\"},{\"udmColumn\":\"event.Variables\",\"value\":\"UserAgent=Mozilla%2F5.0+%28Windows+NT+10.0%3B+Win64%3B+x64%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F106.0.0.0+Safari%2F537.36\"}],\"children\":[[]],\"ignore\":false}],\"{\\\"resource\\\":\\\"transaction\\\",\\\"layout\\\":\\\"customer\\\"}\":[{\"rowKey\":null,\"values\":[{\"udmColumn\":\"CUSTOMERID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"ID\",\"value\":\"1170036751\"},{\"udmColumn\":\"TRANSACTIONTIMESTAMP\",\"value\":\"2022-10-14 12:00:00.000\"},{\"udmColumn\":\"organization.SourceOrganizationNumber\",\"value\":\"0601CO\"},{\"udmColumn\":\"organization.type\",\"value\":\"Digital\"},{\"udmColumn\":\"transaction.CustomerID\",\"value\":\"C04005391213\"},{\"udmColumn\":\"transaction.ID\",\"value\":\"1170036751\"},{\"udmColumn\":\"transaction.SourceTransactionNumber\",\"value\":\"1170036751\"},{\"udmColumn\":\"transaction.Total\",\"value\":\"177.0\"},{\"udmColumn\":\"transaction.TransactionTimestamp\",\"value\":\"2022-10-14 12:00:00.000\"},{\"udmColumn\":\"transaction.Type\",\"value\":\"Purchase\"},{\"udmColumn\":\"transaction.c_ecomOrderid\",\"value\":\"1170036751\"},{\"udmColumn\":\"transaction.c_finalPoints\",\"value\":\"177.0\"}],\"children\":[[{\"udmColumn\":\"product.BrandName\",\"value\":\"CK\"},{\"udmColumn\":\"product.ImageURL\",\"value\":\"\"},{\"udmColumn\":\"product.Name\",\"value\":\"MIKKI SANDAL\"},{\"udmColumn\":\"product.ProductURL\",\"value\":\"\"},{\"udmColumn\":\"product.SourceProductNumber\",\"value\":\"19630135232721\"},{\"udmColumn\":\"transactionitem.Discount\",\"value\":\"0\"},{\"udmColumn\":\"transactionitem.Quantity\",\"value\":\"3\"},{\"udmColumn\":\"transactionitem.SaleRevenue\",\"value\":\"177\"},{\"udmColumn\":\"transactionitem.ShipDate\",\"value\":\"2022-10-14 00:00:00.000\"},{\"udmColumn\":\"transactionitem.ShippingRevenue\",\"value\":\"\"},{\"udmColumn\":\"transactionitem.Subtype\",\"value\":\"Shipped\"},{\"udmColumn\":\"transactionitem.Type\",\"value\":\"Purchase\"},{\"udmColumn\":\"transactionitem.c_webOrderDate\",\"value\":\"2022-10-14 00:00:00.000\"}]],\"ignore\":false}]}';
		//JSON2Apex obj = JSON2Apex.parse(json);
		List<AgileOne.TransactionRec> transLst = AgileOne.parseresourceJSON(json);
		System.assert(transLst.size() != null);
	}
}